var webpackQueues,webpackExports,webpackError,resolveQueue,__webpack_modules__={588:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FluentBundle:()=>FluentBundle,FluentResource:()=>FluentResource});class FluentType{constructor(value){this.value=value}valueOf(){return this.value}}class FluentNone extends FluentType{constructor(value="???"){super(value)}toString(scope){return`{${this.value}}`}}class FluentNumber extends FluentType{constructor(value,opts={}){super(value);this.opts=opts}toString(scope){try{return scope.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(err){scope.reportError(err);return this.value.toString(10)}}}class FluentDateTime extends FluentType{constructor(value,opts={}){super(value);this.opts=opts}toString(scope){try{return scope.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(err){scope.reportError(err);return new Date(this.value).toISOString()}}}const MAX_PLACEABLES=100,FSI="⁨",PDI="⁩";function match(scope,selector,key){if(key===selector)return!0;if(key instanceof FluentNumber&&selector instanceof FluentNumber&&key.value===selector.value)return!0;if(selector instanceof FluentNumber&&"string"==typeof key){if(key===scope.memoizeIntlObject(Intl.PluralRules,selector.opts).select(selector.value))return!0}return!1}function getDefault(scope,variants,star){if(variants[star])return resolvePattern(scope,variants[star].value);scope.reportError(new RangeError("No default"));return new FluentNone}function getArguments(scope,args){const positional=[],named=Object.create(null);for(const arg of args)"narg"===arg.type?named[arg.name]=resolveExpression(scope,arg.value):positional.push(resolveExpression(scope,arg));return{positional:positional,named:named}}function resolveExpression(scope,expr){switch(expr.type){case"str":return expr.value;case"num":return new FluentNumber(expr.value,{minimumFractionDigits:expr.precision});case"var":return function resolveVariableReference(scope,{name:name}){let arg;if(scope.params){if(!Object.prototype.hasOwnProperty.call(scope.params,name))return new FluentNone(`$${name}`);arg=scope.params[name]}else{if(!scope.args||!Object.prototype.hasOwnProperty.call(scope.args,name)){scope.reportError(new ReferenceError(`Unknown variable: $${name}`));return new FluentNone(`$${name}`)}arg=scope.args[name]}if(arg instanceof FluentType)return arg;switch(typeof arg){case"string":return arg;case"number":return new FluentNumber(arg);case"object":if(arg instanceof Date)return new FluentDateTime(arg.getTime());default:scope.reportError(new TypeError(`Variable type not supported: $${name}, ${typeof arg}`));return new FluentNone(`$${name}`)}}(scope,expr);case"mesg":return function resolveMessageReference(scope,{name:name,attr:attr}){const message=scope.bundle._messages.get(name);if(!message){scope.reportError(new ReferenceError(`Unknown message: ${name}`));return new FluentNone(name)}if(attr){const attribute=message.attributes[attr];if(attribute)return resolvePattern(scope,attribute);scope.reportError(new ReferenceError(`Unknown attribute: ${attr}`));return new FluentNone(`${name}.${attr}`)}if(message.value)return resolvePattern(scope,message.value);scope.reportError(new ReferenceError(`No value: ${name}`));return new FluentNone(name)}(scope,expr);case"term":return function resolveTermReference(scope,{name:name,attr:attr,args:args}){const id=`-${name}`,term=scope.bundle._terms.get(id);if(!term){scope.reportError(new ReferenceError(`Unknown term: ${id}`));return new FluentNone(id)}if(attr){const attribute=term.attributes[attr];if(attribute){scope.params=getArguments(scope,args).named;const resolved=resolvePattern(scope,attribute);scope.params=null;return resolved}scope.reportError(new ReferenceError(`Unknown attribute: ${attr}`));return new FluentNone(`${id}.${attr}`)}scope.params=getArguments(scope,args).named;const resolved=resolvePattern(scope,term.value);scope.params=null;return resolved}(scope,expr);case"func":return function resolveFunctionReference(scope,{name:name,args:args}){let func=scope.bundle._functions[name];if(!func){scope.reportError(new ReferenceError(`Unknown function: ${name}()`));return new FluentNone(`${name}()`)}if("function"!=typeof func){scope.reportError(new TypeError(`Function ${name}() is not callable`));return new FluentNone(`${name}()`)}try{let resolved=getArguments(scope,args);return func(resolved.positional,resolved.named)}catch(err){scope.reportError(err);return new FluentNone(`${name}()`)}}(scope,expr);case"select":return function resolveSelectExpression(scope,{selector:selector,variants:variants,star:star}){let sel=resolveExpression(scope,selector);if(sel instanceof FluentNone)return getDefault(scope,variants,star);for(const variant of variants){if(match(scope,sel,resolveExpression(scope,variant.key)))return resolvePattern(scope,variant.value)}return getDefault(scope,variants,star)}(scope,expr);default:return new FluentNone}}function resolveComplexPattern(scope,ptn){if(scope.dirty.has(ptn)){scope.reportError(new RangeError("Cyclic reference"));return new FluentNone}scope.dirty.add(ptn);const result=[],useIsolating=scope.bundle._useIsolating&&ptn.length>1;for(const elem of ptn)if("string"!=typeof elem){scope.placeables++;if(scope.placeables>MAX_PLACEABLES){scope.dirty.delete(ptn);throw new RangeError(`Too many placeables expanded: ${scope.placeables}, max allowed is ${MAX_PLACEABLES}`)}useIsolating&&result.push(FSI);result.push(resolveExpression(scope,elem).toString(scope));useIsolating&&result.push(PDI)}else result.push(scope.bundle._transform(elem));scope.dirty.delete(ptn);return result.join("")}function resolvePattern(scope,value){return"string"==typeof value?scope.bundle._transform(value):resolveComplexPattern(scope,value)}class Scope{constructor(bundle,errors,args){this.dirty=new WeakSet;this.params=null;this.placeables=0;this.bundle=bundle;this.errors=errors;this.args=args}reportError(error){if(!(this.errors&&error instanceof Error))throw error;this.errors.push(error)}memoizeIntlObject(ctor,opts){let cache=this.bundle._intls.get(ctor);if(!cache){cache={};this.bundle._intls.set(ctor,cache)}let id=JSON.stringify(opts);cache[id]||(cache[id]=new ctor(this.bundle.locales,opts));return cache[id]}}function values(opts,allowed){const unwrapped=Object.create(null);for(const[name,opt]of Object.entries(opts))allowed.includes(name)&&(unwrapped[name]=opt.valueOf());return unwrapped}const NUMBER_ALLOWED=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function NUMBER(args,opts){let arg=args[0];if(arg instanceof FluentNone)return new FluentNone(`NUMBER(${arg.valueOf()})`);if(arg instanceof FluentNumber)return new FluentNumber(arg.valueOf(),{...arg.opts,...values(opts,NUMBER_ALLOWED)});if(arg instanceof FluentDateTime)return new FluentNumber(arg.valueOf(),{...values(opts,NUMBER_ALLOWED)});throw new TypeError("Invalid argument to NUMBER")}const DATETIME_ALLOWED=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function DATETIME(args,opts){let arg=args[0];if(arg instanceof FluentNone)return new FluentNone(`DATETIME(${arg.valueOf()})`);if(arg instanceof FluentDateTime)return new FluentDateTime(arg.valueOf(),{...arg.opts,...values(opts,DATETIME_ALLOWED)});if(arg instanceof FluentNumber)return new FluentDateTime(arg.valueOf(),{...values(opts,DATETIME_ALLOWED)});throw new TypeError("Invalid argument to DATETIME")}const cache=new Map;class FluentBundle{constructor(locales,{functions:functions,useIsolating:useIsolating=!0,transform:transform=(v=>v)}={}){this._terms=new Map;this._messages=new Map;this.locales=Array.isArray(locales)?locales:[locales];this._functions={NUMBER:NUMBER,DATETIME:DATETIME,...functions};this._useIsolating=useIsolating;this._transform=transform;this._intls=function getMemoizerForLocale(locales){const stringLocale=Array.isArray(locales)?locales.join(" "):locales;let memoizer=cache.get(stringLocale);if(void 0===memoizer){memoizer=new Map;cache.set(stringLocale,memoizer)}return memoizer}(locales)}hasMessage(id){return this._messages.has(id)}getMessage(id){return this._messages.get(id)}addResource(res,{allowOverrides:allowOverrides=!1}={}){const errors=[];for(let i=0;i<res.body.length;i++){let entry=res.body[i];if(entry.id.startsWith("-")){if(!1===allowOverrides&&this._terms.has(entry.id)){errors.push(new Error(`Attempt to override an existing term: "${entry.id}"`));continue}this._terms.set(entry.id,entry)}else{if(!1===allowOverrides&&this._messages.has(entry.id)){errors.push(new Error(`Attempt to override an existing message: "${entry.id}"`));continue}this._messages.set(entry.id,entry)}}return errors}formatPattern(pattern,args=null,errors=null){if("string"==typeof pattern)return this._transform(pattern);let scope=new Scope(this,errors,args);try{return resolveComplexPattern(scope,pattern).toString(scope)}catch(err){if(scope.errors&&err instanceof Error){scope.errors.push(err);return(new FluentNone).toString(scope)}throw err}}}const RE_MESSAGE_START=/^(-?[a-zA-Z][\w-]*) *= */gm,RE_ATTRIBUTE_START=/\.([a-zA-Z][\w-]*) *= */y,RE_VARIANT_START=/\*?\[/y,RE_NUMBER_LITERAL=/(-?[0-9]+(?:\.([0-9]+))?)/y,RE_IDENTIFIER=/([a-zA-Z][\w-]*)/y,RE_REFERENCE=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,RE_FUNCTION_NAME=/^[A-Z][A-Z0-9_-]*$/,RE_TEXT_RUN=/([^{}\n\r]+)/y,RE_STRING_RUN=/([^\\"\n\r]*)/y,RE_STRING_ESCAPE=/\\([\\"])/y,RE_UNICODE_ESCAPE=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,RE_LEADING_NEWLINES=/^\n+/,RE_TRAILING_SPACES=/ +$/,RE_BLANK_LINES=/ *\r?\n/g,RE_INDENT=/( *)$/,TOKEN_BRACE_OPEN=/{\s*/y,TOKEN_BRACE_CLOSE=/\s*}/y,TOKEN_BRACKET_OPEN=/\[\s*/y,TOKEN_BRACKET_CLOSE=/\s*] */y,TOKEN_PAREN_OPEN=/\s*\(\s*/y,TOKEN_ARROW=/\s*->\s*/y,TOKEN_COLON=/\s*:\s*/y,TOKEN_COMMA=/\s*,?\s*/y,TOKEN_BLANK=/\s+/y;class FluentResource{constructor(source){this.body=[];RE_MESSAGE_START.lastIndex=0;let cursor=0;for(;;){let next=RE_MESSAGE_START.exec(source);if(null===next)break;cursor=RE_MESSAGE_START.lastIndex;try{this.body.push(parseMessage(next[1]))}catch(err){if(err instanceof SyntaxError)continue;throw err}}function test(re){re.lastIndex=cursor;return re.test(source)}function consumeChar(char,errorClass){if(source[cursor]===char){cursor++;return!0}if(errorClass)throw new errorClass(`Expected ${char}`);return!1}function consumeToken(re,errorClass){if(test(re)){cursor=re.lastIndex;return!0}if(errorClass)throw new errorClass(`Expected ${re.toString()}`);return!1}function match(re){re.lastIndex=cursor;let result=re.exec(source);if(null===result)throw new SyntaxError(`Expected ${re.toString()}`);cursor=re.lastIndex;return result}function match1(re){return match(re)[1]}function parseMessage(id){let value=parsePattern(),attributes=function parseAttributes(){let attrs=Object.create(null);for(;test(RE_ATTRIBUTE_START);){let name=match1(RE_ATTRIBUTE_START),value=parsePattern();if(null===value)throw new SyntaxError("Expected attribute value");attrs[name]=value}return attrs}();if(null===value&&0===Object.keys(attributes).length)throw new SyntaxError("Expected message value or attributes");return{id:id,value:value,attributes:attributes}}function parsePattern(){let first;test(RE_TEXT_RUN)&&(first=match1(RE_TEXT_RUN));if("{"===source[cursor]||"}"===source[cursor])return parsePatternElements(first?[first]:[],1/0);let indent=parseIndent();if(indent){if(first)return parsePatternElements([first,indent],indent.length);indent.value=trim(indent.value,RE_LEADING_NEWLINES);return parsePatternElements([indent],indent.length)}return first?trim(first,RE_TRAILING_SPACES):null}function parsePatternElements(elements=[],commonIndent){for(;;){if(test(RE_TEXT_RUN)){elements.push(match1(RE_TEXT_RUN));continue}if("{"===source[cursor]){elements.push(parsePlaceable());continue}if("}"===source[cursor])throw new SyntaxError("Unbalanced closing brace");let indent=parseIndent();if(!indent)break;elements.push(indent);commonIndent=Math.min(commonIndent,indent.length)}let lastIndex=elements.length-1,lastElement=elements[lastIndex];"string"==typeof lastElement&&(elements[lastIndex]=trim(lastElement,RE_TRAILING_SPACES));let baked=[];for(let element of elements){element instanceof Indent&&(element=element.value.slice(0,element.value.length-commonIndent));element&&baked.push(element)}return baked}function parsePlaceable(){consumeToken(TOKEN_BRACE_OPEN,SyntaxError);let selector=parseInlineExpression();if(consumeToken(TOKEN_BRACE_CLOSE))return selector;if(consumeToken(TOKEN_ARROW)){let variants=function parseVariants(){let star,variants=[],count=0;for(;test(RE_VARIANT_START);){consumeChar("*")&&(star=count);let key=parseVariantKey(),value=parsePattern();if(null===value)throw new SyntaxError("Expected variant value");variants[count++]={key:key,value:value}}if(0===count)return null;if(void 0===star)throw new SyntaxError("Expected default variant");return{variants:variants,star:star}}();consumeToken(TOKEN_BRACE_CLOSE,SyntaxError);return{type:"select",selector:selector,...variants}}throw new SyntaxError("Unclosed placeable")}function parseInlineExpression(){if("{"===source[cursor])return parsePlaceable();if(test(RE_REFERENCE)){let[,sigil,name,attr=null]=match(RE_REFERENCE);if("$"===sigil)return{type:"var",name:name};if(consumeToken(TOKEN_PAREN_OPEN)){let args=function parseArguments(){let args=[];for(;;){switch(source[cursor]){case")":cursor++;return args;case void 0:throw new SyntaxError("Unclosed argument list")}args.push(parseArgument());consumeToken(TOKEN_COMMA)}}();if("-"===sigil)return{type:"term",name:name,attr:attr,args:args};if(RE_FUNCTION_NAME.test(name))return{type:"func",name:name,args:args};throw new SyntaxError("Function names must be all upper-case")}return"-"===sigil?{type:"term",name:name,attr:attr,args:[]}:{type:"mesg",name:name,attr:attr}}return parseLiteral()}function parseArgument(){let expr=parseInlineExpression();return"mesg"!==expr.type?expr:consumeToken(TOKEN_COLON)?{type:"narg",name:expr.name,value:parseLiteral()}:expr}function parseVariantKey(){consumeToken(TOKEN_BRACKET_OPEN,SyntaxError);let key;key=test(RE_NUMBER_LITERAL)?parseNumberLiteral():{type:"str",value:match1(RE_IDENTIFIER)};consumeToken(TOKEN_BRACKET_CLOSE,SyntaxError);return key}function parseLiteral(){if(test(RE_NUMBER_LITERAL))return parseNumberLiteral();if('"'===source[cursor])return function parseStringLiteral(){consumeChar('"',SyntaxError);let value="";for(;;){value+=match1(RE_STRING_RUN);if("\\"!==source[cursor]){if(consumeChar('"'))return{type:"str",value:value};throw new SyntaxError("Unclosed string literal")}value+=parseEscapeSequence()}}();throw new SyntaxError("Invalid expression")}function parseNumberLiteral(){let[,value,fraction=""]=match(RE_NUMBER_LITERAL),precision=fraction.length;return{type:"num",value:parseFloat(value),precision:precision}}function parseEscapeSequence(){if(test(RE_STRING_ESCAPE))return match1(RE_STRING_ESCAPE);if(test(RE_UNICODE_ESCAPE)){let[,codepoint4,codepoint6]=match(RE_UNICODE_ESCAPE),codepoint=parseInt(codepoint4||codepoint6,16);return codepoint<=55295||57344<=codepoint?String.fromCodePoint(codepoint):"�"}throw new SyntaxError("Unknown escape sequence")}function parseIndent(){let start=cursor;consumeToken(TOKEN_BLANK);switch(source[cursor]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return makeIndent(source.slice(start,cursor))}return" "===source[cursor-1]&&makeIndent(source.slice(start,cursor))}function trim(text,re){return text.replace(re,"")}function makeIndent(blank){let value=blank.replace(RE_BLANK_LINES,"\n"),length=RE_INDENT.exec(blank)[1].length;return new Indent(value,length)}}}class Indent{constructor(value,length){this.value=value;this.length=length}}},273:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{DOMLocalization:()=>DOMLocalization});const reOverlay=/<|&#?\w+;/,TEXT_LEVEL_ELEMENTS={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},LOCALIZABLE_ATTRIBUTES={"http://www.w3.org/1999/xhtml":{global:["title","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function translateElement(element,translation){const{value:value}=translation;if("string"==typeof value)if("title"===element.localName&&"http://www.w3.org/1999/xhtml"===element.namespaceURI)element.textContent=value;else if(reOverlay.test(value)){const templateElement=element.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");templateElement.innerHTML=value;!function overlayChildNodes(fromFragment,toElement){for(const childNode of fromFragment.childNodes)if(childNode.nodeType!==childNode.TEXT_NODE)if(childNode.hasAttribute("data-l10n-name")){const sanitized=getNodeForNamedElement(toElement,childNode);fromFragment.replaceChild(sanitized,childNode)}else if(isElementAllowed(childNode)){const sanitized=createSanitizedElement(childNode);fromFragment.replaceChild(sanitized,childNode)}else{console.warn(`An element of forbidden type "${childNode.localName}" was found in the translation. Only safe text-level elements and elements with data-l10n-name are allowed.`);fromFragment.replaceChild(createTextNodeFromTextContent(childNode),childNode)}toElement.textContent="";toElement.appendChild(fromFragment)}(templateElement.content,element)}else element.textContent=value;overlayAttributes(translation,element)}function hasAttribute(attributes,name){if(!attributes)return!1;for(let attr of attributes)if(attr.name===name)return!0;return!1}function overlayAttributes(fromElement,toElement){const explicitlyAllowed=toElement.hasAttribute("data-l10n-attrs")?toElement.getAttribute("data-l10n-attrs").split(",").map((i=>i.trim())):null;for(const attr of Array.from(toElement.attributes))isAttrNameLocalizable(attr.name,toElement,explicitlyAllowed)&&!hasAttribute(fromElement.attributes,attr.name)&&toElement.removeAttribute(attr.name);if(fromElement.attributes)for(const attr of Array.from(fromElement.attributes))isAttrNameLocalizable(attr.name,toElement,explicitlyAllowed)&&toElement.getAttribute(attr.name)!==attr.value&&toElement.setAttribute(attr.name,attr.value)}function getNodeForNamedElement(sourceElement,translatedChild){const childName=translatedChild.getAttribute("data-l10n-name"),sourceChild=sourceElement.querySelector(`[data-l10n-name="${childName}"]`);if(!sourceChild){console.warn(`An element named "${childName}" wasn't found in the source.`);return createTextNodeFromTextContent(translatedChild)}if(sourceChild.localName!==translatedChild.localName){console.warn(`An element named "${childName}" was found in the translation but its type ${translatedChild.localName} didn't match the element found in the source (${sourceChild.localName}).`);return createTextNodeFromTextContent(translatedChild)}sourceElement.removeChild(sourceChild);return shallowPopulateUsing(translatedChild,sourceChild.cloneNode(!1))}function createSanitizedElement(element){const clone=element.ownerDocument.createElement(element.localName);return shallowPopulateUsing(element,clone)}function createTextNodeFromTextContent(element){return element.ownerDocument.createTextNode(element.textContent)}function isElementAllowed(element){const allowed=TEXT_LEVEL_ELEMENTS[element.namespaceURI];return allowed&&allowed.includes(element.localName)}function isAttrNameLocalizable(name,element,explicitlyAllowed=null){if(explicitlyAllowed&&explicitlyAllowed.includes(name))return!0;const allowed=LOCALIZABLE_ATTRIBUTES[element.namespaceURI];if(!allowed)return!1;const attrName=name.toLowerCase(),elemName=element.localName;if(allowed.global.includes(attrName))return!0;if(!allowed[elemName])return!1;if(allowed[elemName].includes(attrName))return!0;if("http://www.w3.org/1999/xhtml"===element.namespaceURI&&"input"===elemName&&"value"===attrName){const type=element.type.toLowerCase();if("submit"===type||"button"===type||"reset"===type)return!0}return!1}function shallowPopulateUsing(fromElement,toElement){toElement.textContent=fromElement.textContent;overlayAttributes(fromElement,toElement);return toElement}class CachedIterable extends Array{static from(iterable){return iterable instanceof this?iterable:new this(iterable)}}Symbol.iterator;class CachedAsyncIterable extends CachedIterable{constructor(iterable){super();if(Symbol.asyncIterator in Object(iterable))this.iterator=iterable[Symbol.asyncIterator]();else{if(!(Symbol.iterator in Object(iterable)))throw new TypeError("Argument must implement the iteration protocol.");this.iterator=iterable[Symbol.iterator]()}}[Symbol.asyncIterator](){const cached=this;let cur=0;return{async next(){cached.length<=cur&&cached.push(cached.iterator.next());return cached[cur++]}}}async touchNext(count=1){let idx=0;for(;idx++<count;){const last=this[this.length-1];if(last&&(await last).done)break;this.push(this.iterator.next())}return this[this.length-1]}}class Localization{constructor(resourceIds=[],generateBundles){this.resourceIds=resourceIds;this.generateBundles=generateBundles;this.onChange(!0)}addResourceIds(resourceIds,eager=!1){this.resourceIds.push(...resourceIds);this.onChange(eager);return this.resourceIds.length}removeResourceIds(resourceIds){this.resourceIds=this.resourceIds.filter((r=>!resourceIds.includes(r)));this.onChange();return this.resourceIds.length}async formatWithFallback(keys,method){const translations=[];let hasAtLeastOneBundle=!1;for await(const bundle of this.bundles){hasAtLeastOneBundle=!0;const missingIds=keysFromBundle(method,bundle,keys,translations);if(0===missingIds.size)break;if("undefined"!=typeof console){const locale=bundle.locales[0],ids=Array.from(missingIds).join(", ");console.warn(`[fluent] Missing translations in ${locale}: ${ids}`)}}hasAtLeastOneBundle||"undefined"==typeof console||console.warn(`[fluent] Request for keys failed because no resource bundles got generated.\n  keys: ${JSON.stringify(keys)}.\n  resourceIds: ${JSON.stringify(this.resourceIds)}.`);return translations}formatMessages(keys){return this.formatWithFallback(keys,messageFromBundle)}formatValues(keys){return this.formatWithFallback(keys,valueFromBundle)}async formatValue(id,args){const[val]=await this.formatValues([{id:id,args:args}]);return val}handleEvent(){this.onChange()}onChange(eager=!1){this.bundles=CachedAsyncIterable.from(this.generateBundles(this.resourceIds));eager&&this.bundles.touchNext(2)}}function valueFromBundle(bundle,errors,message,args){return message.value?bundle.formatPattern(message.value,args,errors):null}function messageFromBundle(bundle,errors,message,args){const formatted={value:null,attributes:null};message.value&&(formatted.value=bundle.formatPattern(message.value,args,errors));let attrNames=Object.keys(message.attributes);if(attrNames.length>0){formatted.attributes=new Array(attrNames.length);for(let[i,name]of attrNames.entries()){let value=bundle.formatPattern(message.attributes[name],args,errors);formatted.attributes[i]={name:name,value:value}}}return formatted}function keysFromBundle(method,bundle,keys,translations){const messageErrors=[],missingIds=new Set;keys.forEach((({id:id,args:args},i)=>{if(void 0!==translations[i])return;let message=bundle.getMessage(id);if(message){messageErrors.length=0;translations[i]=method(bundle,messageErrors,message,args);if(messageErrors.length>0&&"undefined"!=typeof console){const locale=bundle.locales[0],errors=messageErrors.join(", ");console.warn(`[fluent][resolver] errors in ${locale}/${id}: ${errors}.`)}}else missingIds.add(id)}));return missingIds}class DOMLocalization extends Localization{constructor(resourceIds,generateBundles){super(resourceIds,generateBundles);this.roots=new Set;this.pendingrAF=null;this.pendingElements=new Set;this.windowElement=null;this.mutationObserver=null;this.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:["data-l10n-id","data-l10n-args"]}}onChange(eager=!1){super.onChange(eager);this.roots&&this.translateRoots()}setAttributes(element,id,args){element.setAttribute("data-l10n-id",id);args?element.setAttribute("data-l10n-args",JSON.stringify(args)):element.removeAttribute("data-l10n-args");return element}getAttributes(element){return{id:element.getAttribute("data-l10n-id"),args:JSON.parse(element.getAttribute("data-l10n-args")||null)}}connectRoot(newRoot){for(const root of this.roots)if(root===newRoot||root.contains(newRoot)||newRoot.contains(root))throw new Error("Cannot add a root that overlaps with existing root.");if(this.windowElement){if(this.windowElement!==newRoot.ownerDocument.defaultView)throw new Error("Cannot connect a root:\n          DOMLocalization already has a root from a different window.")}else{this.windowElement=newRoot.ownerDocument.defaultView;this.mutationObserver=new this.windowElement.MutationObserver((mutations=>this.translateMutations(mutations)))}this.roots.add(newRoot);this.mutationObserver.observe(newRoot,this.observerConfig)}disconnectRoot(root){this.roots.delete(root);this.pauseObserving();if(0===this.roots.size){this.mutationObserver=null;this.windowElement=null;this.pendingrAF=null;this.pendingElements.clear();return!0}this.resumeObserving();return!1}translateRoots(){const roots=Array.from(this.roots);return Promise.all(roots.map((root=>this.translateFragment(root))))}pauseObserving(){if(this.mutationObserver){this.translateMutations(this.mutationObserver.takeRecords());this.mutationObserver.disconnect()}}resumeObserving(){if(this.mutationObserver)for(const root of this.roots)this.mutationObserver.observe(root,this.observerConfig)}translateMutations(mutations){for(const mutation of mutations)switch(mutation.type){case"attributes":mutation.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(mutation.target);break;case"childList":for(const addedNode of mutation.addedNodes)if(addedNode.nodeType===addedNode.ELEMENT_NODE)if(addedNode.childElementCount)for(const element of this.getTranslatables(addedNode))this.pendingElements.add(element);else addedNode.hasAttribute("data-l10n-id")&&this.pendingElements.add(addedNode)}this.pendingElements.size>0&&null===this.pendingrAF&&(this.pendingrAF=this.windowElement.requestAnimationFrame((()=>{this.translateElements(Array.from(this.pendingElements));this.pendingElements.clear();this.pendingrAF=null})))}translateFragment(frag){return this.translateElements(this.getTranslatables(frag))}async translateElements(elements){if(!elements.length)return;const keys=elements.map(this.getKeysForElement),translations=await this.formatMessages(keys);return this.applyTranslations(elements,translations)}applyTranslations(elements,translations){this.pauseObserving();for(let i=0;i<elements.length;i++)void 0!==translations[i]&&translateElement(elements[i],translations[i]);this.resumeObserving()}getTranslatables(element){const nodes=Array.from(element.querySelectorAll("[data-l10n-id]"));"function"==typeof element.hasAttribute&&element.hasAttribute("data-l10n-id")&&nodes.push(element);return nodes}getKeysForElement(element){return{id:element.getAttribute("data-l10n-id"),args:JSON.parse(element.getAttribute("data-l10n-args")||null)}}}},283:(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.d(__webpack_exports__,{AnnotationEditorLayerBuilder:()=>AnnotationEditorLayerBuilder});var pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(603),web_null_l10n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(410),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__,web_null_l10n__WEBPACK_IMPORTED_MODULE_1__]);[pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__,web_null_l10n__WEBPACK_IMPORTED_MODULE_1__]=__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__;class AnnotationEditorLayerBuilder{#annotationLayer=null;#drawLayer=null;#onAppend=null;#textLayer=null;#uiManager;constructor(options){this.pdfPage=options.pdfPage;this.accessibilityManager=options.accessibilityManager;this.l10n=options.l10n;this.l10n||=new web_null_l10n__WEBPACK_IMPORTED_MODULE_1__.GenericL10n;this.annotationEditorLayer=null;this.div=null;this._cancelled=!1;this.#uiManager=options.uiManager;this.#annotationLayer=options.annotationLayer||null;this.#textLayer=options.textLayer||null;this.#drawLayer=options.drawLayer||null;this.#onAppend=options.onAppend||null}async render(viewport,intent="display"){if("display"!==intent)return;if(this._cancelled)return;const clonedViewport=viewport.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:clonedViewport});this.show();return}const div=this.div=document.createElement("div");div.className="annotationEditorLayer";div.hidden=!0;div.dir=this.#uiManager.direction;this.#onAppend?.(div);this.annotationEditorLayer=new pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorLayer({uiManager:this.#uiManager,div:div,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:clonedViewport,annotationLayer:this.#annotationLayer,textLayer:this.#textLayer,drawLayer:this.#drawLayer});const parameters={viewport:clonedViewport,div:div,annotations:null,intent:intent};this.annotationEditorLayer.render(parameters);this.show()}cancel(){this._cancelled=!0;this.div&&this.annotationEditorLayer.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){this.div&&!this.annotationEditorLayer.isInvisible&&(this.div.hidden=!1)}}__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))},707:(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.d(__webpack_exports__,{AnnotationLayerBuilder:()=>AnnotationLayerBuilder});var pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(603),_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(256),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__]);pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__=(__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__)[0];class AnnotationLayerBuilder{#onAppend=null;#eventAbortController=null;constructor({pdfPage:pdfPage,linkService:linkService,downloadManager:downloadManager,annotationStorage:annotationStorage=null,imageResourcesPath:imageResourcesPath="",renderForms:renderForms=!0,enableScripting:enableScripting=!1,hasJSActionsPromise:hasJSActionsPromise=null,fieldObjectsPromise:fieldObjectsPromise=null,annotationCanvasMap:annotationCanvasMap=null,accessibilityManager:accessibilityManager=null,annotationEditorUIManager:annotationEditorUIManager=null,onAppend:onAppend=null}){this.pdfPage=pdfPage;this.linkService=linkService;this.downloadManager=downloadManager;this.imageResourcesPath=imageResourcesPath;this.renderForms=renderForms;this.annotationStorage=annotationStorage;this.enableScripting=enableScripting;this._hasJSActionsPromise=hasJSActionsPromise||Promise.resolve(!1);this._fieldObjectsPromise=fieldObjectsPromise||Promise.resolve(null);this._annotationCanvasMap=annotationCanvasMap;this._accessibilityManager=accessibilityManager;this._annotationEditorUIManager=annotationEditorUIManager;this.#onAppend=onAppend;this.annotationLayer=null;this.div=null;this._cancelled=!1;this._eventBus=linkService.eventBus}async render(viewport,intent="display"){if(this.div){if(this._cancelled||!this.annotationLayer)return;this.annotationLayer.update({viewport:viewport.clone({dontFlip:!0})});return}const[annotations,hasJSActions,fieldObjects]=await Promise.all([this.pdfPage.getAnnotations({intent:intent}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;const div=this.div=document.createElement("div");div.className="annotationLayer";this.#onAppend?.(div);if(0!==annotations.length){this.annotationLayer=new pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationLayer({div:div,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,annotationEditorUIManager:this._annotationEditorUIManager,page:this.pdfPage,viewport:viewport.clone({dontFlip:!0})});await this.annotationLayer.render({annotations:annotations,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:hasJSActions,fieldObjects:fieldObjects});this.linkService.isInPresentationMode&&this.#updatePresentationModeState(_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.PresentationModeState.FULLSCREEN);if(!this.#eventAbortController){this.#eventAbortController=new AbortController;this._eventBus?._on("presentationmodechanged",(evt=>{this.#updatePresentationModeState(evt.state)}),{signal:this.#eventAbortController.signal})}}else this.hide()}cancel(){this._cancelled=!0;this.#eventAbortController?.abort();this.#eventAbortController=null}hide(){this.div&&(this.div.hidden=!0)}#updatePresentationModeState(state){if(!this.div)return;let disableFormElements=!1;switch(state){case _ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.PresentationModeState.FULLSCREEN:disableFormElements=!0;break;case _ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.PresentationModeState.NORMAL:break;default:return}for(const section of this.div.childNodes)section.hasAttribute("data-internal-link")||(section.inert=disableFormElements)}}__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))},840:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AppOptions:()=>AppOptions});{var compatibilityParams=Object.create(null);const userAgent=navigator.userAgent||"",platform=navigator.platform||"",maxTouchPoints=navigator.maxTouchPoints||1,isAndroid=/Android/.test(userAgent),isIOS=/\b(iPad|iPhone|iPod)(?=;)/.test(userAgent)||"MacIntel"===platform&&maxTouchPoints>1;!function checkCanvasSizeLimitation(){(isIOS||isAndroid)&&(compatibilityParams.maxCanvasPixels=5242880)}()}const OptionKind_BROWSER=1,OptionKind_VIEWER=2,OptionKind_API=4,OptionKind_WORKER=8,OptionKind_PREFERENCE=128,defaultOptions={canvasMaxAreaInBytes:{value:-1,kind:OptionKind_BROWSER+OptionKind_API},isInAutomation:{value:!1,kind:OptionKind_BROWSER},supportsCaretBrowsingMode:{value:!1,kind:OptionKind_BROWSER},supportsDocumentFonts:{value:!0,kind:OptionKind_BROWSER},supportsIntegratedFind:{value:!1,kind:OptionKind_BROWSER},supportsMouseWheelZoomCtrlKey:{value:!0,kind:OptionKind_BROWSER},supportsMouseWheelZoomMetaKey:{value:!0,kind:OptionKind_BROWSER},supportsPinchToZoom:{value:!0,kind:OptionKind_BROWSER},annotationEditorMode:{value:0,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},annotationMode:{value:2,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},cursorToolOnLoad:{value:0,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},debuggerSrc:{value:"./debugger.mjs",kind:OptionKind_VIEWER},defaultZoomDelay:{value:400,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},defaultZoomValue:{value:"",kind:OptionKind_VIEWER+OptionKind_PREFERENCE},disableHistory:{value:!1,kind:OptionKind_VIEWER},disablePageLabels:{value:!1,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},enableHighlightEditor:{value:!1,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},enableHighlightFloatingButton:{value:!1,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},enableML:{value:!1,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},enablePermissions:{value:!1,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},enablePrintAutoRotate:{value:!0,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},enableScripting:{value:!0,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},enableStampEditor:{value:!0,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:OptionKind_VIEWER},externalLinkTarget:{value:0,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},highlightEditorColors:{value:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",kind:OptionKind_VIEWER+OptionKind_PREFERENCE},historyUpdateUrl:{value:!1,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},ignoreDestinationZoom:{value:!1,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},imageResourcesPath:{value:"./images/",kind:OptionKind_VIEWER},maxCanvasPixels:{value:2**25,kind:OptionKind_VIEWER},forcePageColors:{value:!1,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},pageColorsBackground:{value:"Canvas",kind:OptionKind_VIEWER+OptionKind_PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:OptionKind_VIEWER+OptionKind_PREFERENCE},pdfBugEnabled:{value:!1,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},printResolution:{value:150,kind:OptionKind_VIEWER},sidebarViewOnLoad:{value:-1,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},scrollModeOnLoad:{value:-1,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},spreadModeOnLoad:{value:-1,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},textLayerMode:{value:1,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},viewOnLoad:{value:0,kind:OptionKind_VIEWER+OptionKind_PREFERENCE},cMapPacked:{value:!0,kind:OptionKind_API},cMapUrl:{value:"../web/cmaps/",kind:OptionKind_API},disableAutoFetch:{value:!1,kind:OptionKind_API+OptionKind_PREFERENCE},disableFontFace:{value:!1,kind:OptionKind_API+OptionKind_PREFERENCE},disableRange:{value:!1,kind:OptionKind_API+OptionKind_PREFERENCE},disableStream:{value:!1,kind:OptionKind_API+OptionKind_PREFERENCE},docBaseUrl:{value:"",kind:OptionKind_API},enableXfa:{value:!0,kind:OptionKind_API+OptionKind_PREFERENCE},fontExtraProperties:{value:!1,kind:OptionKind_API},isEvalSupported:{value:!0,kind:OptionKind_API},isOffscreenCanvasSupported:{value:!0,kind:OptionKind_API},maxImageSize:{value:-1,kind:OptionKind_API},pdfBug:{value:!1,kind:OptionKind_API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:OptionKind_API},verbosity:{value:1,kind:OptionKind_API},workerPort:{value:null,kind:OptionKind_WORKER},workerSrc:{value:"../build/pdf.worker.mjs",kind:OptionKind_WORKER}};defaultOptions.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:OptionKind_VIEWER};defaultOptions.sandboxBundleSrc={value:"../build/pdf.sandbox.mjs",kind:OptionKind_VIEWER};defaultOptions.viewerCssTheme={value:0,kind:OptionKind_VIEWER+OptionKind_PREFERENCE};defaultOptions.disablePreferences={value:!1,kind:OptionKind_VIEWER};defaultOptions.locale={value:navigator.language||"en-US",kind:OptionKind_VIEWER};const userOptions=Object.create(null);for(const name in compatibilityParams)userOptions[name]=compatibilityParams[name];class AppOptions{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(name){return userOptions[name]??defaultOptions[name]?.value??void 0}static getAll(kind=null,defaultOnly=!1){const options=Object.create(null);for(const name in defaultOptions){const defaultOption=defaultOptions[name];(!kind||kind&defaultOption.kind)&&(options[name]=defaultOnly?defaultOption.value:userOptions[name]??defaultOption.value)}return options}static set(name,value){userOptions[name]=value}static setAll(options,init=!1){if(init){if(this.get("disablePreferences"))return;for(const name in userOptions)if(void 0===compatibilityParams[name]){console.warn('setAll: The Preferences may override manually set AppOptions; please use the "disablePreferences"-option in order to prevent that.');break}}for(const name in options)userOptions[name]=options[name]}static remove(name){delete userOptions[name];const val=compatibilityParams[name];void 0!==val&&(userOptions[name]=val)}}},544:(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.d(__webpack_exports__,{DownloadManager:()=>DownloadManager});var pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(603),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__]);pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__=(__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__)[0];function download(blobUrl,filename){const a=document.createElement("a");if(!a.click)throw new Error('DownloadManager: "a.click()" is not supported.');a.href=blobUrl;a.target="_parent";"download"in a&&(a.download=filename);(document.body||document.documentElement).append(a);a.click();a.remove()}class DownloadManager{#openBlobUrls=new WeakMap;downloadUrl(url,filename,_options){(0,pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.createValidAbsoluteUrl)(url,"http://example.com")?download(url+"#pdfjs.action=download",filename):console.error(`downloadUrl - not a valid URL: ${url}`)}downloadData(data,filename,contentType){download(URL.createObjectURL(new Blob([data],{type:contentType})),filename)}openOrDownloadData(data,filename,dest=null){const contentType=(0,pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.isPdfFile)(filename)?"application/pdf":"";this.downloadData(data,filename,contentType);return!1}download(blob,url,filename,_options){download(URL.createObjectURL(blob),filename)}}__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))},88:(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.d(__webpack_exports__,{DrawLayerBuilder:()=>DrawLayerBuilder});var pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(603),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__]);pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__=(__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__)[0];class DrawLayerBuilder{#drawLayer=null;constructor(options){this.pageIndex=options.pageIndex}async render(intent="display"){"display"!==intent||this.#drawLayer||this._cancelled||(this.#drawLayer=new pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.DrawLayer({pageIndex:this.pageIndex}))}cancel(){this._cancelled=!0;if(this.#drawLayer){this.#drawLayer.destroy();this.#drawLayer=null}}setParent(parent){this.#drawLayer?.setParent(parent)}getDrawLayer(){return this.#drawLayer}}__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))},656:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{EventBus:()=>EventBus,waitOnEventOrTimeout:()=>waitOnEventOrTimeout});const WaitOnType={EVENT:"event",TIMEOUT:"timeout"};async function waitOnEventOrTimeout({target:target,name:name,delay:delay=0}){if("object"!=typeof target||!name||"string"!=typeof name||!(Number.isInteger(delay)&&delay>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");const{promise:promise,resolve:resolve}=Promise.withResolvers(),ac=new AbortController;function handler(type){ac.abort();clearTimeout(timeout);resolve(type)}target[target instanceof EventBus?"_on":"addEventListener"](name,handler.bind(null,WaitOnType.EVENT),{signal:ac.signal});const timeout=setTimeout(handler.bind(null,WaitOnType.TIMEOUT),delay);return promise}class EventBus{#listeners=Object.create(null);on(eventName,listener,options=null){this._on(eventName,listener,{external:!0,once:options?.once,signal:options?.signal})}off(eventName,listener,options=null){this._off(eventName,listener)}dispatch(eventName,data){const eventListeners=this.#listeners[eventName];if(!eventListeners||0===eventListeners.length)return;let externalListeners;for(const{listener:listener,external:external,once:once}of eventListeners.slice(0)){once&&this._off(eventName,listener);external?(externalListeners||=[]).push(listener):listener(data)}if(externalListeners){for(const listener of externalListeners)listener(data);externalListeners=null}}_on(eventName,listener,options=null){let rmAbort=null;if(options?.signal instanceof AbortSignal){const{signal:signal}=options;if(signal.aborted){console.error("Cannot use an `aborted` signal.");return}const onAbort=()=>this._off(eventName,listener);rmAbort=()=>signal.removeEventListener("abort",onAbort);signal.addEventListener("abort",onAbort)}(this.#listeners[eventName]||=[]).push({listener:listener,external:!0===options?.external,once:!0===options?.once,rmAbort:rmAbort})}_off(eventName,listener,options=null){const eventListeners=this.#listeners[eventName];if(eventListeners)for(let i=0,ii=eventListeners.length;i<ii;i++){const evt=eventListeners[i];if(evt.listener===listener){evt.rmAbort?.();eventListeners.splice(i,1);return}}}}},289:(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.d(__webpack_exports__,{GenericScripting:()=>GenericScripting,docProperties:()=>docProperties});var pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(603),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__]);pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__=(__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__)[0];async function docProperties(pdfDocument){const baseUrl="".split("#",1)[0];let{info:info,metadata:metadata,contentDispositionFilename:contentDispositionFilename,contentLength:contentLength}=await pdfDocument.getMetadata();if(!contentLength){const{length:length}=await pdfDocument.getDownloadInfo();contentLength=length}return{...info,baseURL:baseUrl,filesize:contentLength,filename:contentDispositionFilename||(0,pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.getPdfFilenameFromUrl)(""),metadata:metadata?.getRaw(),authors:metadata?.get("dc:creator"),numPages:pdfDocument.numPages,URL:""}}class GenericScripting{constructor(sandboxBundleSrc){this._ready=new Promise(((resolve,reject)=>{import(sandboxBundleSrc).then((pdfjsSandbox=>{resolve(pdfjsSandbox.QuickJSSandbox())})).catch(reject)}))}async createSandbox(data){(await this._ready).create(data)}async dispatchEventInSandbox(event){const sandbox=await this._ready;setTimeout((()=>sandbox.dispatchEvent(event)),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))},410:(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.d(__webpack_exports__,{GenericL10n:()=>GenericL10n});var fluent_bundle__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(588),fluent_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(273),pdfjs_lib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(603),_l10n_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(693),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([pdfjs_lib__WEBPACK_IMPORTED_MODULE_2__]);pdfjs_lib__WEBPACK_IMPORTED_MODULE_2__=(__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__)[0];function createBundle(lang,text){const resource=new fluent_bundle__WEBPACK_IMPORTED_MODULE_0__.FluentResource(text),bundle=new fluent_bundle__WEBPACK_IMPORTED_MODULE_0__.FluentBundle(lang),errors=bundle.addResource(resource);errors.length&&console.error("L10n errors",errors);return bundle}class GenericL10n extends _l10n_js__WEBPACK_IMPORTED_MODULE_3__.L10n{constructor(lang){super({lang:lang});const generateBundles=lang?GenericL10n.#generateBundles.bind(GenericL10n,"en-us",this.getLanguage()):GenericL10n.#generateBundlesFallback.bind(GenericL10n,this.getLanguage());this._setL10n(new fluent_dom__WEBPACK_IMPORTED_MODULE_1__.DOMLocalization([],generateBundles))}static async*#generateBundles(defaultLang,baseLang){const{baseURL:baseURL,paths:paths}=await this.#getPaths(),langs=[baseLang];if(defaultLang!==baseLang){const shortLang=baseLang.split("-",1)[0];shortLang!==baseLang&&langs.push(shortLang);langs.push(defaultLang)}for(const lang of langs){const bundle=await this.#createBundle(lang,baseURL,paths);bundle&&(yield bundle);"en-us"===lang&&(yield this.#createBundleFallback(lang))}}static async#createBundle(lang,baseURL,paths){const path=paths[lang];if(!path)return null;const url=new URL(path,baseURL);return createBundle(lang,await(0,pdfjs_lib__WEBPACK_IMPORTED_MODULE_2__.fetchData)(url,"text"))}static async#getPaths(){try{const{href:href}=document.querySelector('link[type="application/l10n"]'),paths=await(0,pdfjs_lib__WEBPACK_IMPORTED_MODULE_2__.fetchData)(href,"json");return{baseURL:href.replace(/[^/]*$/,"")||"./",paths:paths}}catch{}return{baseURL:"./",paths:Object.create(null)}}static async*#generateBundlesFallback(lang){yield this.#createBundleFallback(lang)}static async#createBundleFallback(lang){return createBundle(lang,"pdfjs-previous-button =\n    .title = Previous Page\npdfjs-previous-button-label = Previous\npdfjs-next-button =\n    .title = Next Page\npdfjs-next-button-label = Next\npdfjs-page-input =\n    .title = Page\npdfjs-of-pages = of { $pagesCount }\npdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })\npdfjs-zoom-out-button =\n    .title = Zoom Out\npdfjs-zoom-out-button-label = Zoom Out\npdfjs-zoom-in-button =\n    .title = Zoom In\npdfjs-zoom-in-button-label = Zoom In\npdfjs-zoom-select =\n    .title = Zoom\npdfjs-presentation-mode-button =\n    .title = Switch to Presentation Mode\npdfjs-presentation-mode-button-label = Presentation Mode\npdfjs-open-file-button =\n    .title = Open File\npdfjs-open-file-button-label = Open\npdfjs-print-button =\n    .title = Print\npdfjs-print-button-label = Print\npdfjs-save-button =\n    .title = Save\npdfjs-save-button-label = Save\npdfjs-download-button =\n    .title = Download\npdfjs-download-button-label = Download\npdfjs-bookmark-button =\n    .title = Current Page (View URL from Current Page)\npdfjs-bookmark-button-label = Current Page\npdfjs-tools-button =\n    .title = Tools\npdfjs-tools-button-label = Tools\npdfjs-first-page-button =\n    .title = Go to First Page\npdfjs-first-page-button-label = Go to First Page\npdfjs-last-page-button =\n    .title = Go to Last Page\npdfjs-last-page-button-label = Go to Last Page\npdfjs-page-rotate-cw-button =\n    .title = Rotate Clockwise\npdfjs-page-rotate-cw-button-label = Rotate Clockwise\npdfjs-page-rotate-ccw-button =\n    .title = Rotate Counterclockwise\npdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise\npdfjs-cursor-text-select-tool-button =\n    .title = Enable Text Selection Tool\npdfjs-cursor-text-select-tool-button-label = Text Selection Tool\npdfjs-cursor-hand-tool-button =\n    .title = Enable Hand Tool\npdfjs-cursor-hand-tool-button-label = Hand Tool\npdfjs-scroll-page-button =\n    .title = Use Page Scrolling\npdfjs-scroll-page-button-label = Page Scrolling\npdfjs-scroll-vertical-button =\n    .title = Use Vertical Scrolling\npdfjs-scroll-vertical-button-label = Vertical Scrolling\npdfjs-scroll-horizontal-button =\n    .title = Use Horizontal Scrolling\npdfjs-scroll-horizontal-button-label = Horizontal Scrolling\npdfjs-scroll-wrapped-button =\n    .title = Use Wrapped Scrolling\npdfjs-scroll-wrapped-button-label = Wrapped Scrolling\npdfjs-spread-none-button =\n    .title = Do not join page spreads\npdfjs-spread-none-button-label = No Spreads\npdfjs-spread-odd-button =\n    .title = Join page spreads starting with odd-numbered pages\npdfjs-spread-odd-button-label = Odd Spreads\npdfjs-spread-even-button =\n    .title = Join page spreads starting with even-numbered pages\npdfjs-spread-even-button-label = Even Spreads\npdfjs-document-properties-button =\n    .title = Document Properties…\npdfjs-document-properties-button-label = Document Properties…\npdfjs-document-properties-file-name = File name:\npdfjs-document-properties-file-size = File size:\npdfjs-document-properties-kb = { $size_kb } KB ({ $size_b } bytes)\npdfjs-document-properties-mb = { $size_mb } MB ({ $size_b } bytes)\npdfjs-document-properties-title = Title:\npdfjs-document-properties-author = Author:\npdfjs-document-properties-subject = Subject:\npdfjs-document-properties-keywords = Keywords:\npdfjs-document-properties-creation-date = Creation Date:\npdfjs-document-properties-modification-date = Modification Date:\npdfjs-document-properties-date-string = { $date }, { $time }\npdfjs-document-properties-creator = Creator:\npdfjs-document-properties-producer = PDF Producer:\npdfjs-document-properties-version = PDF Version:\npdfjs-document-properties-page-count = Page Count:\npdfjs-document-properties-page-size = Page Size:\npdfjs-document-properties-page-size-unit-inches = in\npdfjs-document-properties-page-size-unit-millimeters = mm\npdfjs-document-properties-page-size-orientation-portrait = portrait\npdfjs-document-properties-page-size-orientation-landscape = landscape\npdfjs-document-properties-page-size-name-a-three = A3\npdfjs-document-properties-page-size-name-a-four = A4\npdfjs-document-properties-page-size-name-letter = Letter\npdfjs-document-properties-page-size-name-legal = Legal\npdfjs-document-properties-page-size-dimension-string = { $width } × { $height } { $unit } ({ $orientation })\npdfjs-document-properties-page-size-dimension-name-string = { $width } × { $height } { $unit } ({ $name }, { $orientation })\npdfjs-document-properties-linearized = Fast Web View:\npdfjs-document-properties-linearized-yes = Yes\npdfjs-document-properties-linearized-no = No\npdfjs-document-properties-close-button = Close\npdfjs-print-progress-message = Preparing document for printing…\npdfjs-print-progress-percent = { $progress }%\npdfjs-print-progress-close-button = Cancel\npdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.\npdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.\npdfjs-toggle-sidebar-button =\n    .title = Toggle Sidebar\npdfjs-toggle-sidebar-notification-button =\n    .title = Toggle Sidebar (document contains outline/attachments/layers)\npdfjs-toggle-sidebar-button-label = Toggle Sidebar\npdfjs-document-outline-button =\n    .title = Show Document Outline (double-click to expand/collapse all items)\npdfjs-document-outline-button-label = Document Outline\npdfjs-attachments-button =\n    .title = Show Attachments\npdfjs-attachments-button-label = Attachments\npdfjs-layers-button =\n    .title = Show Layers (double-click to reset all layers to the default state)\npdfjs-layers-button-label = Layers\npdfjs-thumbs-button =\n    .title = Show Thumbnails\npdfjs-thumbs-button-label = Thumbnails\npdfjs-current-outline-item-button =\n    .title = Find Current Outline Item\npdfjs-current-outline-item-button-label = Current Outline Item\npdfjs-findbar-button =\n    .title = Find in Document\npdfjs-findbar-button-label = Find\npdfjs-additional-layers = Additional Layers\npdfjs-thumb-page-title =\n    .title = Page { $page }\npdfjs-thumb-page-canvas =\n    .aria-label = Thumbnail of Page { $page }\npdfjs-find-input =\n    .title = Find\n    .placeholder = Find in document…\npdfjs-find-previous-button =\n    .title = Find the previous occurrence of the phrase\npdfjs-find-previous-button-label = Previous\npdfjs-find-next-button =\n    .title = Find the next occurrence of the phrase\npdfjs-find-next-button-label = Next\npdfjs-find-highlight-checkbox = Highlight All\npdfjs-find-match-case-checkbox-label = Match Case\npdfjs-find-match-diacritics-checkbox-label = Match Diacritics\npdfjs-find-entire-word-checkbox-label = Whole Words\npdfjs-find-reached-top = Reached top of document, continued from bottom\npdfjs-find-reached-bottom = Reached end of document, continued from top\npdfjs-find-match-count =\n    { $total ->\n        [one] { $current } of { $total } match\n       *[other] { $current } of { $total } matches\n    }\npdfjs-find-match-count-limit =\n    { $limit ->\n        [one] More than { $limit } match\n       *[other] More than { $limit } matches\n    }\npdfjs-find-not-found = Phrase not found\npdfjs-page-scale-width = Page Width\npdfjs-page-scale-fit = Page Fit\npdfjs-page-scale-auto = Automatic Zoom\npdfjs-page-scale-actual = Actual Size\npdfjs-page-scale-percent = { $scale }%\npdfjs-page-landmark =\n    .aria-label = Page { $page }\npdfjs-loading-error = An error occurred while loading the PDF.\npdfjs-invalid-file-error = Invalid or corrupted PDF file.\npdfjs-missing-file-error = Missing PDF file.\npdfjs-unexpected-response-error = Unexpected server response.\npdfjs-rendering-error = An error occurred while rendering the page.\npdfjs-annotation-date-string = { $date }, { $time }\npdfjs-text-annotation-type =\n    .alt = [{ $type } Annotation]\npdfjs-password-label = Enter the password to open this PDF file.\npdfjs-password-invalid = Invalid password. Please try again.\npdfjs-password-ok-button = OK\npdfjs-password-cancel-button = Cancel\npdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.\npdfjs-editor-free-text-button =\n    .title = Text\npdfjs-editor-free-text-button-label = Text\npdfjs-editor-ink-button =\n    .title = Draw\npdfjs-editor-ink-button-label = Draw\npdfjs-editor-stamp-button =\n    .title = Add or edit images\npdfjs-editor-stamp-button-label = Add or edit images\npdfjs-editor-highlight-button =\n    .title = Highlight\npdfjs-editor-highlight-button-label = Highlight\npdfjs-highlight-floating-button1 =\n    .title = Highlight\n    .aria-label = Highlight\npdfjs-highlight-floating-button-label = Highlight\npdfjs-editor-remove-ink-button =\n    .title = Remove drawing\npdfjs-editor-remove-freetext-button =\n    .title = Remove text\npdfjs-editor-remove-stamp-button =\n    .title = Remove image\npdfjs-editor-remove-highlight-button =\n    .title = Remove highlight\npdfjs-editor-free-text-color-input = Color\npdfjs-editor-free-text-size-input = Size\npdfjs-editor-ink-color-input = Color\npdfjs-editor-ink-thickness-input = Thickness\npdfjs-editor-ink-opacity-input = Opacity\npdfjs-editor-stamp-add-image-button =\n    .title = Add image\npdfjs-editor-stamp-add-image-button-label = Add image\npdfjs-editor-free-highlight-thickness-input = Thickness\npdfjs-editor-free-highlight-thickness-title =\n    .title = Change thickness when highlighting items other than text\npdfjs-free-text =\n    .aria-label = Text Editor\npdfjs-free-text-default-content = Start typing…\npdfjs-ink =\n    .aria-label = Draw Editor\npdfjs-ink-canvas =\n    .aria-label = User-created image\npdfjs-editor-alt-text-button-label = Alt text\npdfjs-editor-alt-text-edit-button-label = Edit alt text\npdfjs-editor-alt-text-dialog-label = Choose an option\npdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can’t see the image or when it doesn’t load.\npdfjs-editor-alt-text-add-description-label = Add a description\npdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.\npdfjs-editor-alt-text-mark-decorative-label = Mark as decorative\npdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.\npdfjs-editor-alt-text-cancel-button = Cancel\npdfjs-editor-alt-text-save-button = Save\npdfjs-editor-alt-text-decorative-tooltip = Marked as decorative\npdfjs-editor-alt-text-textarea =\n    .placeholder = For example, “A young man sits down at a table to eat a meal”\npdfjs-editor-resizer-label-top-left = Top left corner — resize\npdfjs-editor-resizer-label-top-middle = Top middle — resize\npdfjs-editor-resizer-label-top-right = Top right corner — resize\npdfjs-editor-resizer-label-middle-right = Middle right — resize\npdfjs-editor-resizer-label-bottom-right = Bottom right corner — resize\npdfjs-editor-resizer-label-bottom-middle = Bottom middle — resize\npdfjs-editor-resizer-label-bottom-left = Bottom left corner — resize\npdfjs-editor-resizer-label-middle-left = Middle left — resize\npdfjs-editor-highlight-colorpicker-label = Highlight color\npdfjs-editor-colorpicker-button =\n    .title = Change color\npdfjs-editor-colorpicker-dropdown =\n    .aria-label = Color choices\npdfjs-editor-colorpicker-yellow =\n    .title = Yellow\npdfjs-editor-colorpicker-green =\n    .title = Green\npdfjs-editor-colorpicker-blue =\n    .title = Blue\npdfjs-editor-colorpicker-pink =\n    .title = Pink\npdfjs-editor-colorpicker-red =\n    .title = Red\npdfjs-editor-highlight-show-all-button-label = Show all\npdfjs-editor-highlight-show-all-button =\n    .title = Show all")}}__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))},693:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L10n:()=>L10n});class L10n{#dir;#lang;#l10n;constructor({lang:lang,isRTL:isRTL},l10n=null){this.#lang=L10n.#fixupLangCode(lang);this.#l10n=l10n;this.#dir=isRTL??L10n.#isRTL(this.#lang)?"rtl":"ltr"}_setL10n(l10n){this.#l10n=l10n}getLanguage(){return this.#lang}getDirection(){return this.#dir}async get(ids,args=null,fallback){if(Array.isArray(ids)){ids=ids.map((id=>({id:id})));return(await this.#l10n.formatMessages(ids)).map((message=>message.value))}const messages=await this.#l10n.formatMessages([{id:ids,args:args}]);return messages?.[0].value||fallback}async translate(element){try{this.#l10n.connectRoot(element);await this.#l10n.translateRoots()}catch{}}pause(){this.#l10n.pauseObserving()}resume(){this.#l10n.resumeObserving()}static#fixupLangCode(langCode){return{en:"en-us",es:"es-es",fy:"fy-nl",ga:"ga-ie",gu:"gu-in",hi:"hi-in",hy:"hy-am",nb:"nb-no",ne:"ne-np",nn:"nn-no",pa:"pa-in",pt:"pt-pt",sv:"sv-se",zh:"zh-cn"}[langCode=langCode?.toLowerCase()||"en-us"]||langCode}static#isRTL(lang){const shortCode=lang.split("-",1)[0];return["ar","he","fa","ps","ur"].includes(shortCode)}}},814:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FindState:()=>FindState,PDFFindController:()=>PDFFindController});var ui_utils=__webpack_require__(256);const CharacterType_SPACE=0,CharacterType_ALPHA_LETTER=1,CharacterType_PUNCT=2,CharacterType_HAN_LETTER=3,CharacterType_KATAKANA_LETTER=4,CharacterType_HIRAGANA_LETTER=5,CharacterType_HALFWIDTH_KATAKANA_LETTER=6,CharacterType_THAI_LETTER=7;function getCharacterType(charCode){return function isAlphabeticalScript(charCode){return charCode<11904}(charCode)?function isAscii(charCode){return!(65408&charCode)}(charCode)?function isAsciiSpace(charCode){return 32===charCode||9===charCode||13===charCode||10===charCode}(charCode)?CharacterType_SPACE:function isAsciiAlpha(charCode){return charCode>=97&&charCode<=122||charCode>=65&&charCode<=90}(charCode)||function isAsciiDigit(charCode){return charCode>=48&&charCode<=57}(charCode)||95===charCode?CharacterType_ALPHA_LETTER:CharacterType_PUNCT:function isThai(charCode){return 3584==(65408&charCode)}(charCode)?CharacterType_THAI_LETTER:160===charCode?CharacterType_SPACE:CharacterType_ALPHA_LETTER:function isHan(charCode){return charCode>=13312&&charCode<=40959||charCode>=63744&&charCode<=64255}(charCode)?CharacterType_HAN_LETTER:function isKatakana(charCode){return charCode>=12448&&charCode<=12543}(charCode)?CharacterType_KATAKANA_LETTER:function isHiragana(charCode){return charCode>=12352&&charCode<=12447}(charCode)?CharacterType_HIRAGANA_LETTER:function isHalfwidthKatakana(charCode){return charCode>=65376&&charCode<=65439}(charCode)?CharacterType_HALFWIDTH_KATAKANA_LETTER:CharacterType_ALPHA_LETTER}let NormalizeWithNFKC;const FindState={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},CHARACTERS_TO_NORMALIZE={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},DIACRITICS_EXCEPTION=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let DIACRITICS_EXCEPTION_STR;const DIACRITICS_REG_EXP=/\p{M}+/gu,SPECIAL_CHARS_REG_EXP=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,NOT_DIACRITIC_FROM_END_REG_EXP=/([^\p{M}])\p{M}*$/u,NOT_DIACRITIC_FROM_START_REG_EXP=/^\p{M}*([^\p{M}])/u,SYLLABLES_REG_EXP=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,SYLLABLES_LENGTHS=new Map,NFKC_CHARS_TO_NORMALIZE=new Map;let noSyllablesRegExp=null,withSyllablesRegExp=null;function normalize(text){const syllablePositions=[];let m,normalizationRegex;for(;null!==(m=SYLLABLES_REG_EXP.exec(text));){let{index:index}=m;for(const char of m[0]){let len=SYLLABLES_LENGTHS.get(char);if(!len){len=char.normalize("NFD").length;SYLLABLES_LENGTHS.set(char,len)}syllablePositions.push([len,index++])}}if(0===syllablePositions.length&&noSyllablesRegExp)normalizationRegex=noSyllablesRegExp;else if(syllablePositions.length>0&&withSyllablesRegExp)normalizationRegex=withSyllablesRegExp;else{const regexp=`([${Object.keys(CHARACTERS_TO_NORMALIZE).join("")}])|([${function getNormalizeWithNFKC(){NormalizeWithNFKC||=" ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦";return NormalizeWithNFKC}()}])|(${"(?:゙|゚)"}\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(${"(?:\\p{Ideographic}|[぀-ヿ])"}\\n)|(\\n)`;normalizationRegex=0===syllablePositions.length?noSyllablesRegExp=new RegExp(regexp+"|(\\u0000)","gum"):withSyllablesRegExp=new RegExp(regexp+"|([\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f])","gum")}const rawDiacriticsPositions=[];for(;null!==(m=DIACRITICS_REG_EXP.exec(text));)rawDiacriticsPositions.push([m[0].length,m.index]);let normalized=text.normalize("NFD");const positions=[[0,0]];let rawDiacriticsIndex=0,syllableIndex=0,shift=0,shiftOrigin=0,eol=0,hasDiacritics=!1;normalized=normalized.replace(normalizationRegex,((match,p1,p2,p3,p4,p5,p6,p7,p8,i)=>{i-=shiftOrigin;if(p1){const replacement=CHARACTERS_TO_NORMALIZE[p1],jj=replacement.length;for(let j=1;j<jj;j++)positions.push([i-shift+j,shift-j]);shift-=jj-1;return replacement}if(p2){let replacement=NFKC_CHARS_TO_NORMALIZE.get(p2);if(!replacement){replacement=p2.normalize("NFKC");NFKC_CHARS_TO_NORMALIZE.set(p2,replacement)}const jj=replacement.length;for(let j=1;j<jj;j++)positions.push([i-shift+j,shift-j]);shift-=jj-1;return replacement}if(p3){hasDiacritics=!0;if(i+eol===rawDiacriticsPositions[rawDiacriticsIndex]?.[1])++rawDiacriticsIndex;else{positions.push([i-1-shift+1,shift-1]);shift-=1;shiftOrigin+=1}positions.push([i-shift+1,shift]);shiftOrigin+=1;eol+=1;return p3.charAt(0)}if(p4){const hasTrailingDashEOL=p4.endsWith("\n"),len=hasTrailingDashEOL?p4.length-2:p4.length;hasDiacritics=!0;let jj=len;if(i+eol===rawDiacriticsPositions[rawDiacriticsIndex]?.[1]){jj-=rawDiacriticsPositions[rawDiacriticsIndex][0];++rawDiacriticsIndex}for(let j=1;j<=jj;j++)positions.push([i-1-shift+j,shift-j]);shift-=jj;shiftOrigin+=jj;if(hasTrailingDashEOL){i+=len-1;positions.push([i-shift+1,1+shift]);shift+=1;shiftOrigin+=1;eol+=1;return p4.slice(0,len)}return p4}if(p5){const len=p5.length-2;positions.push([i-shift+len,1+shift]);shift+=1;shiftOrigin+=1;eol+=1;return p5.slice(0,-2)}if(p6){const len=p6.length-1;positions.push([i-shift+len,shift]);shiftOrigin+=1;eol+=1;return p6.slice(0,-1)}if(p7){positions.push([i-shift+1,shift-1]);shift-=1;shiftOrigin+=1;eol+=1;return" "}if(i+eol===syllablePositions[syllableIndex]?.[1]){const newCharLen=syllablePositions[syllableIndex][0]-1;++syllableIndex;for(let j=1;j<=newCharLen;j++)positions.push([i-(shift-j),shift-j]);shift-=newCharLen;shiftOrigin+=newCharLen}return p8}));positions.push([normalized.length,shift]);return[normalized,positions,hasDiacritics]}function getOriginalIndex(diffs,pos,len){if(!diffs)return[pos,len];const start=pos,end=pos+len-1;let i=(0,ui_utils.binarySearchFirstItem)(diffs,(x=>x[0]>=start));diffs[i][0]>start&&--i;let j=(0,ui_utils.binarySearchFirstItem)(diffs,(x=>x[0]>=end),i);diffs[j][0]>end&&--j;const oldStart=start+diffs[i][1];return[oldStart,end+diffs[j][1]+1-oldStart]}class PDFFindController{#state=null;#updateMatchesCountOnProgress=!0;#visitedPagesCount=0;constructor({linkService:linkService,eventBus:eventBus,updateMatchesCountOnProgress:updateMatchesCountOnProgress=!0}){this._linkService=linkService;this._eventBus=eventBus;this.#updateMatchesCountOnProgress=updateMatchesCountOnProgress;this.onIsPageVisible=null;this.#reset();eventBus._on("find",this.#onFind.bind(this));eventBus._on("findbarclose",this.#onFindBarClose.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this.#state}setDocument(pdfDocument){this._pdfDocument&&this.#reset();if(pdfDocument){this._pdfDocument=pdfDocument;this._firstPageCapability.resolve()}}#onFind(state){if(!state)return;const pdfDocument=this._pdfDocument,{type:type}=state;(null===this.#state||this.#shouldDirtyMatch(state))&&(this._dirtyMatch=!0);this.#state=state;"highlightallchange"!==type&&this.#updateUIState(FindState.PENDING);this._firstPageCapability.promise.then((()=>{if(!this._pdfDocument||pdfDocument&&this._pdfDocument!==pdfDocument)return;this.#extractText();const findbarClosed=!this._highlightMatches,pendingTimeout=!!this._findTimeout;if(this._findTimeout){clearTimeout(this._findTimeout);this._findTimeout=null}if(type)if(this._dirtyMatch)this.#nextMatch();else if("again"===type){this.#nextMatch();findbarClosed&&this.#state.highlightAll&&this.#updateAllPages()}else if("highlightallchange"===type){pendingTimeout?this.#nextMatch():this._highlightMatches=!0;this.#updateAllPages()}else this.#nextMatch();else this._findTimeout=setTimeout((()=>{this.#nextMatch();this._findTimeout=null}),250)}))}scrollMatchIntoView({element:element=null,selectedLeft:selectedLeft=0,pageIndex:pageIndex=-1,matchIndex:matchIndex=-1}){if(!this._scrollMatches||!element)return;if(-1===matchIndex||matchIndex!==this._selected.matchIdx)return;if(-1===pageIndex||pageIndex!==this._selected.pageIdx)return;this._scrollMatches=!1;const spot={top:-50,left:selectedLeft+-400};(0,ui_utils.scrollIntoView)(element,spot,!0)}#reset(){this._highlightMatches=!1;this._scrollMatches=!1;this._pdfDocument=null;this._pageMatches=[];this._pageMatchesLength=[];this.#visitedPagesCount=0;this.#state=null;this._selected={pageIdx:-1,matchIdx:-1};this._offset={pageIdx:null,matchIdx:null,wrapped:!1};this._extractTextPromises=[];this._pageContents=[];this._pageDiffs=[];this._hasDiacritics=[];this._matchesCountTotal=0;this._pagesToSearch=null;this._pendingFindMatches=new Set;this._resumePageIdx=null;this._dirtyMatch=!1;clearTimeout(this._findTimeout);this._findTimeout=null;this._firstPageCapability=Promise.withResolvers()}get#query(){const{query:query}=this.#state;if("string"==typeof query){if(query!==this._rawQuery){this._rawQuery=query;[this._normalizedQuery]=normalize(query)}return this._normalizedQuery}return(query||[]).filter((q=>!!q)).map((q=>normalize(q)[0]))}#shouldDirtyMatch(state){const newQuery=state.query,prevQuery=this.#state.query,newType=typeof newQuery;if(newType!==typeof prevQuery)return!0;if("string"===newType){if(newQuery!==prevQuery)return!0}else if(JSON.stringify(newQuery)!==JSON.stringify(prevQuery))return!0;switch(state.type){case"again":const pageNumber=this._selected.pageIdx+1,linkService=this._linkService;return pageNumber>=1&&pageNumber<=linkService.pagesCount&&pageNumber!==linkService.page&&!(this.onIsPageVisible?.(pageNumber)??1);case"highlightallchange":return!1}return!0}#isEntireWord(content,startIdx,length){let match=content.slice(0,startIdx).match(NOT_DIACRITIC_FROM_END_REG_EXP);if(match){const first=content.charCodeAt(startIdx),limit=match[1].charCodeAt(0);if(getCharacterType(first)===getCharacterType(limit))return!1}match=content.slice(startIdx+length).match(NOT_DIACRITIC_FROM_START_REG_EXP);if(match){const last=content.charCodeAt(startIdx+length-1),limit=match[1].charCodeAt(0);if(getCharacterType(last)===getCharacterType(limit))return!1}return!0}#calculateRegExpMatch(query,entireWord,pageIndex,pageContent){const matches=this._pageMatches[pageIndex]=[],matchesLength=this._pageMatchesLength[pageIndex]=[];if(!query)return;const diffs=this._pageDiffs[pageIndex];let match;for(;null!==(match=query.exec(pageContent));){if(entireWord&&!this.#isEntireWord(pageContent,match.index,match[0].length))continue;const[matchPos,matchLen]=getOriginalIndex(diffs,match.index,match[0].length);if(matchLen){matches.push(matchPos);matchesLength.push(matchLen)}}}#convertToRegExpString(query,hasDiacritics){const{matchDiacritics:matchDiacritics}=this.#state;let isUnicode=!1;(query=query.replaceAll(SPECIAL_CHARS_REG_EXP,((match,p1,p2,p3,p4,p5)=>{if(p1)return`[ ]*\\${p1}[ ]*`;if(p2)return`[ ]*${p2}[ ]*`;if(p3)return"[ ]+";if(matchDiacritics)return p4||p5;if(p4)return DIACRITICS_EXCEPTION.has(p4.charCodeAt(0))?p4:"";if(hasDiacritics){isUnicode=!0;return`${p5}\\p{M}*`}return p5}))).endsWith("[ ]*")&&(query=query.slice(0,query.length-4));if(matchDiacritics&&hasDiacritics){DIACRITICS_EXCEPTION_STR||=String.fromCharCode(...DIACRITICS_EXCEPTION);isUnicode=!0;query=`${query}(?=[${DIACRITICS_EXCEPTION_STR}]|[^\\p{M}]|$)`}return[isUnicode,query]}#calculateMatch(pageIndex){let query=this.#query;if(0===query.length)return;const{caseSensitive:caseSensitive,entireWord:entireWord}=this.#state,pageContent=this._pageContents[pageIndex],hasDiacritics=this._hasDiacritics[pageIndex];let isUnicode=!1;"string"==typeof query?[isUnicode,query]=this.#convertToRegExpString(query,hasDiacritics):query=query.sort().reverse().map((q=>{const[isUnicodePart,queryPart]=this.#convertToRegExpString(q,hasDiacritics);isUnicode||=isUnicodePart;return`(${queryPart})`})).join("|");query=query?new RegExp(query,`g${isUnicode?"u":""}${caseSensitive?"":"i"}`):null;this.#calculateRegExpMatch(query,entireWord,pageIndex,pageContent);this.#state.highlightAll&&this.#updatePage(pageIndex);if(this._resumePageIdx===pageIndex){this._resumePageIdx=null;this.#nextPageMatch()}const pageMatchesCount=this._pageMatches[pageIndex].length;this._matchesCountTotal+=pageMatchesCount;this.#updateMatchesCountOnProgress?pageMatchesCount>0&&this.#updateUIResultsCount():++this.#visitedPagesCount===this._linkService.pagesCount&&this.#updateUIResultsCount()}#extractText(){if(this._extractTextPromises.length>0)return;let deferred=Promise.resolve();const textOptions={disableNormalization:!0};for(let i=0,ii=this._linkService.pagesCount;i<ii;i++){const{promise:promise,resolve:resolve}=Promise.withResolvers();this._extractTextPromises[i]=promise;deferred=deferred.then((()=>this._pdfDocument.getPage(i+1).then((pdfPage=>pdfPage.getTextContent(textOptions))).then((textContent=>{const strBuf=[];for(const textItem of textContent.items){strBuf.push(textItem.str);textItem.hasEOL&&strBuf.push("\n")}[this._pageContents[i],this._pageDiffs[i],this._hasDiacritics[i]]=normalize(strBuf.join(""));resolve()}),(reason=>{console.error(`Unable to get text content for page ${i+1}`,reason);this._pageContents[i]="";this._pageDiffs[i]=null;this._hasDiacritics[i]=!1;resolve()}))))}}#updatePage(index){this._scrollMatches&&this._selected.pageIdx===index&&(this._linkService.page=index+1);this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:index})}#updateAllPages(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#nextMatch(){const previous=this.#state.findPrevious,currentPageIndex=this._linkService.page-1,numPages=this._linkService.pagesCount;this._highlightMatches=!0;if(this._dirtyMatch){this._dirtyMatch=!1;this._selected.pageIdx=this._selected.matchIdx=-1;this._offset.pageIdx=currentPageIndex;this._offset.matchIdx=null;this._offset.wrapped=!1;this._resumePageIdx=null;this._pageMatches.length=0;this._pageMatchesLength.length=0;this.#visitedPagesCount=0;this._matchesCountTotal=0;this.#updateAllPages();for(let i=0;i<numPages;i++)if(!this._pendingFindMatches.has(i)){this._pendingFindMatches.add(i);this._extractTextPromises[i].then((()=>{this._pendingFindMatches.delete(i);this.#calculateMatch(i)}))}}if(0===this.#query.length){this.#updateUIState(FindState.FOUND);return}if(this._resumePageIdx)return;const offset=this._offset;this._pagesToSearch=numPages;if(null!==offset.matchIdx){const numPageMatches=this._pageMatches[offset.pageIdx].length;if(!previous&&offset.matchIdx+1<numPageMatches||previous&&offset.matchIdx>0){offset.matchIdx=previous?offset.matchIdx-1:offset.matchIdx+1;this.#updateMatch(!0);return}this.#advanceOffsetPage(previous)}this.#nextPageMatch()}#matchesReady(matches){const offset=this._offset,numMatches=matches.length,previous=this.#state.findPrevious;if(numMatches){offset.matchIdx=previous?numMatches-1:0;this.#updateMatch(!0);return!0}this.#advanceOffsetPage(previous);if(offset.wrapped){offset.matchIdx=null;if(this._pagesToSearch<0){this.#updateMatch(!1);return!0}}return!1}#nextPageMatch(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let matches=null;do{const pageIdx=this._offset.pageIdx;matches=this._pageMatches[pageIdx];if(!matches){this._resumePageIdx=pageIdx;break}}while(!this.#matchesReady(matches))}#advanceOffsetPage(previous){const offset=this._offset,numPages=this._linkService.pagesCount;offset.pageIdx=previous?offset.pageIdx-1:offset.pageIdx+1;offset.matchIdx=null;this._pagesToSearch--;if(offset.pageIdx>=numPages||offset.pageIdx<0){offset.pageIdx=previous?numPages-1:0;offset.wrapped=!0}}#updateMatch(found=!1){let state=FindState.NOT_FOUND;const wrapped=this._offset.wrapped;this._offset.wrapped=!1;if(found){const previousPage=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx;this._selected.matchIdx=this._offset.matchIdx;state=wrapped?FindState.WRAPPED:FindState.FOUND;-1!==previousPage&&previousPage!==this._selected.pageIdx&&this.#updatePage(previousPage)}this.#updateUIState(state,this.#state.findPrevious);if(-1!==this._selected.pageIdx){this._scrollMatches=!0;this.#updatePage(this._selected.pageIdx)}}#onFindBarClose(evt){const pdfDocument=this._pdfDocument;this._firstPageCapability.promise.then((()=>{if(this._pdfDocument&&(!pdfDocument||this._pdfDocument===pdfDocument)){if(this._findTimeout){clearTimeout(this._findTimeout);this._findTimeout=null}if(this._resumePageIdx){this._resumePageIdx=null;this._dirtyMatch=!0}this.#updateUIState(FindState.FOUND);this._highlightMatches=!1;this.#updateAllPages()}}))}#requestMatchesCount(){const{pageIdx:pageIdx,matchIdx:matchIdx}=this._selected;let current=0,total=this._matchesCountTotal;if(-1!==matchIdx){for(let i=0;i<pageIdx;i++)current+=this._pageMatches[i]?.length||0;current+=matchIdx+1}(current<1||current>total)&&(current=total=0);return{current:current,total:total}}#updateUIResultsCount(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#requestMatchesCount()})}#updateUIState(state,previous=!1){(this.#updateMatchesCountOnProgress||this.#visitedPagesCount===this._linkService.pagesCount&&state!==FindState.PENDING)&&this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:state,previous:previous,matchesCount:this.#requestMatchesCount(),rawQuery:this.#state?.query??null})}}},543:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{PDFHistory:()=>PDFHistory});var _ui_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(256),_event_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(656);function getCurrentHash(){return document.location.hash}class PDFHistory{#eventAbortController=null;constructor({linkService:linkService,eventBus:eventBus}){this.linkService=linkService;this.eventBus=eventBus;this._initialized=!1;this._fingerprint="";this.reset();this.eventBus._on("pagesinit",(()=>{this._isPagesLoaded=!1;this.eventBus._on("pagesloaded",(evt=>{this._isPagesLoaded=!!evt.pagesCount}),{once:!0})}))}initialize({fingerprint:fingerprint,resetHistory:resetHistory=!1,updateUrl:updateUrl=!1}){if(!fingerprint||"string"!=typeof fingerprint){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const reInitialized=""!==this._fingerprint&&this._fingerprint!==fingerprint;this._fingerprint=fingerprint;this._updateUrl=!0===updateUrl;this._initialized=!0;this.#bindEvents();const state=window.history.state;this._popStateInProgress=!1;this._blockHashChange=0;this._currentHash=getCurrentHash();this._numPositionUpdates=0;this._uid=this._maxUid=0;this._destination=null;this._position=null;if(!this.#isValidState(state,!0)||resetHistory){const{hash:hash,page:page,rotation:rotation}=this.#parseCurrentHash(!0);if(!hash||reInitialized||resetHistory){this.#pushOrReplaceState(null,!0);return}this.#pushOrReplaceState({hash:hash,page:page,rotation:rotation},!0);return}const destination=state.destination;this.#updateInternalState(destination,state.uid,!0);void 0!==destination.rotation&&(this._initialRotation=destination.rotation);if(destination.dest){this._initialBookmark=JSON.stringify(destination.dest);this._destination.page=null}else destination.hash?this._initialBookmark=destination.hash:destination.page&&(this._initialBookmark=`page=${destination.page}`)}reset(){if(this._initialized){this.#pageHide();this._initialized=!1;this.#unbindEvents()}if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}this._initialBookmark=null;this._initialRotation=null}push({namedDest:namedDest=null,explicitDest:explicitDest,pageNumber:pageNumber}){if(!this._initialized)return;if(namedDest&&"string"!=typeof namedDest){console.error(`PDFHistory.push: "${namedDest}" is not a valid namedDest parameter.`);return}if(!Array.isArray(explicitDest)){console.error(`PDFHistory.push: "${explicitDest}" is not a valid explicitDest parameter.`);return}if(!this.#isValidPage(pageNumber)&&(null!==pageNumber||this._destination)){console.error(`PDFHistory.push: "${pageNumber}" is not a valid pageNumber parameter.`);return}const hash=namedDest||JSON.stringify(explicitDest);if(!hash)return;let forceReplace=!1;if(this._destination&&(function isDestHashesEqual(destHash,pushHash){if("string"!=typeof destHash||"string"!=typeof pushHash)return!1;if(destHash===pushHash)return!0;if((0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_0__.parseQueryString)(destHash).get("nameddest")===pushHash)return!0;return!1}(this._destination.hash,hash)||function isDestArraysEqual(firstDest,secondDest){function isEntryEqual(first,second){if(typeof first!=typeof second)return!1;if(Array.isArray(first)||Array.isArray(second))return!1;if(null!==first&&"object"==typeof first&&null!==second){if(Object.keys(first).length!==Object.keys(second).length)return!1;for(const key in first)if(!isEntryEqual(first[key],second[key]))return!1;return!0}return first===second||Number.isNaN(first)&&Number.isNaN(second)}if(!Array.isArray(firstDest)||!Array.isArray(secondDest))return!1;if(firstDest.length!==secondDest.length)return!1;for(let i=0,ii=firstDest.length;i<ii;i++)if(!isEntryEqual(firstDest[i],secondDest[i]))return!1;return!0}(this._destination.dest,explicitDest))){if(this._destination.page)return;forceReplace=!0}if(!this._popStateInProgress||forceReplace){this.#pushOrReplaceState({dest:explicitDest,hash:hash,page:pageNumber,rotation:this.linkService.rotation},forceReplace);if(!this._popStateInProgress){this._popStateInProgress=!0;Promise.resolve().then((()=>{this._popStateInProgress=!1}))}}}pushPage(pageNumber){if(this._initialized)if(this.#isValidPage(pageNumber)){if(this._destination?.page!==pageNumber&&!this._popStateInProgress){this.#pushOrReplaceState({dest:null,hash:`page=${pageNumber}`,page:pageNumber,rotation:this.linkService.rotation});if(!this._popStateInProgress){this._popStateInProgress=!0;Promise.resolve().then((()=>{this._popStateInProgress=!1}))}}}else console.error(`PDFHistory.pushPage: "${pageNumber}" is not a valid page number.`)}pushCurrentPosition(){this._initialized&&!this._popStateInProgress&&this.#tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const state=window.history.state;this.#isValidState(state)&&state.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const state=window.history.state;this.#isValidState(state)&&state.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}#pushOrReplaceState(destination,forceReplace=!1){const shouldReplace=forceReplace||!this._destination,newState={fingerprint:this._fingerprint,uid:shouldReplace?this._uid:this._uid+1,destination:destination};this.#updateInternalState(destination,newState.uid);let newUrl;if(this._updateUrl&&destination?.hash){const baseUrl=document.location.href.split("#",1)[0];baseUrl.startsWith("file://")||(newUrl=`${baseUrl}#${destination.hash}`)}shouldReplace?window.history.replaceState(newState,"",newUrl):window.history.pushState(newState,"",newUrl)}#tryPushCurrentPosition(temporary=!1){if(!this._position)return;let position=this._position;if(temporary){position=Object.assign(Object.create(null),this._position);position.temporary=!0}if(!this._destination){this.#pushOrReplaceState(position);return}if(this._destination.temporary){this.#pushOrReplaceState(position,!0);return}if(this._destination.hash===position.hash)return;if(!this._destination.page&&this._numPositionUpdates<=50)return;let forceReplace=!1;if(this._destination.page>=position.first&&this._destination.page<=position.page){if(void 0!==this._destination.dest||!this._destination.first)return;forceReplace=!0}this.#pushOrReplaceState(position,forceReplace)}#isValidPage(val){return Number.isInteger(val)&&val>0&&val<=this.linkService.pagesCount}#isValidState(state,checkReload=!1){if(!state)return!1;if(state.fingerprint!==this._fingerprint){if(!checkReload)return!1;{if("string"!=typeof state.fingerprint||state.fingerprint.length!==this._fingerprint.length)return!1;const[perfEntry]=performance.getEntriesByType("navigation");if("reload"!==perfEntry?.type)return!1}}return!(!Number.isInteger(state.uid)||state.uid<0)&&(null!==state.destination&&"object"==typeof state.destination)}#updateInternalState(destination,uid,removeTemporary=!1){if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}removeTemporary&&destination?.temporary&&delete destination.temporary;this._destination=destination;this._uid=uid;this._maxUid=Math.max(this._maxUid,uid);this._numPositionUpdates=0}#parseCurrentHash(checkNameddest=!1){const hash=unescape(getCurrentHash()).substring(1),params=(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_0__.parseQueryString)(hash),nameddest=params.get("nameddest")||"";let page=0|params.get("page");(!this.#isValidPage(page)||checkNameddest&&nameddest.length>0)&&(page=null);return{hash:hash,page:page,rotation:this.linkService.rotation}}#updateViewarea({location:location}){if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}this._position={hash:location.pdfOpenParams.substring(1),page:this.linkService.page,first:location.pageNumber,rotation:location.rotation};if(!this._popStateInProgress){this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++;this._updateViewareaTimeout=setTimeout((()=>{this._popStateInProgress||this.#tryPushCurrentPosition(!0);this._updateViewareaTimeout=null}),1e3)}}#popState({state:state}){const newHash=getCurrentHash(),hashChanged=this._currentHash!==newHash;this._currentHash=newHash;if(!state){this._uid++;const{hash:hash,page:page,rotation:rotation}=this.#parseCurrentHash();this.#pushOrReplaceState({hash:hash,page:page,rotation:rotation},!0);return}if(!this.#isValidState(state))return;this._popStateInProgress=!0;if(hashChanged){this._blockHashChange++;(0,_event_utils_js__WEBPACK_IMPORTED_MODULE_1__.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then((()=>{this._blockHashChange--}))}const destination=state.destination;this.#updateInternalState(destination,state.uid,!0);(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_0__.isValidRotation)(destination.rotation)&&(this.linkService.rotation=destination.rotation);destination.dest?this.linkService.goToDestination(destination.dest):destination.hash?this.linkService.setHash(destination.hash):destination.page&&(this.linkService.page=destination.page);Promise.resolve().then((()=>{this._popStateInProgress=!1}))}#pageHide(){this._destination&&!this._destination.temporary||this.#tryPushCurrentPosition()}#bindEvents(){if(this.#eventAbortController)return;this.#eventAbortController=new AbortController;const{signal:signal}=this.#eventAbortController;this.eventBus._on("updateviewarea",this.#updateViewarea.bind(this),{signal:signal});window.addEventListener("popstate",this.#popState.bind(this),{signal:signal});window.addEventListener("pagehide",this.#pageHide.bind(this),{signal:signal})}#unbindEvents(){this.#eventAbortController?.abort();this.#eventAbortController=null}}},787:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{LinkTarget:()=>LinkTarget,PDFLinkService:()=>PDFLinkService,SimpleLinkService:()=>SimpleLinkService});var _ui_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(256);const LinkTarget={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};class PDFLinkService{externalLinkEnabled=!0;constructor({eventBus:eventBus,externalLinkTarget:externalLinkTarget=null,externalLinkRel:externalLinkRel=null,ignoreDestinationZoom:ignoreDestinationZoom=!1}={}){this.eventBus=eventBus;this.externalLinkTarget=externalLinkTarget;this.externalLinkRel=externalLinkRel;this._ignoreDestinationZoom=ignoreDestinationZoom;this.baseUrl=null;this.pdfDocument=null;this.pdfViewer=null;this.pdfHistory=null}setDocument(pdfDocument,baseUrl=null){this.baseUrl=baseUrl;this.pdfDocument=pdfDocument}setViewer(pdfViewer){this.pdfViewer=pdfViewer}setHistory(pdfHistory){this.pdfHistory=pdfHistory}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfDocument?this.pdfViewer.currentPageNumber:1}set page(value){this.pdfDocument&&(this.pdfViewer.currentPageNumber=value)}get rotation(){return this.pdfDocument?this.pdfViewer.pagesRotation:0}set rotation(value){this.pdfDocument&&(this.pdfViewer.pagesRotation=value)}get isInPresentationMode(){return!!this.pdfDocument&&this.pdfViewer.isInPresentationMode}async goToDestination(dest){if(!this.pdfDocument)return;let namedDest,explicitDest,pageNumber;if("string"==typeof dest){namedDest=dest;explicitDest=await this.pdfDocument.getDestination(dest)}else{namedDest=null;explicitDest=await dest}if(!Array.isArray(explicitDest)){console.error(`goToDestination: "${explicitDest}" is not a valid destination array, for dest="${dest}".`);return}const[destRef]=explicitDest;if(destRef&&"object"==typeof destRef){pageNumber=this.pdfDocument.cachedPageNumber(destRef);if(!pageNumber)try{pageNumber=await this.pdfDocument.getPageIndex(destRef)+1}catch{console.error(`goToDestination: "${destRef}" is not a valid page reference, for dest="${dest}".`);return}}else Number.isInteger(destRef)&&(pageNumber=destRef+1);if(!pageNumber||pageNumber<1||pageNumber>this.pagesCount)console.error(`goToDestination: "${pageNumber}" is not a valid page number, for dest="${dest}".`);else{if(this.pdfHistory){this.pdfHistory.pushCurrentPosition();this.pdfHistory.push({namedDest:namedDest,explicitDest:explicitDest,pageNumber:pageNumber})}this.pdfViewer.scrollPageIntoView({pageNumber:pageNumber,destArray:explicitDest,ignoreDestinationZoom:this._ignoreDestinationZoom})}}goToPage(val){if(!this.pdfDocument)return;const pageNumber="string"==typeof val&&this.pdfViewer.pageLabelToPageNumber(val)||0|val;if(Number.isInteger(pageNumber)&&pageNumber>0&&pageNumber<=this.pagesCount){if(this.pdfHistory){this.pdfHistory.pushCurrentPosition();this.pdfHistory.pushPage(pageNumber)}this.pdfViewer.scrollPageIntoView({pageNumber:pageNumber})}else console.error(`PDFLinkService.goToPage: "${val}" is not a valid page.`)}addLinkAttributes(link,url,newWindow=!1){if(!url||"string"!=typeof url)throw new Error('A valid "url" parameter must provided.');const target=newWindow?LinkTarget.BLANK:this.externalLinkTarget,rel=this.externalLinkRel;if(this.externalLinkEnabled)link.href=link.title=url;else{link.href="";link.title=`Disabled: ${url}`;link.onclick=()=>!1}let targetStr="";switch(target){case LinkTarget.NONE:break;case LinkTarget.SELF:targetStr="_self";break;case LinkTarget.BLANK:targetStr="_blank";break;case LinkTarget.PARENT:targetStr="_parent";break;case LinkTarget.TOP:targetStr="_top"}link.target=targetStr;link.rel="string"==typeof rel?rel:"noopener noreferrer nofollow"}getDestinationHash(dest){if("string"==typeof dest){if(dest.length>0)return this.getAnchorUrl("#"+escape(dest))}else if(Array.isArray(dest)){const str=JSON.stringify(dest);if(str.length>0)return this.getAnchorUrl("#"+escape(str))}return this.getAnchorUrl("")}getAnchorUrl(anchor){return this.baseUrl?this.baseUrl+anchor:anchor}setHash(hash){if(!this.pdfDocument)return;let pageNumber,dest;if(hash.includes("=")){const params=(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_0__.parseQueryString)(hash);if(params.has("search")){const query=params.get("search").replaceAll('"',""),phrase="true"===params.get("phrase");this.eventBus.dispatch("findfromurlhash",{source:this,query:phrase?query:query.match(/\S+/g)})}params.has("page")&&(pageNumber=0|params.get("page")||1);if(params.has("zoom")){const zoomArgs=params.get("zoom").split(","),zoomArg=zoomArgs[0],zoomArgNumber=parseFloat(zoomArg);zoomArg.includes("Fit")?"Fit"===zoomArg||"FitB"===zoomArg?dest=[null,{name:zoomArg}]:"FitH"===zoomArg||"FitBH"===zoomArg||"FitV"===zoomArg||"FitBV"===zoomArg?dest=[null,{name:zoomArg},zoomArgs.length>1?0|zoomArgs[1]:null]:"FitR"===zoomArg?5!==zoomArgs.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):dest=[null,{name:zoomArg},0|zoomArgs[1],0|zoomArgs[2],0|zoomArgs[3],0|zoomArgs[4]]:console.error(`PDFLinkService.setHash: "${zoomArg}" is not a valid zoom value.`):dest=[null,{name:"XYZ"},zoomArgs.length>1?0|zoomArgs[1]:null,zoomArgs.length>2?0|zoomArgs[2]:null,zoomArgNumber?zoomArgNumber/100:zoomArg]}dest?this.pdfViewer.scrollPageIntoView({pageNumber:pageNumber||this.page,destArray:dest,allowNegativeOffset:!0}):pageNumber&&(this.page=pageNumber);params.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:params.get("pagemode")});params.has("nameddest")&&this.goToDestination(params.get("nameddest"))}else{dest=unescape(hash);try{dest=JSON.parse(dest);Array.isArray(dest)||(dest=dest.toString())}catch{}"string"==typeof dest||PDFLinkService.#isValidExplicitDest(dest)?this.goToDestination(dest):console.error(`PDFLinkService.setHash: "${unescape(hash)}" is not a valid destination.`)}}executeNamedAction(action){if(this.pdfDocument){switch(action){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:action})}}async executeSetOCGState(action){if(!this.pdfDocument)return;const pdfDocument=this.pdfDocument,optionalContentConfig=await this.pdfViewer.optionalContentConfigPromise;if(pdfDocument===this.pdfDocument){optionalContentConfig.setOCGState(action);this.pdfViewer.optionalContentConfigPromise=Promise.resolve(optionalContentConfig)}}static#isValidExplicitDest(dest){if(!Array.isArray(dest)||dest.length<2)return!1;const[page,zoom,...args]=dest;if(!("object"==typeof page&&Number.isInteger(page?.num)&&Number.isInteger(page?.gen)||Number.isInteger(page)))return!1;if("object"!=typeof zoom||"string"!=typeof zoom?.name)return!1;let allowNull=!0;switch(zoom.name){case"XYZ":if(3!==args.length)return!1;break;case"Fit":case"FitB":return 0===args.length;case"FitH":case"FitBH":case"FitV":case"FitBV":if(1!==args.length)return!1;break;case"FitR":if(4!==args.length)return!1;allowNull=!1;break;default:return!1}for(const arg of args)if(!("number"==typeof arg||allowNull&&null===arg))return!1;return!0}}class SimpleLinkService extends PDFLinkService{setDocument(pdfDocument,baseUrl=null){}}},966:(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.d(__webpack_exports__,{PDFPageView:()=>PDFPageView});var pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(603),_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(256),_annotation_editor_layer_builder_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(283),_annotation_layer_builder_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(707),_app_options_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(840),_draw_layer_builder_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(88),web_null_l10n__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(410),_pdf_link_service_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(787),_struct_tree_layer_builder_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(698),_text_accessibility_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(860),_text_highlighter_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(27),_text_layer_builder_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(765),_xfa_layer_builder_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(973),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__,_annotation_editor_layer_builder_js__WEBPACK_IMPORTED_MODULE_2__,_annotation_layer_builder_js__WEBPACK_IMPORTED_MODULE_3__,_draw_layer_builder_js__WEBPACK_IMPORTED_MODULE_5__,web_null_l10n__WEBPACK_IMPORTED_MODULE_6__,_text_layer_builder_js__WEBPACK_IMPORTED_MODULE_10__,_xfa_layer_builder_js__WEBPACK_IMPORTED_MODULE_11__]);[pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__,_annotation_editor_layer_builder_js__WEBPACK_IMPORTED_MODULE_2__,_annotation_layer_builder_js__WEBPACK_IMPORTED_MODULE_3__,_draw_layer_builder_js__WEBPACK_IMPORTED_MODULE_5__,web_null_l10n__WEBPACK_IMPORTED_MODULE_6__,_text_layer_builder_js__WEBPACK_IMPORTED_MODULE_10__,_xfa_layer_builder_js__WEBPACK_IMPORTED_MODULE_11__]=__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__;const DEFAULT_LAYER_PROPERTIES={annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new _pdf_link_service_js__WEBPACK_IMPORTED_MODULE_7__.SimpleLinkService}},LAYERS_ORDER=new Map([["canvasWrapper",0],["textLayer",1],["annotationLayer",2],["annotationEditorLayer",3],["xfaLayer",3]]);class PDFPageView{#annotationMode=pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE_FORMS;#hasRestrictedScaling=!1;#layerProperties=null;#loadingId=null;#previousRotation=null;#renderError=null;#renderingState=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.INITIAL;#textLayerMode=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.TextLayerMode.ENABLE;#useThumbnailCanvas={directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0};#viewportMap=new WeakMap;#layers=[null,null,null,null];constructor(options){const container=options.container,defaultViewport=options.defaultViewport;this.id=options.id;this.renderingId="page"+this.id;this.#layerProperties=options.layerProperties||DEFAULT_LAYER_PROPERTIES;this.pdfPage=null;this.pageLabel=null;this.rotation=0;this.scale=options.scale||_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_SCALE;this.viewport=defaultViewport;this.pdfPageRotate=defaultViewport.rotation;this._optionalContentConfigPromise=options.optionalContentConfigPromise||null;this.#textLayerMode=options.textLayerMode??_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.TextLayerMode.ENABLE;this.#annotationMode=options.annotationMode??pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE_FORMS;this.imageResourcesPath=options.imageResourcesPath||"";this.maxCanvasPixels=options.maxCanvasPixels??_app_options_js__WEBPACK_IMPORTED_MODULE_4__.AppOptions.get("maxCanvasPixels");this.pageColors=options.pageColors||null;this.eventBus=options.eventBus;this.renderingQueue=options.renderingQueue;this.l10n=options.l10n;this.l10n||=new web_null_l10n__WEBPACK_IMPORTED_MODULE_6__.GenericL10n;this.renderTask=null;this.resume=null;this._isStandalone=!this.renderingQueue?.hasViewer();this._container=container;this._annotationCanvasMap=null;this.annotationLayer=null;this.annotationEditorLayer=null;this.textLayer=null;this.zoomLayer=null;this.xfaLayer=null;this.structTreeLayer=null;this.drawLayer=null;const div=document.createElement("div");div.className="page";div.setAttribute("data-page-number",this.id);div.setAttribute("role","region");div.setAttribute("data-l10n-id","pdfjs-page-landmark");div.setAttribute("data-l10n-args",JSON.stringify({page:this.id}));this.div=div;this.#setDimensions();container?.append(div);if(this._isStandalone){container?.style.setProperty("--scale-factor",this.scale*pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:optionalContentConfigPromise}=options;optionalContentConfigPromise&&optionalContentConfigPromise.then((optionalContentConfig=>{optionalContentConfigPromise===this._optionalContentConfigPromise&&(this.#useThumbnailCanvas.initialOptionalContent=optionalContentConfig.hasInitialVisibility)}));options.l10n||this.l10n.translate(this.div)}}#addLayer(div,name){const pos=LAYERS_ORDER.get(name),oldDiv=this.#layers[pos];this.#layers[pos]=div;if(oldDiv)oldDiv.replaceWith(div);else{for(let i=pos-1;i>=0;i--){const layer=this.#layers[i];if(layer){layer.after(div);return}}this.div.prepend(div)}}get renderingState(){return this.#renderingState}set renderingState(state){if(state!==this.#renderingState){this.#renderingState=state;if(this.#loadingId){clearTimeout(this.#loadingId);this.#loadingId=null}switch(state){case _ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case _ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.RUNNING:this.div.classList.add("loadingIcon");this.#loadingId=setTimeout((()=>{this.div.classList.add("loading");this.#loadingId=null}),0);break;case _ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.INITIAL:case _ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading")}}}#setDimensions(){const{viewport:viewport}=this;if(this.pdfPage){if(this.#previousRotation===viewport.rotation)return;this.#previousRotation=viewport.rotation}(0,pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.setLayerDimensions)(this.div,viewport,!0,!1)}setPdfPage(pdfPage){if(this._isStandalone&&("CanvasText"===this.pageColors?.foreground||"Canvas"===this.pageColors?.background)){this._container?.style.setProperty("--hcm-highlight-filter",pdfPage.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight"));this._container?.style.setProperty("--hcm-highlight-selected-filter",pdfPage.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","Highlight"))}this.pdfPage=pdfPage;this.pdfPageRotate=pdfPage.rotate;const totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=pdfPage.getViewport({scale:this.scale*pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:totalRotation});this.#setDimensions();this.reset()}destroy(){this.reset();this.pdfPage?.cleanup()}get _textHighlighter(){return(0,pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,"_textHighlighter",new _text_highlighter_js__WEBPACK_IMPORTED_MODULE_12__.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:this.#layerProperties.findController}))}async#renderAnnotationLayer(){let error=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(ex){console.error(`#renderAnnotationLayer: "${ex}".`);error=ex}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:error})}}async#renderAnnotationEditorLayer(){let error=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(ex){console.error(`#renderAnnotationEditorLayer: "${ex}".`);error=ex}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:error})}}async#renderDrawLayer(){try{await this.drawLayer.render("display")}catch(ex){console.error(`#renderDrawLayer: "${ex}".`)}}async#renderXfaLayer(){let error=null;try{const result=await this.xfaLayer.render(this.viewport,"display");result?.textDivs&&this._textHighlighter&&this.#buildXfaTextContentItems(result.textDivs)}catch(ex){console.error(`#renderXfaLayer: "${ex}".`);error=ex}finally{if(this.xfaLayer?.div){this.l10n.pause();this.#addLayer(this.xfaLayer.div,"xfaLayer");this.l10n.resume()}this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:error})}}async#renderTextLayer(){const{pdfPage:pdfPage,textLayer:textLayer,viewport:viewport}=this;if(!textLayer)return;let error=null;try{if(!textLayer.renderingDone){const readableStream=pdfPage.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});textLayer.setTextContentSource(readableStream)}await textLayer.render(viewport)}catch(ex){if(ex instanceof pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AbortException)return;console.error(`#renderTextLayer: "${ex}".`);error=ex}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:textLayer.numTextDivs,error:error});this.#renderStructTreeLayer()}async#renderStructTreeLayer(){if(!this.textLayer)return;this.structTreeLayer||=new _struct_tree_layer_builder_js__WEBPACK_IMPORTED_MODULE_8__.StructTreeLayerBuilder;const tree=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),treeDom=this.structTreeLayer?.render(tree);if(treeDom){this.l10n.pause();this.canvas?.append(treeDom);this.l10n.resume()}this.structTreeLayer?.show()}async#buildXfaTextContentItems(textDivs){const text=await this.pdfPage.getTextContent(),items=[];for(const item of text.items)items.push(item.str);this._textHighlighter.setTextMapping(textDivs,items);this._textHighlighter.enable()}_resetZoomLayer(removeFromDOM=!1){if(!this.zoomLayer)return;const zoomLayerCanvas=this.zoomLayer.firstChild;this.#viewportMap.delete(zoomLayerCanvas);zoomLayerCanvas.width=0;zoomLayerCanvas.height=0;removeFromDOM&&this.zoomLayer.remove();this.zoomLayer=null}reset({keepZoomLayer:keepZoomLayer=!1,keepAnnotationLayer:keepAnnotationLayer=!1,keepAnnotationEditorLayer:keepAnnotationEditorLayer=!1,keepXfaLayer:keepXfaLayer=!1,keepTextLayer:keepTextLayer=!1}={}){this.cancelRendering({keepAnnotationLayer:keepAnnotationLayer,keepAnnotationEditorLayer:keepAnnotationEditorLayer,keepXfaLayer:keepXfaLayer,keepTextLayer:keepTextLayer});this.renderingState=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.INITIAL;const div=this.div,childNodes=div.childNodes,zoomLayerNode=keepZoomLayer&&this.zoomLayer||null,annotationLayerNode=keepAnnotationLayer&&this.annotationLayer?.div||null,annotationEditorLayerNode=keepAnnotationEditorLayer&&this.annotationEditorLayer?.div||null,xfaLayerNode=keepXfaLayer&&this.xfaLayer?.div||null,textLayerNode=keepTextLayer&&this.textLayer?.div||null;for(let i=childNodes.length-1;i>=0;i--){const node=childNodes[i];switch(node){case zoomLayerNode:case annotationLayerNode:case annotationEditorLayerNode:case xfaLayerNode:case textLayerNode:continue}node.remove();const layerIndex=this.#layers.indexOf(node);layerIndex>=0&&(this.#layers[layerIndex]=null)}div.removeAttribute("data-loaded");annotationLayerNode&&this.annotationLayer.hide();annotationEditorLayerNode&&this.annotationEditorLayer.hide();xfaLayerNode&&this.xfaLayer.hide();textLayerNode&&this.textLayer.hide();this.structTreeLayer?.hide();if(!zoomLayerNode){if(this.canvas){this.#viewportMap.delete(this.canvas);this.canvas.width=0;this.canvas.height=0;delete this.canvas}this._resetZoomLayer()}}update({scale:scale=0,rotation:rotation=null,optionalContentConfigPromise:optionalContentConfigPromise=null,drawingDelay:drawingDelay=-1}){this.scale=scale||this.scale;"number"==typeof rotation&&(this.rotation=rotation);if(optionalContentConfigPromise instanceof Promise){this._optionalContentConfigPromise=optionalContentConfigPromise;optionalContentConfigPromise.then((optionalContentConfig=>{optionalContentConfigPromise===this._optionalContentConfigPromise&&(this.#useThumbnailCanvas.initialOptionalContent=optionalContentConfig.hasInitialVisibility)}))}this.#useThumbnailCanvas.directDrawing=!0;const totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:totalRotation});this.#setDimensions();this._isStandalone&&this._container?.style.setProperty("--scale-factor",this.viewport.scale);if(this.canvas){let onlyCssZoom=!1;if(this.#hasRestrictedScaling)if(0===this.maxCanvasPixels)onlyCssZoom=!0;else if(this.maxCanvasPixels>0){const{width:width,height:height}=this.viewport,{sx:sx,sy:sy}=this.outputScale;onlyCssZoom=(Math.floor(width)*sx|0)*(Math.floor(height)*sy|0)>this.maxCanvasPixels}const postponeDrawing=!onlyCssZoom&&drawingDelay>=0&&drawingDelay<1e3;if(postponeDrawing||onlyCssZoom){if(postponeDrawing&&this.renderingState!==_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.FINISHED){this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:drawingDelay});this.renderingState=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.FINISHED;this.#useThumbnailCanvas.directDrawing=!1}this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!postponeDrawing,hideTextLayer:postponeDrawing});if(postponeDrawing)return;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this.#renderError});return}if(!this.zoomLayer&&!this.canvas.hidden){this.zoomLayer=this.canvas.parentNode;this.zoomLayer.style.position="absolute"}}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild});this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:keepAnnotationLayer=!1,keepAnnotationEditorLayer:keepAnnotationEditorLayer=!1,keepXfaLayer:keepXfaLayer=!1,keepTextLayer:keepTextLayer=!1,cancelExtraDelay:cancelExtraDelay=0}={}){if(this.renderTask){this.renderTask.cancel(cancelExtraDelay);this.renderTask=null}this.resume=null;if(this.textLayer&&(!keepTextLayer||!this.textLayer.div)){this.textLayer.cancel();this.textLayer=null}this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null);if(this.annotationLayer&&(!keepAnnotationLayer||!this.annotationLayer.div)){this.annotationLayer.cancel();this.annotationLayer=null;this._annotationCanvasMap=null}if(this.annotationEditorLayer&&(!keepAnnotationEditorLayer||!this.annotationEditorLayer.div)){if(this.drawLayer){this.drawLayer.cancel();this.drawLayer=null}this.annotationEditorLayer.cancel();this.annotationEditorLayer=null}if(this.xfaLayer&&(!keepXfaLayer||!this.xfaLayer.div)){this.xfaLayer.cancel();this.xfaLayer=null;this._textHighlighter?.disable()}}cssTransform({target:target,redrawAnnotationLayer:redrawAnnotationLayer=!1,redrawAnnotationEditorLayer:redrawAnnotationEditorLayer=!1,redrawXfaLayer:redrawXfaLayer=!1,redrawTextLayer:redrawTextLayer=!1,hideTextLayer:hideTextLayer=!1}){if(!target.hasAttribute("zooming")){target.setAttribute("zooming",!0);const{style:style}=target;style.width=style.height=""}const originalViewport=this.#viewportMap.get(target);if(this.viewport!==originalViewport){const relativeRotation=this.viewport.rotation-originalViewport.rotation,absRotation=Math.abs(relativeRotation);let scaleX=1,scaleY=1;if(90===absRotation||270===absRotation){const{width:width,height:height}=this.viewport;scaleX=height/width;scaleY=width/height}target.style.transform=`rotate(${relativeRotation}deg) scale(${scaleX}, ${scaleY})`}redrawAnnotationLayer&&this.annotationLayer&&this.#renderAnnotationLayer();if(redrawAnnotationEditorLayer&&this.annotationEditorLayer){this.drawLayer&&this.#renderDrawLayer();this.#renderAnnotationEditorLayer()}redrawXfaLayer&&this.xfaLayer&&this.#renderXfaLayer();if(this.textLayer)if(hideTextLayer){this.textLayer.hide();this.structTreeLayer?.hide()}else redrawTextLayer&&this.#renderTextLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(x,y){return this.viewport.convertToPdfPoint(x,y)}async#finishRenderTask(renderTask,error=null){renderTask===this.renderTask&&(this.renderTask=null);if(error instanceof pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.RenderingCancelledException)this.#renderError=null;else{this.#renderError=error;this.renderingState=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.FINISHED;this._resetZoomLayer(!0);this.#useThumbnailCanvas.regularAnnotations=!renderTask.separateAnnots;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:this.#renderError});if(error)throw error}}async draw(){if(this.renderingState!==_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.INITIAL){console.error("Must be in new state before drawing");this.reset()}const{div:div,l10n:l10n,pageColors:pageColors,pdfPage:pdfPage,viewport:viewport}=this;if(!pdfPage){this.renderingState=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.FINISHED;throw new Error("pdfPage is not loaded")}this.renderingState=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.RUNNING;const canvasWrapper=document.createElement("div");canvasWrapper.classList.add("canvasWrapper");canvasWrapper.setAttribute("aria-hidden",!0);this.#addLayer(canvasWrapper,"canvasWrapper");if(!this.textLayer&&this.#textLayerMode!==_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.TextLayerMode.DISABLE&&!pdfPage.isPureXfa){this._accessibilityManager||=new _text_accessibility_js__WEBPACK_IMPORTED_MODULE_9__.TextAccessibilityManager;this.textLayer=new _text_layer_builder_js__WEBPACK_IMPORTED_MODULE_10__.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,enablePermissions:this.#textLayerMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.TextLayerMode.ENABLE_PERMISSIONS,onAppend:textLayerDiv=>{this.l10n.pause();this.#addLayer(textLayerDiv,"textLayer");this.l10n.resume()}})}if(!this.annotationLayer&&this.#annotationMode!==pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.DISABLE){const{annotationStorage:annotationStorage,annotationEditorUIManager:annotationEditorUIManager,downloadManager:downloadManager,enableScripting:enableScripting,fieldObjectsPromise:fieldObjectsPromise,hasJSActionsPromise:hasJSActionsPromise,linkService:linkService}=this.#layerProperties;this._annotationCanvasMap||=new Map;this.annotationLayer=new _annotation_layer_builder_js__WEBPACK_IMPORTED_MODULE_3__.AnnotationLayerBuilder({pdfPage:pdfPage,annotationStorage:annotationStorage,imageResourcesPath:this.imageResourcesPath,renderForms:this.#annotationMode===pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE_FORMS,linkService:linkService,downloadManager:downloadManager,enableScripting:enableScripting,hasJSActionsPromise:hasJSActionsPromise,fieldObjectsPromise:fieldObjectsPromise,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager,annotationEditorUIManager:annotationEditorUIManager,onAppend:annotationLayerDiv=>{this.#addLayer(annotationLayerDiv,"annotationLayer")}})}const{width:width,height:height}=viewport,canvas=document.createElement("canvas");canvas.setAttribute("role","presentation");canvas.hidden=!0;const hasHCM=!(!pageColors?.background||!pageColors?.foreground);let showCanvas=isLastShow=>{if(!hasHCM||isLastShow){canvas.hidden=!1;showCanvas=null}};canvasWrapper.append(canvas);this.canvas=canvas;const ctx=canvas.getContext("2d",{alpha:!1}),outputScale=this.outputScale=new _ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.OutputScale;if(0===this.maxCanvasPixels){const invScale=1/this.scale;outputScale.sx*=invScale;outputScale.sy*=invScale;this.#hasRestrictedScaling=!0}else if(this.maxCanvasPixels>0){const pixelsInViewport=width*height,maxScale=Math.sqrt(this.maxCanvasPixels/pixelsInViewport);if(outputScale.sx>maxScale||outputScale.sy>maxScale){outputScale.sx=maxScale;outputScale.sy=maxScale;this.#hasRestrictedScaling=!0}else this.#hasRestrictedScaling=!1}const sfx=(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.approximateFraction)(outputScale.sx),sfy=(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.approximateFraction)(outputScale.sy);canvas.width=(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.roundToDivide)(width*outputScale.sx,sfx[0]);canvas.height=(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.roundToDivide)(height*outputScale.sy,sfy[0]);const{style:style}=canvas;style.width=(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.roundToDivide)(width,sfx[1])+"px";style.height=(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.roundToDivide)(height,sfy[1])+"px";this.#viewportMap.set(canvas,viewport);const renderContext={canvasContext:ctx,transform:outputScale.scaled?[outputScale.sx,0,0,outputScale.sy,0,0]:null,viewport:viewport,annotationMode:this.#annotationMode,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:pageColors},renderTask=this.renderTask=this.pdfPage.render(renderContext);renderTask.onContinue=cont=>{showCanvas?.(!1);if(!this.renderingQueue||this.renderingQueue.isHighestPriority(this))cont();else{this.renderingState=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.PAUSED;this.resume=()=>{this.renderingState=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.RUNNING;cont()}}};const resultPromise=renderTask.promise.then((async()=>{showCanvas?.(!0);await this.#finishRenderTask(renderTask);this.#renderTextLayer();this.annotationLayer&&await this.#renderAnnotationLayer();const{annotationEditorUIManager:annotationEditorUIManager}=this.#layerProperties;if(annotationEditorUIManager){this.drawLayer||=new _draw_layer_builder_js__WEBPACK_IMPORTED_MODULE_5__.DrawLayerBuilder({pageIndex:this.id});await this.#renderDrawLayer();this.drawLayer.setParent(canvasWrapper);this.annotationEditorLayer||(this.annotationEditorLayer=new _annotation_editor_layer_builder_js__WEBPACK_IMPORTED_MODULE_2__.AnnotationEditorLayerBuilder({uiManager:annotationEditorUIManager,pdfPage:pdfPage,l10n:l10n,accessibilityManager:this._accessibilityManager,annotationLayer:this.annotationLayer?.annotationLayer,textLayer:this.textLayer,drawLayer:this.drawLayer.getDrawLayer(),onAppend:annotationEditorLayerDiv=>{this.#addLayer(annotationEditorLayerDiv,"annotationEditorLayer")}}));this.#renderAnnotationEditorLayer()}}),(error=>{error instanceof pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.RenderingCancelledException||showCanvas?.(!0);return this.#finishRenderTask(renderTask,error)}));if(pdfPage.isPureXfa){if(!this.xfaLayer){const{annotationStorage:annotationStorage,linkService:linkService}=this.#layerProperties;this.xfaLayer=new _xfa_layer_builder_js__WEBPACK_IMPORTED_MODULE_11__.XfaLayerBuilder({pdfPage:pdfPage,annotationStorage:annotationStorage,linkService:linkService})}this.#renderXfaLayer()}div.setAttribute("data-loaded",!0);this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id});return resultPromise}setPageLabel(label){this.pageLabel="string"==typeof label?label:null;this.div.setAttribute("data-l10n-args",JSON.stringify({page:this.pageLabel??this.id}));null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:directDrawing,initialOptionalContent:initialOptionalContent,regularAnnotations:regularAnnotations}=this.#useThumbnailCanvas;return directDrawing&&initialOptionalContent&&regularAnnotations?this.canvas:null}}__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))},615:(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.d(__webpack_exports__,{PDFRenderingQueue:()=>PDFRenderingQueue});var pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(603),_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(256),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__]);pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__=(__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__)[0];const CLEANUP_TIMEOUT=3e4;class PDFRenderingQueue{constructor(){this.pdfViewer=null;this.pdfThumbnailViewer=null;this.onIdle=null;this.highestPriorityPage=null;this.idleTimeout=null;this.printing=!1;this.isThumbnailViewEnabled=!1;Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(pdfViewer){this.pdfViewer=pdfViewer}setThumbnailViewer(pdfThumbnailViewer){this.pdfThumbnailViewer=pdfThumbnailViewer}isHighestPriority(view){return this.highestPriorityPage===view.renderingId}renderHighestPriority(currentlyVisiblePages){if(this.idleTimeout){clearTimeout(this.idleTimeout);this.idleTimeout=null}this.pdfViewer.forceRendering(currentlyVisiblePages)||this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),CLEANUP_TIMEOUT))}getHighestPriority(visible,views,scrolledDown,preRenderExtra=!1){const visibleViews=visible.views,numVisible=visibleViews.length;if(0===numVisible)return null;for(let i=0;i<numVisible;i++){const view=visibleViews[i].view;if(!this.isViewFinished(view))return view}const firstId=visible.first.id,lastId=visible.last.id;if(lastId-firstId+1>numVisible){const visibleIds=visible.ids;for(let i=1,ii=lastId-firstId;i<ii;i++){const holeId=scrolledDown?firstId+i:lastId-i;if(visibleIds.has(holeId))continue;const holeView=views[holeId-1];if(!this.isViewFinished(holeView))return holeView}}let preRenderIndex=scrolledDown?lastId:firstId-2,preRenderView=views[preRenderIndex];if(preRenderView&&!this.isViewFinished(preRenderView))return preRenderView;if(preRenderExtra){preRenderIndex+=scrolledDown?1:-1;preRenderView=views[preRenderIndex];if(preRenderView&&!this.isViewFinished(preRenderView))return preRenderView}return null}isViewFinished(view){return view.renderingState===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.FINISHED}renderView(view){switch(view.renderingState){case _ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.FINISHED:return!1;case _ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.PAUSED:this.highestPriorityPage=view.renderingId;view.resume();break;case _ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.RUNNING:this.highestPriorityPage=view.renderingId;break;case _ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.INITIAL:this.highestPriorityPage=view.renderingId;view.draw().finally((()=>{this.renderHighestPriority()})).catch((reason=>{reason instanceof pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.RenderingCancelledException||console.error(`renderView: "${reason}"`)}))}return!0}}__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))},371:(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.d(__webpack_exports__,{PDFScriptingManager:()=>PDFScriptingManagerComponents});var _generic_scripting_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(289),_pdf_scripting_manager_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(942),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([_generic_scripting_js__WEBPACK_IMPORTED_MODULE_0__,_pdf_scripting_manager_js__WEBPACK_IMPORTED_MODULE_1__]);[_generic_scripting_js__WEBPACK_IMPORTED_MODULE_0__,_pdf_scripting_manager_js__WEBPACK_IMPORTED_MODULE_1__]=__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__;class PDFScriptingManagerComponents extends _pdf_scripting_manager_js__WEBPACK_IMPORTED_MODULE_1__.PDFScriptingManager{constructor(options){options.externalServices||window.addEventListener("updatefromsandbox",(event=>{options.eventBus.dispatch("updatefromsandbox",{source:window,detail:event.detail})}));options.externalServices||={createScripting:()=>new _generic_scripting_js__WEBPACK_IMPORTED_MODULE_0__.GenericScripting(options.sandboxBundleSrc)};options.docProperties||=pdfDocument=>(0,_generic_scripting_js__WEBPACK_IMPORTED_MODULE_0__.docProperties)(pdfDocument);super(options)}}__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))},942:(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.d(__webpack_exports__,{PDFScriptingManager:()=>PDFScriptingManager});var _ui_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(256),pdfjs_lib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(603),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([pdfjs_lib__WEBPACK_IMPORTED_MODULE_1__]);pdfjs_lib__WEBPACK_IMPORTED_MODULE_1__=(__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__)[0];class PDFScriptingManager{#closeCapability=null;#destroyCapability=null;#docProperties=null;#eventAbortController=null;#eventBus=null;#externalServices=null;#pdfDocument=null;#pdfViewer=null;#ready=!1;#scripting=null;#willPrintCapability=null;constructor({eventBus:eventBus,externalServices:externalServices=null,docProperties:docProperties=null}){this.#eventBus=eventBus;this.#externalServices=externalServices;this.#docProperties=docProperties}setViewer(pdfViewer){this.#pdfViewer=pdfViewer}async setDocument(pdfDocument){this.#pdfDocument&&await this.#destroyScripting();this.#pdfDocument=pdfDocument;if(!pdfDocument)return;const[objects,calculationOrder,docActions]=await Promise.all([pdfDocument.getFieldObjects(),pdfDocument.getCalculationOrderIds(),pdfDocument.getJSActions()]);if(!objects&&!docActions){await this.#destroyScripting();return}if(pdfDocument!==this.#pdfDocument)return;try{this.#scripting=this.#initScripting()}catch(error){console.error(`setDocument: "${error.message}".`);await this.#destroyScripting();return}const eventBus=this.#eventBus;this.#eventAbortController=new AbortController;const{signal:signal}=this.#eventAbortController;eventBus._on("updatefromsandbox",(event=>{event?.source===window&&this.#updateFromSandbox(event.detail)}),{signal:signal});eventBus._on("dispatcheventinsandbox",(event=>{this.#scripting?.dispatchEventInSandbox(event.detail)}),{signal:signal});eventBus._on("pagechanging",(({pageNumber:pageNumber,previous:previous})=>{if(pageNumber!==previous){this.#dispatchPageClose(previous);this.#dispatchPageOpen(pageNumber)}}),{signal:signal});eventBus._on("pagerendered",(({pageNumber:pageNumber})=>{this._pageOpenPending.has(pageNumber)&&pageNumber===this.#pdfViewer.currentPageNumber&&this.#dispatchPageOpen(pageNumber)}),{signal:signal});eventBus._on("pagesdestroy",(async()=>{await this.#dispatchPageClose(this.#pdfViewer.currentPageNumber);await(this.#scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"}));this.#closeCapability?.resolve()}),{signal:signal});try{const docProperties=await this.#docProperties(pdfDocument);if(pdfDocument!==this.#pdfDocument)return;await this.#scripting.createSandbox({objects:objects,calculationOrder:calculationOrder,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...docProperties,actions:docActions}});eventBus.dispatch("sandboxcreated",{source:this})}catch(error){console.error(`setDocument: "${error.message}".`);await this.#destroyScripting();return}await(this.#scripting?.dispatchEventInSandbox({id:"doc",name:"Open"}));await this.#dispatchPageOpen(this.#pdfViewer.currentPageNumber,!0);Promise.resolve().then((()=>{pdfDocument===this.#pdfDocument&&(this.#ready=!0)}))}async dispatchWillSave(){return this.#scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(){return this.#scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(){if(this.#scripting){await(this.#willPrintCapability?.promise);this.#willPrintCapability=Promise.withResolvers();try{await this.#scripting.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(ex){this.#willPrintCapability.resolve();this.#willPrintCapability=null;throw ex}await this.#willPrintCapability.promise}}async dispatchDidPrint(){return this.#scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){return this.#destroyCapability?.promise||null}get ready(){return this.#ready}get _pageOpenPending(){return(0,pdfjs_lib__WEBPACK_IMPORTED_MODULE_1__.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,pdfjs_lib__WEBPACK_IMPORTED_MODULE_1__.shadow)(this,"_visitedPages",new Map)}async#updateFromSandbox(detail){const pdfViewer=this.#pdfViewer,isInPresentationMode=pdfViewer.isInPresentationMode||pdfViewer.isChangingPresentationMode,{id:id,siblings:siblings,command:command,value:value}=detail;if(!id){switch(command){case"clear":console.clear();break;case"error":console.error(value);break;case"layout":if(!isInPresentationMode){const modes=(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_0__.apiPageLayoutToViewerModes)(value);pdfViewer.spreadMode=modes.spreadMode}break;case"page-num":pdfViewer.currentPageNumber=value+1;break;case"print":await pdfViewer.pagesPromise;this.#eventBus.dispatch("print",{source:this});break;case"println":console.log(value);break;case"zoom":isInPresentationMode||(pdfViewer.currentScaleValue=value);break;case"SaveAs":this.#eventBus.dispatch("download",{source:this});break;case"FirstPage":pdfViewer.currentPageNumber=1;break;case"LastPage":pdfViewer.currentPageNumber=pdfViewer.pagesCount;break;case"NextPage":pdfViewer.nextPage();break;case"PrevPage":pdfViewer.previousPage();break;case"ZoomViewIn":isInPresentationMode||pdfViewer.increaseScale();break;case"ZoomViewOut":isInPresentationMode||pdfViewer.decreaseScale();break;case"WillPrintFinished":this.#willPrintCapability?.resolve();this.#willPrintCapability=null}return}if(isInPresentationMode&&detail.focus)return;delete detail.id;delete detail.siblings;const ids=siblings?[id,...siblings]:[id];for(const elementId of ids){const element=document.querySelector(`[data-element-id="${elementId}"]`);element?element.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:detail})):this.#pdfDocument?.annotationStorage.setValue(elementId,detail)}}async#dispatchPageOpen(pageNumber,initialize=!1){const pdfDocument=this.#pdfDocument,visitedPages=this._visitedPages;initialize&&(this.#closeCapability=Promise.withResolvers());if(!this.#closeCapability)return;const pageView=this.#pdfViewer.getPageView(pageNumber-1);if(pageView?.renderingState!==_ui_utils_js__WEBPACK_IMPORTED_MODULE_0__.RenderingStates.FINISHED){this._pageOpenPending.add(pageNumber);return}this._pageOpenPending.delete(pageNumber);const actionsPromise=(async()=>{const actions=await(visitedPages.has(pageNumber)?null:pageView.pdfPage?.getJSActions());pdfDocument===this.#pdfDocument&&await(this.#scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:pageNumber,actions:actions}))})();visitedPages.set(pageNumber,actionsPromise)}async#dispatchPageClose(pageNumber){const pdfDocument=this.#pdfDocument,visitedPages=this._visitedPages;if(!this.#closeCapability)return;if(this._pageOpenPending.has(pageNumber))return;const actionsPromise=visitedPages.get(pageNumber);if(actionsPromise){visitedPages.set(pageNumber,null);await actionsPromise;pdfDocument===this.#pdfDocument&&await(this.#scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:pageNumber}))}}#initScripting(){this.#destroyCapability=Promise.withResolvers();if(this.#scripting)throw new Error("#initScripting: Scripting already exists.");return this.#externalServices.createScripting()}async#destroyScripting(){if(this.#scripting){if(this.#closeCapability){await Promise.race([this.#closeCapability.promise,new Promise((resolve=>{setTimeout(resolve,1e3)}))]).catch((()=>{}));this.#closeCapability=null}this.#pdfDocument=null;try{await this.#scripting.destroySandbox()}catch{}this.#willPrintCapability?.reject(new Error("Scripting destroyed."));this.#willPrintCapability=null;this.#eventAbortController?.abort();this.#eventAbortController=null;this._pageOpenPending.clear();this._visitedPages.clear();this.#scripting=null;this.#ready=!1;this.#destroyCapability?.resolve()}else{this.#pdfDocument=null;this.#destroyCapability?.resolve()}}}__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))},838:(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.d(__webpack_exports__,{PDFSinglePageViewer:()=>PDFSinglePageViewer});var _ui_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(256),_pdf_viewer_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(285),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([_pdf_viewer_js__WEBPACK_IMPORTED_MODULE_1__]);_pdf_viewer_js__WEBPACK_IMPORTED_MODULE_1__=(__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__)[0];class PDFSinglePageViewer extends _pdf_viewer_js__WEBPACK_IMPORTED_MODULE_1__.PDFViewer{_resetView(){super._resetView();this._scrollMode=_ui_utils_js__WEBPACK_IMPORTED_MODULE_0__.ScrollMode.PAGE;this._spreadMode=_ui_utils_js__WEBPACK_IMPORTED_MODULE_0__.SpreadMode.NONE}set scrollMode(mode){}_updateScrollMode(){}set spreadMode(mode){}_updateSpreadMode(){}}__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))},624:(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.d(__webpack_exports__,{AnnotationLayerBuilder:()=>_annotation_layer_builder_js__WEBPACK_IMPORTED_MODULE_3__.AnnotationLayerBuilder,DownloadManager:()=>_download_manager_js__WEBPACK_IMPORTED_MODULE_4__.DownloadManager,EventBus:()=>_event_utils_js__WEBPACK_IMPORTED_MODULE_5__.EventBus,FindState:()=>_pdf_find_controller_js__WEBPACK_IMPORTED_MODULE_0__.FindState,GenericL10n:()=>_genericl10n_js__WEBPACK_IMPORTED_MODULE_6__.GenericL10n,LinkTarget:()=>_pdf_link_service_js__WEBPACK_IMPORTED_MODULE_1__.LinkTarget,PDFFindController:()=>_pdf_find_controller_js__WEBPACK_IMPORTED_MODULE_0__.PDFFindController,PDFHistory:()=>_pdf_history_js__WEBPACK_IMPORTED_MODULE_7__.PDFHistory,PDFLinkService:()=>_pdf_link_service_js__WEBPACK_IMPORTED_MODULE_1__.PDFLinkService,PDFPageView:()=>_pdf_page_view_js__WEBPACK_IMPORTED_MODULE_8__.PDFPageView,PDFScriptingManager:()=>_pdf_scripting_manager_component_js__WEBPACK_IMPORTED_MODULE_9__.PDFScriptingManager,PDFSinglePageViewer:()=>_pdf_single_page_viewer_js__WEBPACK_IMPORTED_MODULE_10__.PDFSinglePageViewer,PDFViewer:()=>_pdf_viewer_js__WEBPACK_IMPORTED_MODULE_11__.PDFViewer,ProgressBar:()=>_ui_utils_js__WEBPACK_IMPORTED_MODULE_2__.ProgressBar,RenderingStates:()=>_ui_utils_js__WEBPACK_IMPORTED_MODULE_2__.RenderingStates,ScrollMode:()=>_ui_utils_js__WEBPACK_IMPORTED_MODULE_2__.ScrollMode,SimpleLinkService:()=>_pdf_link_service_js__WEBPACK_IMPORTED_MODULE_1__.SimpleLinkService,SpreadMode:()=>_ui_utils_js__WEBPACK_IMPORTED_MODULE_2__.SpreadMode,StructTreeLayerBuilder:()=>_struct_tree_layer_builder_js__WEBPACK_IMPORTED_MODULE_12__.StructTreeLayerBuilder,TextLayerBuilder:()=>_text_layer_builder_js__WEBPACK_IMPORTED_MODULE_13__.TextLayerBuilder,XfaLayerBuilder:()=>_xfa_layer_builder_js__WEBPACK_IMPORTED_MODULE_14__.XfaLayerBuilder,parseQueryString:()=>_ui_utils_js__WEBPACK_IMPORTED_MODULE_2__.parseQueryString});var _pdf_find_controller_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(814),_pdf_link_service_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(787),_ui_utils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(256),_annotation_layer_builder_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(707),_download_manager_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(544),_event_utils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(656),_genericl10n_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(410),_pdf_history_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(543),_pdf_page_view_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(966),_pdf_scripting_manager_component_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(371),_pdf_single_page_viewer_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(838),_pdf_viewer_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(285),_struct_tree_layer_builder_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(698),_text_layer_builder_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(765),_xfa_layer_builder_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(973),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([_annotation_layer_builder_js__WEBPACK_IMPORTED_MODULE_3__,_download_manager_js__WEBPACK_IMPORTED_MODULE_4__,_genericl10n_js__WEBPACK_IMPORTED_MODULE_6__,_pdf_page_view_js__WEBPACK_IMPORTED_MODULE_8__,_pdf_scripting_manager_component_js__WEBPACK_IMPORTED_MODULE_9__,_pdf_single_page_viewer_js__WEBPACK_IMPORTED_MODULE_10__,_pdf_viewer_js__WEBPACK_IMPORTED_MODULE_11__,_text_layer_builder_js__WEBPACK_IMPORTED_MODULE_13__,_xfa_layer_builder_js__WEBPACK_IMPORTED_MODULE_14__]);[_annotation_layer_builder_js__WEBPACK_IMPORTED_MODULE_3__,_download_manager_js__WEBPACK_IMPORTED_MODULE_4__,_genericl10n_js__WEBPACK_IMPORTED_MODULE_6__,_pdf_page_view_js__WEBPACK_IMPORTED_MODULE_8__,_pdf_scripting_manager_component_js__WEBPACK_IMPORTED_MODULE_9__,_pdf_single_page_viewer_js__WEBPACK_IMPORTED_MODULE_10__,_pdf_viewer_js__WEBPACK_IMPORTED_MODULE_11__,_text_layer_builder_js__WEBPACK_IMPORTED_MODULE_13__,_xfa_layer_builder_js__WEBPACK_IMPORTED_MODULE_14__]=__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__;__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))},285:(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.d(__webpack_exports__,{PDFViewer:()=>PDFViewer});var pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(603),_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(256),web_null_l10n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(410),_pdf_page_view_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(966),_pdf_rendering_queue_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(615),_pdf_link_service_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(787),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__,web_null_l10n__WEBPACK_IMPORTED_MODULE_2__,_pdf_page_view_js__WEBPACK_IMPORTED_MODULE_3__,_pdf_rendering_queue_js__WEBPACK_IMPORTED_MODULE_4__]);[pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__,web_null_l10n__WEBPACK_IMPORTED_MODULE_2__,_pdf_page_view_js__WEBPACK_IMPORTED_MODULE_3__,_pdf_rendering_queue_js__WEBPACK_IMPORTED_MODULE_4__]=__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__;const DEFAULT_CACHE_SIZE=10,PagesCountLimit={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};function isValidAnnotationEditorMode(mode){return Object.values(pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType).includes(mode)&&mode!==pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.DISABLE}class PDFPageViewBuffer{#buf=new Set;#size=0;constructor(size){this.#size=size}push(view){const buf=this.#buf;buf.has(view)&&buf.delete(view);buf.add(view);buf.size>this.#size&&this.#destroyFirstView()}resize(newSize,idsToKeep=null){this.#size=newSize;const buf=this.#buf;if(idsToKeep){const ii=buf.size;let i=1;for(const view of buf){if(idsToKeep.has(view.id)){buf.delete(view);buf.add(view)}if(++i>ii)break}}for(;buf.size>this.#size;)this.#destroyFirstView()}has(view){return this.#buf.has(view)}[Symbol.iterator](){return this.#buf.keys()}#destroyFirstView(){const firstView=this.#buf.keys().next().value;firstView?.destroy();this.#buf.delete(firstView)}}class PDFViewer{#buffer=null;#altTextManager=null;#annotationEditorHighlightColors=null;#annotationEditorMode=pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE;#annotationEditorUIManager=null;#annotationMode=pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE_FORMS;#containerTopLeft=null;#copyCallbackBound=null;#enableHighlightFloatingButton=!1;#enablePermissions=!1;#mlManager=null;#getAllTextInProgress=!1;#hiddenCopyElement=null;#interruptCopyCondition=!1;#previousContainerHeight=0;#resizeObserver=new ResizeObserver(this.#resizeObserverCallback.bind(this));#scrollModePageState=null;#onVisibilityChange=null;#scaleTimeoutId=null;#textLayerMode=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.TextLayerMode.ENABLE;constructor(options){if("4.2.67"!==pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.version)throw new Error(`The API version "${pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.version}" does not match the Viewer version "4.2.67".`);this.container=options.container;this.viewer=options.viewer||options.container.firstElementChild;if("DIV"!==this.container?.tagName||"DIV"!==this.viewer?.tagName)throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.#resizeObserver.observe(this.container);this.eventBus=options.eventBus;this.linkService=options.linkService||new _pdf_link_service_js__WEBPACK_IMPORTED_MODULE_5__.SimpleLinkService;this.downloadManager=options.downloadManager||null;this.findController=options.findController||null;this.#altTextManager=options.altTextManager||null;this.findController&&(this.findController.onIsPageVisible=pageNumber=>this._getVisiblePages().ids.has(pageNumber));this._scriptingManager=options.scriptingManager||null;this.#textLayerMode=options.textLayerMode??_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.TextLayerMode.ENABLE;this.#annotationMode=options.annotationMode??pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE_FORMS;this.#annotationEditorMode=options.annotationEditorMode??pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE;this.#annotationEditorHighlightColors=options.annotationEditorHighlightColors||null;this.#enableHighlightFloatingButton=!0===options.enableHighlightFloatingButton;this.imageResourcesPath=options.imageResourcesPath||"";this.enablePrintAutoRotate=options.enablePrintAutoRotate||!1;this.removePageBorders=options.removePageBorders||!1;this.maxCanvasPixels=options.maxCanvasPixels;this.l10n=options.l10n;this.l10n||=new web_null_l10n__WEBPACK_IMPORTED_MODULE_2__.GenericL10n;this.#enablePermissions=options.enablePermissions||!1;this.pageColors=options.pageColors||null;this.#mlManager=options.mlManager||null;this.defaultRenderingQueue=!options.renderingQueue;if(this.defaultRenderingQueue){this.renderingQueue=new _pdf_rendering_queue_js__WEBPACK_IMPORTED_MODULE_4__.PDFRenderingQueue;this.renderingQueue.setViewer(this)}else this.renderingQueue=options.renderingQueue;this.scroll=(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.watchScroll)(this.container,this._scrollUpdate.bind(this));this.presentationModeState=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.PresentationModeState.UNKNOWN;this._onBeforeDraw=this._onAfterDraw=null;this._resetView();this.removePageBorders&&this.viewer.classList.add("removePageBorders");this.#updateContainerHeightCss();this.eventBus._on("thumbnailrendered",(({pageNumber:pageNumber,pdfPage:pdfPage})=>{const pageView=this._pages[pageNumber-1];this.#buffer.has(pageView)||pdfPage?.cleanup()}));options.l10n||this.l10n.translate(this.container)}get pagesCount(){return this._pages.length}getPageView(index){return this._pages[index]}getCachedPageViews(){return new Set(this.#buffer)}get pageViewsReady(){return this._pages.every((pageView=>pageView?.pdfPage))}get renderForms(){return this.#annotationMode===pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(val){if(!Number.isInteger(val))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(val,!0)||console.error(`currentPageNumber: "${val}" is not a valid page.`))}_setCurrentPageNumber(val,resetCurrentPageView=!1){if(this._currentPageNumber===val){resetCurrentPageView&&this.#resetCurrentPageView();return!0}if(!(0<val&&val<=this.pagesCount))return!1;const previous=this._currentPageNumber;this._currentPageNumber=val;this.eventBus.dispatch("pagechanging",{source:this,pageNumber:val,pageLabel:this._pageLabels?.[val-1]??null,previous:previous});resetCurrentPageView&&this.#resetCurrentPageView();return!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(val){if(!this.pdfDocument)return;let page=0|val;if(this._pageLabels){const i=this._pageLabels.indexOf(val);i>=0&&(page=i+1)}this._setCurrentPageNumber(page,!0)||console.error(`currentPageLabel: "${val}" is not a valid page.`)}get currentScale(){return this._currentScale!==_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.UNKNOWN_SCALE?this._currentScale:_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_SCALE}set currentScale(val){if(isNaN(val))throw new Error("Invalid numeric scale.");this.pdfDocument&&this.#setScale(val,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(val){this.pdfDocument&&this.#setScale(val,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(rotation){if(!(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.isValidRotation)(rotation))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument)return;(rotation%=360)<0&&(rotation+=360);if(this._pagesRotation===rotation)return;this._pagesRotation=rotation;const pageNumber=this._currentPageNumber;this.refresh(!0,{rotation:rotation});this._currentScaleValue&&this.#setScale(this._currentScaleValue,{noScroll:!0});this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:rotation,pageNumber:pageNumber});this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}get _layerProperties(){const self=this;return(0,pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.shadow)(this,"_layerProperties",{get annotationEditorUIManager(){return self.#annotationEditorUIManager},get annotationStorage(){return self.pdfDocument?.annotationStorage},get downloadManager(){return self.downloadManager},get enableScripting(){return!!self._scriptingManager},get fieldObjectsPromise(){return self.pdfDocument?.getFieldObjects()},get findController(){return self.findController},get hasJSActionsPromise(){return self.pdfDocument?.hasJSActions()},get linkService(){return self.linkService}})}#initializePermissions(permissions){const params={annotationEditorMode:this.#annotationEditorMode,annotationMode:this.#annotationMode,textLayerMode:this.#textLayerMode};if(!permissions)return params;permissions.includes(pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.PermissionFlag.COPY)||this.#textLayerMode!==_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.TextLayerMode.ENABLE||(params.textLayerMode=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.TextLayerMode.ENABLE_PERMISSIONS);permissions.includes(pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.PermissionFlag.MODIFY_CONTENTS)||(params.annotationEditorMode=pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.DISABLE);permissions.includes(pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.PermissionFlag.MODIFY_ANNOTATIONS)||permissions.includes(pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.PermissionFlag.FILL_INTERACTIVE_FORMS)||this.#annotationMode!==pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE_FORMS||(params.annotationMode=pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationMode.ENABLE);return params}async#onePageRenderedOrForceFetch(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return;const visibilityChangePromise=new Promise((resolve=>{this.#onVisibilityChange=()=>{"hidden"===document.visibilityState&&resolve()};document.addEventListener("visibilitychange",this.#onVisibilityChange)}));await Promise.race([this._onePageRenderedCapability.promise,visibilityChangePromise]);document.removeEventListener("visibilitychange",this.#onVisibilityChange);this.#onVisibilityChange=null}async getAllText(){const texts=[],buffer=[];for(let pageNum=1,pagesCount=this.pdfDocument.numPages;pageNum<=pagesCount;++pageNum){if(this.#interruptCopyCondition)return null;buffer.length=0;const page=await this.pdfDocument.getPage(pageNum),{items:items}=await page.getTextContent();for(const item of items){item.str&&buffer.push(item.str);item.hasEOL&&buffer.push("\n")}texts.push((0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.removeNullCharacters)(buffer.join("")))}return texts.join("\n")}#copyCallback(textLayerMode,event){const selection=document.getSelection(),{focusNode:focusNode,anchorNode:anchorNode}=selection;if(anchorNode&&focusNode&&selection.containsNode(this.#hiddenCopyElement)){if(this.#getAllTextInProgress||textLayerMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.TextLayerMode.ENABLE_PERMISSIONS){event.preventDefault();event.stopPropagation();return}this.#getAllTextInProgress=!0;const savedCursor=this.container.style.cursor;this.container.style.cursor="wait";const interruptCopy=ev=>this.#interruptCopyCondition="Escape"===ev.key;window.addEventListener("keydown",interruptCopy);this.getAllText().then((async text=>{null!==text&&await navigator.clipboard.writeText(text)})).catch((reason=>{console.warn(`Something goes wrong when extracting the text: ${reason.message}`)})).finally((()=>{this.#getAllTextInProgress=!1;this.#interruptCopyCondition=!1;window.removeEventListener("keydown",interruptCopy);this.container.style.cursor=savedCursor}));event.preventDefault();event.stopPropagation()}}setDocument(pdfDocument){if(this.pdfDocument){this.eventBus.dispatch("pagesdestroy",{source:this});this._cancelRendering();this._resetView();this.findController?.setDocument(null);this._scriptingManager?.setDocument(null);if(this.#annotationEditorUIManager){this.#annotationEditorUIManager.destroy();this.#annotationEditorUIManager=null}}this.pdfDocument=pdfDocument;if(!pdfDocument)return;const pagesCount=pdfDocument.numPages,firstPagePromise=pdfDocument.getPage(1),optionalContentConfigPromise=pdfDocument.getOptionalContentConfig({intent:"display"}),permissionsPromise=this.#enablePermissions?pdfDocument.getPermissions():Promise.resolve();if(pagesCount>PagesCountLimit.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const mode=this._scrollMode=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:mode})}this._pagesCapability.promise.then((()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:pagesCount})}),(()=>{}));this._onBeforeDraw=evt=>{const pageView=this._pages[evt.pageNumber-1];pageView&&this.#buffer.push(pageView)};this.eventBus._on("pagerender",this._onBeforeDraw);this._onAfterDraw=evt=>{if(!evt.cssTransform){this._onePageRenderedCapability.resolve({timestamp:evt.timestamp});this.eventBus._off("pagerendered",this._onAfterDraw);this._onAfterDraw=null}};this.eventBus._on("pagerendered",this._onAfterDraw);Promise.all([firstPagePromise,permissionsPromise]).then((([firstPdfPage,permissions])=>{if(pdfDocument!==this.pdfDocument)return;this._firstPageCapability.resolve(firstPdfPage);this._optionalContentConfigPromise=optionalContentConfigPromise;const{annotationEditorMode:annotationEditorMode,annotationMode:annotationMode,textLayerMode:textLayerMode}=this.#initializePermissions(permissions);if(textLayerMode!==_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.TextLayerMode.DISABLE){const element=this.#hiddenCopyElement=document.createElement("div");element.id="hiddenCopyElement";this.viewer.before(element)}if(annotationEditorMode!==pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.DISABLE){const mode=annotationEditorMode;if(pdfDocument.isPureXfa)console.warn("Warning: XFA-editing is not implemented.");else if(isValidAnnotationEditorMode(mode)){this.#annotationEditorUIManager=new pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorUIManager(this.container,this.viewer,this.#altTextManager,this.eventBus,pdfDocument,this.pageColors,this.#annotationEditorHighlightColors,this.#enableHighlightFloatingButton,this.#mlManager);this.eventBus.dispatch("annotationeditoruimanager",{source:this,uiManager:this.#annotationEditorUIManager});mode!==pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.NONE&&this.#annotationEditorUIManager.updateMode(mode)}else console.error(`Invalid AnnotationEditor mode: ${mode}`)}const viewerElement=this._scrollMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.PAGE?null:this.viewer,scale=this.currentScale,viewport=firstPdfPage.getViewport({scale:scale*pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",viewport.scale);if("CanvasText"===this.pageColors?.foreground||"Canvas"===this.pageColors?.background){this.viewer.style.setProperty("--hcm-highlight-filter",pdfDocument.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight"));this.viewer.style.setProperty("--hcm-highlight-selected-filter",pdfDocument.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","ButtonText"))}for(let pageNum=1;pageNum<=pagesCount;++pageNum){const pageView=new _pdf_page_view_js__WEBPACK_IMPORTED_MODULE_3__.PDFPageView({container:viewerElement,eventBus:this.eventBus,id:pageNum,scale:scale,defaultViewport:viewport.clone(),optionalContentConfigPromise:optionalContentConfigPromise,renderingQueue:this.renderingQueue,textLayerMode:textLayerMode,annotationMode:annotationMode,imageResourcesPath:this.imageResourcesPath,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:this._layerProperties});this._pages.push(pageView)}this._pages[0]?.setPdfPage(firstPdfPage);this._scrollMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.PAGE?this.#ensurePageViewVisible():this._spreadMode!==_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.SpreadMode.NONE&&this._updateSpreadMode();this.#onePageRenderedOrForceFetch().then((async()=>{this.findController?.setDocument(pdfDocument);this._scriptingManager?.setDocument(pdfDocument);if(this.#hiddenCopyElement){this.#copyCallbackBound=this.#copyCallback.bind(this,textLayerMode);document.addEventListener("copy",this.#copyCallbackBound)}this.#annotationEditorUIManager&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:this.#annotationEditorMode});if(pdfDocument.loadingParams.disableAutoFetch||pagesCount>PagesCountLimit.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let getPagesLeft=pagesCount-1;if(getPagesLeft<=0)this._pagesCapability.resolve();else for(let pageNum=2;pageNum<=pagesCount;++pageNum){const promise=pdfDocument.getPage(pageNum).then((pdfPage=>{const pageView=this._pages[pageNum-1];pageView.pdfPage||pageView.setPdfPage(pdfPage);0==--getPagesLeft&&this._pagesCapability.resolve()}),(reason=>{console.error(`Unable to get page ${pageNum} to initialize viewer`,reason);0==--getPagesLeft&&this._pagesCapability.resolve()}));pageNum%PagesCountLimit.PAUSE_EAGER_PAGE_INIT==0&&await promise}}));this.eventBus.dispatch("pagesinit",{source:this});pdfDocument.getMetadata().then((({info:info})=>{pdfDocument===this.pdfDocument&&info.Language&&(this.viewer.lang=info.Language)}));this.defaultRenderingQueue&&this.update()})).catch((reason=>{console.error("Unable to initialize viewer",reason);this._pagesCapability.reject(reason)}))}setPageLabels(labels){if(this.pdfDocument){if(labels)if(Array.isArray(labels)&&this.pdfDocument.numPages===labels.length)this._pageLabels=labels;else{this._pageLabels=null;console.error("setPageLabels: Invalid page labels.")}else this._pageLabels=null;for(let i=0,ii=this._pages.length;i<ii;i++)this._pages[i].setPageLabel(this._pageLabels?.[i]??null)}}_resetView(){this._pages=[];this._currentPageNumber=1;this._currentScale=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.UNKNOWN_SCALE;this._currentScaleValue=null;this._pageLabels=null;this.#buffer=new PDFPageViewBuffer(DEFAULT_CACHE_SIZE);this._location=null;this._pagesRotation=0;this._optionalContentConfigPromise=null;this._firstPageCapability=Promise.withResolvers();this._onePageRenderedCapability=Promise.withResolvers();this._pagesCapability=Promise.withResolvers();this._scrollMode=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.VERTICAL;this._previousScrollMode=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.UNKNOWN;this._spreadMode=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.SpreadMode.NONE;this.#scrollModePageState={previousPageNumber:1,scrollDown:!0,pages:[]};if(this._onBeforeDraw){this.eventBus._off("pagerender",this._onBeforeDraw);this._onBeforeDraw=null}if(this._onAfterDraw){this.eventBus._off("pagerendered",this._onAfterDraw);this._onAfterDraw=null}if(this.#onVisibilityChange){document.removeEventListener("visibilitychange",this.#onVisibilityChange);this.#onVisibilityChange=null}this.viewer.textContent="";this._updateScrollMode();this.viewer.removeAttribute("lang");if(this.#hiddenCopyElement){document.removeEventListener("copy",this.#copyCallbackBound);this.#copyCallbackBound=null;this.#hiddenCopyElement.remove();this.#hiddenCopyElement=null}}#ensurePageViewVisible(){if(this._scrollMode!==_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const pageNumber=this._currentPageNumber,state=this.#scrollModePageState,viewer=this.viewer;viewer.textContent="";state.pages.length=0;if(this._spreadMode!==_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.SpreadMode.NONE||this.isInPresentationMode){const pageIndexSet=new Set,parity=this._spreadMode-1;if(-1===parity)pageIndexSet.add(pageNumber-1);else if(pageNumber%2!==parity){pageIndexSet.add(pageNumber-1);pageIndexSet.add(pageNumber)}else{pageIndexSet.add(pageNumber-2);pageIndexSet.add(pageNumber-1)}const spread=document.createElement("div");spread.className="spread";if(this.isInPresentationMode){const dummyPage=document.createElement("div");dummyPage.className="dummyPage";spread.append(dummyPage)}for(const i of pageIndexSet){const pageView=this._pages[i];if(pageView){spread.append(pageView.div);state.pages.push(pageView)}}viewer.append(spread)}else{const pageView=this._pages[pageNumber-1];viewer.append(pageView.div);state.pages.push(pageView)}state.scrollDown=pageNumber>=state.previousPageNumber;state.previousPageNumber=pageNumber}_scrollUpdate(){0!==this.pagesCount&&this.update()}#scrollIntoView(pageView,pageSpot=null){const{div:div,id:id}=pageView;this._currentPageNumber!==id&&this._setCurrentPageNumber(id);if(this._scrollMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.PAGE){this.#ensurePageViewVisible();this.update()}if(!pageSpot&&!this.isInPresentationMode){const left=div.offsetLeft+div.clientLeft,right=left+div.clientWidth,{scrollLeft:scrollLeft,clientWidth:clientWidth}=this.container;(this._scrollMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.HORIZONTAL||left<scrollLeft||right>scrollLeft+clientWidth)&&(pageSpot={left:0,top:0})}(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.scrollIntoView)(div,pageSpot);!this._currentScaleValue&&this._location&&(this._location=null)}#isSameScale(newScale){return newScale===this._currentScale||Math.abs(newScale-this._currentScale)<1e-15}#setScaleUpdatePages(newScale,newValue,{noScroll:noScroll=!1,preset:preset=!1,drawingDelay:drawingDelay=-1}){this._currentScaleValue=newValue.toString();if(this.#isSameScale(newScale)){preset&&this.eventBus.dispatch("scalechanging",{source:this,scale:newScale,presetValue:newValue});return}this.viewer.style.setProperty("--scale-factor",newScale*pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.PixelsPerInch.PDF_TO_CSS_UNITS);const postponeDrawing=drawingDelay>=0&&drawingDelay<1e3;this.refresh(!0,{scale:newScale,drawingDelay:postponeDrawing?drawingDelay:-1});postponeDrawing&&(this.#scaleTimeoutId=setTimeout((()=>{this.#scaleTimeoutId=null;this.refresh()}),drawingDelay));this._currentScale=newScale;if(!noScroll){let dest,page=this._currentPageNumber;if(this._location&&!this.isInPresentationMode&&!this.isChangingPresentationMode){page=this._location.pageNumber;dest=[null,{name:"XYZ"},this._location.left,this._location.top,null]}this.scrollPageIntoView({pageNumber:page,destArray:dest,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:newScale,presetValue:preset?newValue:void 0});this.defaultRenderingQueue&&this.update()}get#pageWidthScaleFactor(){return this._spreadMode!==_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.SpreadMode.NONE&&this._scrollMode!==_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.HORIZONTAL?2:1}#setScale(value,options){let scale=parseFloat(value);if(scale>0){options.preset=!1;this.#setScaleUpdatePages(scale,value,options)}else{const currentPage=this._pages[this._currentPageNumber-1];if(!currentPage)return;let hPadding=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.SCROLLBAR_PADDING,vPadding=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.VERTICAL_PADDING;if(this.isInPresentationMode){hPadding=vPadding=4;this._spreadMode!==_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.SpreadMode.NONE&&(hPadding*=2)}else this.removePageBorders?hPadding=vPadding=0:this._scrollMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.HORIZONTAL&&([hPadding,vPadding]=[vPadding,hPadding]);const pageWidthScale=(this.container.clientWidth-hPadding)/currentPage.width*currentPage.scale/this.#pageWidthScaleFactor,pageHeightScale=(this.container.clientHeight-vPadding)/currentPage.height*currentPage.scale;switch(value){case"page-actual":scale=1;break;case"page-width":scale=pageWidthScale;break;case"page-height":scale=pageHeightScale;break;case"page-fit":scale=Math.min(pageWidthScale,pageHeightScale);break;case"auto":const horizontalScale=(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.isPortraitOrientation)(currentPage)?pageWidthScale:Math.min(pageHeightScale,pageWidthScale);scale=Math.min(_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.MAX_AUTO_SCALE,horizontalScale);break;default:console.error(`#setScale: "${value}" is an unknown zoom value.`);return}options.preset=!0;this.#setScaleUpdatePages(scale,value,options)}}#resetCurrentPageView(){const pageView=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this.#setScale(this._currentScaleValue,{noScroll:!0});this.#scrollIntoView(pageView)}pageLabelToPageNumber(label){if(!this._pageLabels)return null;const i=this._pageLabels.indexOf(label);return i<0?null:i+1}scrollPageIntoView({pageNumber:pageNumber,destArray:destArray=null,allowNegativeOffset:allowNegativeOffset=!1,ignoreDestinationZoom:ignoreDestinationZoom=!1}){if(!this.pdfDocument)return;const pageView=Number.isInteger(pageNumber)&&this._pages[pageNumber-1];if(!pageView){console.error(`scrollPageIntoView: "${pageNumber}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!destArray){this._setCurrentPageNumber(pageNumber,!0);return}let widthScale,heightScale,x=0,y=0,width=0,height=0;const changeOrientation=pageView.rotation%180!=0,pageWidth=(changeOrientation?pageView.height:pageView.width)/pageView.scale/pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.PixelsPerInch.PDF_TO_CSS_UNITS,pageHeight=(changeOrientation?pageView.width:pageView.height)/pageView.scale/pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.PixelsPerInch.PDF_TO_CSS_UNITS;let scale=0;switch(destArray[1].name){case"XYZ":x=destArray[2];y=destArray[3];scale=destArray[4];x=null!==x?x:0;y=null!==y?y:pageHeight;break;case"Fit":case"FitB":scale="page-fit";break;case"FitH":case"FitBH":y=destArray[2];scale="page-width";if(null===y&&this._location){x=this._location.left;y=this._location.top}else("number"!=typeof y||y<0)&&(y=pageHeight);break;case"FitV":case"FitBV":x=destArray[2];width=pageWidth;height=pageHeight;scale="page-height";break;case"FitR":x=destArray[2];y=destArray[3];width=destArray[4]-x;height=destArray[5]-y;let hPadding=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.SCROLLBAR_PADDING,vPadding=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.VERTICAL_PADDING;this.removePageBorders&&(hPadding=vPadding=0);widthScale=(this.container.clientWidth-hPadding)/width/pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.PixelsPerInch.PDF_TO_CSS_UNITS;heightScale=(this.container.clientHeight-vPadding)/height/pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.PixelsPerInch.PDF_TO_CSS_UNITS;scale=Math.min(Math.abs(widthScale),Math.abs(heightScale));break;default:console.error(`scrollPageIntoView: "${destArray[1].name}" is not a valid destination type.`);return}ignoreDestinationZoom||(scale&&scale!==this._currentScale?this.currentScaleValue=scale:this._currentScale===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.UNKNOWN_SCALE&&(this.currentScaleValue=_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_SCALE_VALUE));if("page-fit"===scale&&!destArray[4]){this.#scrollIntoView(pageView);return}const boundingRect=[pageView.viewport.convertToViewportPoint(x,y),pageView.viewport.convertToViewportPoint(x+width,y+height)];let left=Math.min(boundingRect[0][0],boundingRect[1][0]),top=Math.min(boundingRect[0][1],boundingRect[1][1]);if(!allowNegativeOffset){left=Math.max(left,0);top=Math.max(top,0)}this.#scrollIntoView(pageView,{left:left,top:top})}_updateLocation(firstPage){const currentScale=this._currentScale,currentScaleValue=this._currentScaleValue,normalizedScaleValue=parseFloat(currentScaleValue)===currentScale?Math.round(1e4*currentScale)/100:currentScaleValue,pageNumber=firstPage.id,currentPageView=this._pages[pageNumber-1],container=this.container,topLeft=currentPageView.getPagePoint(container.scrollLeft-firstPage.x,container.scrollTop-firstPage.y),intLeft=Math.round(topLeft[0]),intTop=Math.round(topLeft[1]);let pdfOpenParams=`#page=${pageNumber}`;this.isInPresentationMode||(pdfOpenParams+=`&zoom=${normalizedScaleValue},${intLeft},${intTop}`);this._location={pageNumber:pageNumber,scale:normalizedScaleValue,top:intTop,left:intLeft,rotation:this._pagesRotation,pdfOpenParams:pdfOpenParams}}update(){const visible=this._getVisiblePages(),visiblePages=visible.views,numVisiblePages=visiblePages.length;if(0===numVisiblePages)return;const newCacheSize=Math.max(DEFAULT_CACHE_SIZE,2*numVisiblePages+1);this.#buffer.resize(newCacheSize,visible.ids);this.renderingQueue.renderHighestPriority(visible);const isSimpleLayout=this._spreadMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.SpreadMode.NONE&&(this._scrollMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.PAGE||this._scrollMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.VERTICAL),currentId=this._currentPageNumber;let stillFullyVisible=!1;for(const page of visiblePages){if(page.percent<100)break;if(page.id===currentId&&isSimpleLayout){stillFullyVisible=!0;break}}this._setCurrentPageNumber(stillFullyVisible?currentId:visiblePages[0].id);this._updateLocation(visible.first);this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(element){return this.container.contains(element)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const views=this._scrollMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.PAGE?this.#scrollModePageState.pages:this._pages,horizontal=this._scrollMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.HORIZONTAL,rtl=horizontal&&this._isContainerRtl;return(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.getVisibleElements)({scrollEl:this.container,views:views,sortByVisibility:!0,horizontal:horizontal,rtl:rtl})}cleanup(){for(const pageView of this._pages)pageView.renderingState!==_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.RenderingStates.FINISHED&&pageView.reset()}_cancelRendering(){for(const pageView of this._pages)pageView.cancelRendering()}async#ensurePdfPageLoaded(pageView){if(pageView.pdfPage)return pageView.pdfPage;try{const pdfPage=await this.pdfDocument.getPage(pageView.id);pageView.pdfPage||pageView.setPdfPage(pdfPage);return pdfPage}catch(reason){console.error("Unable to get page for page view",reason);return null}}#getScrollAhead(visible){if(1===visible.first?.id)return!0;if(visible.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case _ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.PAGE:return this.#scrollModePageState.scrollDown;case _ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(currentlyVisiblePages){const visiblePages=currentlyVisiblePages||this._getVisiblePages(),scrollAhead=this.#getScrollAhead(visiblePages),preRenderExtra=this._spreadMode!==_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.SpreadMode.NONE&&this._scrollMode!==_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.HORIZONTAL,pageView=this.renderingQueue.getHighestPriority(visiblePages,this._pages,scrollAhead,preRenderExtra);if(pageView){this.#ensurePdfPageLoaded(pageView).then((()=>{this.renderingQueue.renderView(pageView)}));return!0}return!1}get hasEqualPageSizes(){const firstPageView=this._pages[0];for(let i=1,ii=this._pages.length;i<ii;++i){const pageView=this._pages[i];if(pageView.width!==firstPageView.width||pageView.height!==firstPageView.height)return!1}return!0}getPagesOverview(){let initialOrientation;return this._pages.map((pageView=>{const viewport=pageView.pdfPage.getViewport({scale:1}),orientation=(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.isPortraitOrientation)(viewport);if(void 0===initialOrientation)initialOrientation=orientation;else if(this.enablePrintAutoRotate&&orientation!==initialOrientation)return{width:viewport.height,height:viewport.width,rotation:(viewport.rotation-90)%360};return{width:viewport.width,height:viewport.height,rotation:viewport.rotation}}))}get optionalContentConfigPromise(){if(!this.pdfDocument)return Promise.resolve(null);if(!this._optionalContentConfigPromise){console.error("optionalContentConfigPromise: Not initialized yet.");return this.pdfDocument.getOptionalContentConfig({intent:"display"})}return this._optionalContentConfigPromise}set optionalContentConfigPromise(promise){if(!(promise instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${promise}`);if(this.pdfDocument&&this._optionalContentConfigPromise){this._optionalContentConfigPromise=promise;this.refresh(!1,{optionalContentConfigPromise:promise});this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:promise})}}get scrollMode(){return this._scrollMode}set scrollMode(mode){if(this._scrollMode!==mode){if(!(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.isValidScrollMode)(mode))throw new Error(`Invalid scroll mode: ${mode}`);if(!(this.pagesCount>PagesCountLimit.FORCE_SCROLL_MODE_PAGE)){this._previousScrollMode=this._scrollMode;this._scrollMode=mode;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:mode});this._updateScrollMode(this._currentPageNumber)}}}_updateScrollMode(pageNumber=null){const scrollMode=this._scrollMode,viewer=this.viewer;viewer.classList.toggle("scrollHorizontal",scrollMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.HORIZONTAL);viewer.classList.toggle("scrollWrapped",scrollMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.WRAPPED);if(this.pdfDocument&&pageNumber){scrollMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.PAGE?this.#ensurePageViewVisible():this._previousScrollMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.PAGE&&this._updateSpreadMode();this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#setScale(this._currentScaleValue,{noScroll:!0});this._setCurrentPageNumber(pageNumber,!0);this.update()}}get spreadMode(){return this._spreadMode}set spreadMode(mode){if(this._spreadMode!==mode){if(!(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.isValidSpreadMode)(mode))throw new Error(`Invalid spread mode: ${mode}`);this._spreadMode=mode;this.eventBus.dispatch("spreadmodechanged",{source:this,mode:mode});this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(pageNumber=null){if(!this.pdfDocument)return;const viewer=this.viewer,pages=this._pages;if(this._scrollMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.PAGE)this.#ensurePageViewVisible();else{viewer.textContent="";if(this._spreadMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.SpreadMode.NONE)for(const pageView of this._pages)viewer.append(pageView.div);else{const parity=this._spreadMode-1;let spread=null;for(let i=0,ii=pages.length;i<ii;++i){if(null===spread){spread=document.createElement("div");spread.className="spread";viewer.append(spread)}else if(i%2===parity){spread=spread.cloneNode(!1);viewer.append(spread)}spread.append(pages[i].div)}}}if(pageNumber){this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#setScale(this._currentScaleValue,{noScroll:!0});this._setCurrentPageNumber(pageNumber,!0);this.update()}}_getPageAdvance(currentPageNumber,previous=!1){switch(this._scrollMode){case _ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.WRAPPED:{const{views:views}=this._getVisiblePages(),pageLayout=new Map;for(const{id:id,y:y,percent:percent,widthPercent:widthPercent}of views){if(0===percent||widthPercent<100)continue;let yArray=pageLayout.get(y);yArray||pageLayout.set(y,yArray||=[]);yArray.push(id)}for(const yArray of pageLayout.values()){const currentIndex=yArray.indexOf(currentPageNumber);if(-1===currentIndex)continue;const numPages=yArray.length;if(1===numPages)break;if(previous)for(let i=currentIndex-1,ii=0;i>=ii;i--){const currentId=yArray[i],expectedId=yArray[i+1]-1;if(currentId<expectedId)return currentPageNumber-expectedId}else for(let i=currentIndex+1,ii=numPages;i<ii;i++){const currentId=yArray[i],expectedId=yArray[i-1]+1;if(currentId>expectedId)return expectedId-currentPageNumber}if(previous){const firstId=yArray[0];if(firstId<currentPageNumber)return currentPageNumber-firstId+1}else{const lastId=yArray[numPages-1];if(lastId>currentPageNumber)return lastId-currentPageNumber+1}break}break}case _ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.HORIZONTAL:break;case _ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.PAGE:case _ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.ScrollMode.VERTICAL:{if(this._spreadMode===_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.SpreadMode.NONE)break;const parity=this._spreadMode-1;if(previous&&currentPageNumber%2!==parity)break;if(!previous&&currentPageNumber%2===parity)break;const{views:views}=this._getVisiblePages(),expectedId=previous?currentPageNumber-1:currentPageNumber+1;for(const{id:id,percent:percent,widthPercent:widthPercent}of views)if(id===expectedId){if(percent>0&&100===widthPercent)return 2;break}break}}return 1}nextPage(){const currentPageNumber=this._currentPageNumber,pagesCount=this.pagesCount;if(currentPageNumber>=pagesCount)return!1;const advance=this._getPageAdvance(currentPageNumber,!1)||1;this.currentPageNumber=Math.min(currentPageNumber+advance,pagesCount);return!0}previousPage(){const currentPageNumber=this._currentPageNumber;if(currentPageNumber<=1)return!1;const advance=this._getPageAdvance(currentPageNumber,!0)||1;this.currentPageNumber=Math.max(currentPageNumber-advance,1);return!0}increaseScale({drawingDelay:drawingDelay,scaleFactor:scaleFactor,steps:steps}={}){if(!this.pdfDocument)return;let newScale=this._currentScale;if(scaleFactor>1)newScale=Math.round(newScale*scaleFactor*100)/100;else{steps??=1;do{newScale=Math.ceil(10*(newScale*_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_SCALE_DELTA).toFixed(2))/10}while(--steps>0&&newScale<_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.MAX_SCALE)}this.#setScale(Math.min(_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.MAX_SCALE,newScale),{noScroll:!1,drawingDelay:drawingDelay})}decreaseScale({drawingDelay:drawingDelay,scaleFactor:scaleFactor,steps:steps}={}){if(!this.pdfDocument)return;let newScale=this._currentScale;if(scaleFactor>0&&scaleFactor<1)newScale=Math.round(newScale*scaleFactor*100)/100;else{steps??=1;do{newScale=Math.floor(10*(newScale/_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_SCALE_DELTA).toFixed(2))/10}while(--steps>0&&newScale>_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.MIN_SCALE)}this.#setScale(Math.max(_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.MIN_SCALE,newScale),{noScroll:!1,drawingDelay:drawingDelay})}#updateContainerHeightCss(height=this.container.clientHeight){if(height!==this.#previousContainerHeight){this.#previousContainerHeight=height;_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.docStyle.setProperty("--viewer-container-height",`${height}px`)}}#resizeObserverCallback(entries){for(const entry of entries)if(entry.target===this.container){this.#updateContainerHeightCss(Math.floor(entry.borderBoxSize[0].blockSize));this.#containerTopLeft=null;break}}get containerTopLeft(){return this.#containerTopLeft||=[this.container.offsetTop,this.container.offsetLeft]}get annotationEditorMode(){return this.#annotationEditorUIManager?this.#annotationEditorMode:pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.AnnotationEditorType.DISABLE}set annotationEditorMode({mode:mode,editId:editId=null,isFromKeyboard:isFromKeyboard=!1}){if(!this.#annotationEditorUIManager)throw new Error("The AnnotationEditor is not enabled.");if(this.#annotationEditorMode!==mode){if(!isValidAnnotationEditorMode(mode))throw new Error(`Invalid AnnotationEditor mode: ${mode}`);if(this.pdfDocument){this.#annotationEditorMode=mode;this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:mode});this.#annotationEditorUIManager.updateMode(mode,editId,isFromKeyboard)}}}set annotationEditorParams({type:type,value:value}){if(!this.#annotationEditorUIManager)throw new Error("The AnnotationEditor is not enabled.");this.#annotationEditorUIManager.updateParams(type,value)}refresh(noUpdate=!1,updateArgs=Object.create(null)){if(this.pdfDocument){for(const pageView of this._pages)pageView.update(updateArgs);if(null!==this.#scaleTimeoutId){clearTimeout(this.#scaleTimeoutId);this.#scaleTimeoutId=null}noUpdate||this.update()}}}__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))},603:(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.d(__webpack_exports__,{AbortException:()=>AbortException,AnnotationEditorLayer:()=>AnnotationEditorLayer,AnnotationEditorType:()=>AnnotationEditorType,AnnotationEditorUIManager:()=>AnnotationEditorUIManager,AnnotationLayer:()=>AnnotationLayer,AnnotationMode:()=>AnnotationMode,DrawLayer:()=>DrawLayer,PermissionFlag:()=>PermissionFlag,PixelsPerInch:()=>PixelsPerInch,RenderingCancelledException:()=>RenderingCancelledException,XfaLayer:()=>XfaLayer,createValidAbsoluteUrl:()=>createValidAbsoluteUrl,fetchData:()=>fetchData,getPdfFilenameFromUrl:()=>getPdfFilenameFromUrl,isPdfFile:()=>isPdfFile,normalizeUnicode:()=>normalizeUnicode,renderTextLayer:()=>renderTextLayer,setLayerDimensions:()=>setLayerDimensions,shadow:()=>shadow,updateTextLayer:()=>updateTextLayer,version:()=>version});globalThis.pdfjsLib||await globalThis.pdfjsLibPromise;const{AbortException:AbortException,AnnotationEditorLayer:AnnotationEditorLayer,AnnotationEditorParamsType:AnnotationEditorParamsType,AnnotationEditorType:AnnotationEditorType,AnnotationEditorUIManager:AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer,AnnotationMode:AnnotationMode,build:build,CMapCompressionType:CMapCompressionType,ColorPicker:ColorPicker,createValidAbsoluteUrl:createValidAbsoluteUrl,DOMSVGFactory:DOMSVGFactory,DrawLayer:DrawLayer,FeatureTest:FeatureTest,fetchData:fetchData,getDocument:getDocument,getFilenameFromUrl:getFilenameFromUrl,getPdfFilenameFromUrl:getPdfFilenameFromUrl,getXfaPageViewport:getXfaPageViewport,GlobalWorkerOptions:GlobalWorkerOptions,ImageKind:ImageKind,InvalidPDFException:InvalidPDFException,isDataScheme:isDataScheme,isPdfFile:isPdfFile,MissingPDFException:MissingPDFException,noContextMenu:noContextMenu,normalizeUnicode:normalizeUnicode,OPS:OPS,Outliner:Outliner,PasswordResponses:PasswordResponses,PDFDataRangeTransport:PDFDataRangeTransport,PDFDateString:PDFDateString,PDFWorker:PDFWorker,PermissionFlag:PermissionFlag,PixelsPerInch:PixelsPerInch,RenderingCancelledException:RenderingCancelledException,renderTextLayer:renderTextLayer,setLayerDimensions:setLayerDimensions,shadow:shadow,UnexpectedResponseException:UnexpectedResponseException,updateTextLayer:updateTextLayer,Util:Util,VerbosityLevel:VerbosityLevel,version:version,XfaLayer:XfaLayer}=globalThis.pdfjsLib;__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}),1)},698:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{StructTreeLayerBuilder:()=>StructTreeLayerBuilder});var _ui_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(256);const PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;class StructTreeLayerBuilder{#treeDom=void 0;get renderingDone(){return void 0!==this.#treeDom}render(structTree){if(void 0!==this.#treeDom)return this.#treeDom;const treeDom=this.#walk(structTree);treeDom?.classList.add("structTree");return this.#treeDom=treeDom}hide(){this.#treeDom&&!this.#treeDom.hidden&&(this.#treeDom.hidden=!0)}show(){this.#treeDom?.hidden&&(this.#treeDom.hidden=!1)}#setAttributes(structElement,htmlElement){const{alt:alt,id:id,lang:lang}=structElement;void 0!==alt&&htmlElement.setAttribute("aria-label",(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_0__.removeNullCharacters)(alt));void 0!==id&&htmlElement.setAttribute("aria-owns",id);void 0!==lang&&htmlElement.setAttribute("lang",(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_0__.removeNullCharacters)(lang,!0))}#walk(node){if(!node)return null;const element=document.createElement("span");if("role"in node){const{role:role}=node,match=role.match(HEADING_PATTERN);if(match){element.setAttribute("role","heading");element.setAttribute("aria-level",match[1])}else PDF_ROLE_TO_HTML_ROLE[role]&&element.setAttribute("role",PDF_ROLE_TO_HTML_ROLE[role])}this.#setAttributes(node,element);if(node.children)if(1===node.children.length&&"id"in node.children[0])this.#setAttributes(node.children[0],element);else for(const kid of node.children)element.append(this.#walk(kid));return element}}},860:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{TextAccessibilityManager:()=>TextAccessibilityManager});var _ui_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(256);class TextAccessibilityManager{#enabled=!1;#textChildren=null;#textNodes=new Map;#waitingElements=new Map;setTextMapping(textDivs){this.#textChildren=textDivs}static#compareElementPositions(e1,e2){const rect1=e1.getBoundingClientRect(),rect2=e2.getBoundingClientRect();if(0===rect1.width&&0===rect1.height)return 1;if(0===rect2.width&&0===rect2.height)return-1;const top1=rect1.y,bot1=rect1.y+rect1.height,mid1=rect1.y+rect1.height/2,top2=rect2.y,bot2=rect2.y+rect2.height,mid2=rect2.y+rect2.height/2;if(mid1<=top2&&mid2>=bot1)return-1;if(mid2<=top1&&mid1>=bot2)return 1;return rect1.x+rect1.width/2-(rect2.x+rect2.width/2)}enable(){if(this.#enabled)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#textChildren)throw new Error("Text divs and strings have not been set.");this.#enabled=!0;this.#textChildren=this.#textChildren.slice();this.#textChildren.sort(TextAccessibilityManager.#compareElementPositions);if(this.#textNodes.size>0){const textChildren=this.#textChildren;for(const[id,nodeIndex]of this.#textNodes){document.getElementById(id)?this.#addIdToAriaOwns(id,textChildren[nodeIndex]):this.#textNodes.delete(id)}}for(const[element,isRemovable]of this.#waitingElements)this.addPointerInTextLayer(element,isRemovable);this.#waitingElements.clear()}disable(){if(this.#enabled){this.#waitingElements.clear();this.#textChildren=null;this.#enabled=!1}}removePointerInTextLayer(element){if(!this.#enabled){this.#waitingElements.delete(element);return}const children=this.#textChildren;if(!children||0===children.length)return;const{id:id}=element,nodeIndex=this.#textNodes.get(id);if(void 0===nodeIndex)return;const node=children[nodeIndex];this.#textNodes.delete(id);let owns=node.getAttribute("aria-owns");if(owns?.includes(id)){owns=owns.split(" ").filter((x=>x!==id)).join(" ");if(owns)node.setAttribute("aria-owns",owns);else{node.removeAttribute("aria-owns");node.setAttribute("role","presentation")}}}#addIdToAriaOwns(id,node){const owns=node.getAttribute("aria-owns");owns?.includes(id)||node.setAttribute("aria-owns",owns?`${owns} ${id}`:id);node.removeAttribute("role")}addPointerInTextLayer(element,isRemovable){const{id:id}=element;if(!id)return null;if(!this.#enabled){this.#waitingElements.set(element,isRemovable);return null}isRemovable&&this.removePointerInTextLayer(element);const children=this.#textChildren;if(!children||0===children.length)return null;const index=(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_0__.binarySearchFirstItem)(children,(node=>TextAccessibilityManager.#compareElementPositions(element,node)<0)),nodeIndex=Math.max(0,index-1),child=children[nodeIndex];this.#addIdToAriaOwns(id,child);this.#textNodes.set(id,nodeIndex);const parent=child.parentNode;return parent?.classList.contains("markedContent")?parent.id:null}moveElementInDOM(container,element,contentElement,isRemovable){const id=this.addPointerInTextLayer(contentElement,isRemovable);if(!container.hasChildNodes()){container.append(element);return id}const children=Array.from(container.childNodes).filter((node=>node!==element));if(0===children.length)return id;const elementToCompare=contentElement||element,index=(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_0__.binarySearchFirstItem)(children,(node=>TextAccessibilityManager.#compareElementPositions(elementToCompare,node)<0));0===index?children[0].before(element):children[index-1].after(element);return id}}},27:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{TextHighlighter:()=>TextHighlighter});class TextHighlighter{#eventAbortController=null;constructor({findController:findController,eventBus:eventBus,pageIndex:pageIndex}){this.findController=findController;this.matches=[];this.eventBus=eventBus;this.pageIdx=pageIndex;this.textDivs=null;this.textContentItemsStr=null;this.enabled=!1}setTextMapping(divs,texts){this.textDivs=divs;this.textContentItemsStr=texts}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0;if(!this.#eventAbortController){this.#eventAbortController=new AbortController;this.eventBus._on("updatetextlayermatches",(evt=>{evt.pageIndex!==this.pageIdx&&-1!==evt.pageIndex||this._updateMatches()}),{signal:this.#eventAbortController.signal})}this._updateMatches()}disable(){if(this.enabled){this.enabled=!1;this.#eventAbortController?.abort();this.#eventAbortController=null;this._updateMatches(!0)}}_convertMatches(matches,matchesLength){if(!matches)return[];const{textContentItemsStr:textContentItemsStr}=this;let i=0,iIndex=0;const end=textContentItemsStr.length-1,result=[];for(let m=0,mm=matches.length;m<mm;m++){let matchIdx=matches[m];for(;i!==end&&matchIdx>=iIndex+textContentItemsStr[i].length;){iIndex+=textContentItemsStr[i].length;i++}i===textContentItemsStr.length&&console.error("Could not find a matching mapping");const match={begin:{divIdx:i,offset:matchIdx-iIndex}};matchIdx+=matchesLength[m];for(;i!==end&&matchIdx>iIndex+textContentItemsStr[i].length;){iIndex+=textContentItemsStr[i].length;i++}match.end={divIdx:i,offset:matchIdx-iIndex};result.push(match)}return result}_renderMatches(matches){if(0===matches.length)return;const{findController:findController,pageIdx:pageIdx}=this,{textContentItemsStr:textContentItemsStr,textDivs:textDivs}=this,isSelectedPage=pageIdx===findController.selected.pageIdx,selectedMatchIdx=findController.selected.matchIdx;let prevEnd=null;const infinity={divIdx:-1,offset:void 0};function beginText(begin,className){const divIdx=begin.divIdx;textDivs[divIdx].textContent="";return appendTextToDiv(divIdx,0,begin.offset,className)}function appendTextToDiv(divIdx,fromOffset,toOffset,className){let div=textDivs[divIdx];if(div.nodeType===Node.TEXT_NODE){const span=document.createElement("span");div.before(span);span.append(div);textDivs[divIdx]=span;div=span}const content=textContentItemsStr[divIdx].substring(fromOffset,toOffset),node=document.createTextNode(content);if(className){const span=document.createElement("span");span.className=`${className} appended`;span.append(node);div.append(span);return className.includes("selected")?span.offsetLeft:0}div.append(node);return 0}let i0=selectedMatchIdx,i1=i0+1;if(findController.state.highlightAll){i0=0;i1=matches.length}else if(!isSelectedPage)return;let lastDivIdx=-1,lastOffset=-1;for(let i=i0;i<i1;i++){const match=matches[i],begin=match.begin;if(begin.divIdx===lastDivIdx&&begin.offset===lastOffset)continue;lastDivIdx=begin.divIdx;lastOffset=begin.offset;const end=match.end,isSelected=isSelectedPage&&i===selectedMatchIdx,highlightSuffix=isSelected?" selected":"";let selectedLeft=0;if(prevEnd&&begin.divIdx===prevEnd.divIdx)appendTextToDiv(prevEnd.divIdx,prevEnd.offset,begin.offset);else{null!==prevEnd&&appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset);beginText(begin)}if(begin.divIdx===end.divIdx)selectedLeft=appendTextToDiv(begin.divIdx,begin.offset,end.offset,"highlight"+highlightSuffix);else{selectedLeft=appendTextToDiv(begin.divIdx,begin.offset,infinity.offset,"highlight begin"+highlightSuffix);for(let n0=begin.divIdx+1,n1=end.divIdx;n0<n1;n0++)textDivs[n0].className="highlight middle"+highlightSuffix;beginText(end,"highlight end"+highlightSuffix)}prevEnd=end;isSelected&&findController.scrollMatchIntoView({element:textDivs[begin.divIdx],selectedLeft:selectedLeft,pageIndex:pageIdx,matchIndex:selectedMatchIdx})}prevEnd&&appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset)}_updateMatches(reset=!1){if(!this.enabled&&!reset)return;const{findController:findController,matches:matches,pageIdx:pageIdx}=this,{textContentItemsStr:textContentItemsStr,textDivs:textDivs}=this;let clearedUntilDivIdx=-1;for(const match of matches){for(let n=Math.max(clearedUntilDivIdx,match.begin.divIdx),end=match.end.divIdx;n<=end;n++){const div=textDivs[n];div.textContent=textContentItemsStr[n];div.className=""}clearedUntilDivIdx=match.end.divIdx+1}if(!findController?.highlightMatches||reset)return;const pageMatches=findController.pageMatches[pageIdx]||null,pageMatchesLength=findController.pageMatchesLength[pageIdx]||null;this.matches=this._convertMatches(pageMatches,pageMatchesLength);this._renderMatches(this.matches)}}},765:(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.d(__webpack_exports__,{TextLayerBuilder:()=>TextLayerBuilder});var pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(603),_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(256),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__]);pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__=(__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__)[0];class TextLayerBuilder{#enablePermissions=!1;#onAppend=null;#rotation=0;#scale=0;#textContentSource=null;constructor({highlighter:highlighter=null,accessibilityManager:accessibilityManager=null,enablePermissions:enablePermissions=!1,onAppend:onAppend=null}){this.textContentItemsStr=[];this.renderingDone=!1;this.textDivs=[];this.textDivProperties=new WeakMap;this.textLayerRenderTask=null;this.highlighter=highlighter;this.accessibilityManager=accessibilityManager;this.#enablePermissions=!0===enablePermissions;this.#onAppend=onAppend;this.div=document.createElement("div");this.div.tabIndex=0;this.div.className="textLayer"}#finishRendering(){this.renderingDone=!0;const endOfContent=document.createElement("div");endOfContent.className="endOfContent";this.div.append(endOfContent);this.#bindMouse()}get numTextDivs(){return this.textDivs.length}async render(viewport){if(!this.#textContentSource)throw new Error('No "textContentSource" parameter specified.');const scale=viewport.scale*(globalThis.devicePixelRatio||1),{rotation:rotation}=viewport;if(this.renderingDone){const mustRotate=rotation!==this.#rotation,mustRescale=scale!==this.#scale;if(mustRotate||mustRescale){this.hide();(0,pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.updateTextLayer)({container:this.div,viewport:viewport,textDivs:this.textDivs,textDivProperties:this.textDivProperties,mustRescale:mustRescale,mustRotate:mustRotate});this.#scale=scale;this.#rotation=rotation}this.show()}else{this.cancel();this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr);this.accessibilityManager?.setTextMapping(this.textDivs);this.textLayerRenderTask=(0,pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.renderTextLayer)({textContentSource:this.#textContentSource,container:this.div,viewport:viewport,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr});await this.textLayerRenderTask.promise;this.#finishRendering();this.#scale=scale;this.#rotation=rotation;this.#onAppend?.(this.div);this.highlighter?.enable();this.accessibilityManager?.enable()}}hide(){if(!this.div.hidden&&this.renderingDone){this.highlighter?.disable();this.div.hidden=!0}}show(){if(this.div.hidden&&this.renderingDone){this.div.hidden=!1;this.highlighter?.enable()}}cancel(){if(this.textLayerRenderTask){this.textLayerRenderTask.cancel();this.textLayerRenderTask=null}this.highlighter?.disable();this.accessibilityManager?.disable();this.textContentItemsStr.length=0;this.textDivs.length=0;this.textDivProperties=new WeakMap}setTextContentSource(source){this.cancel();this.#textContentSource=source}#bindMouse(){const{div:div}=this;div.addEventListener("mousedown",(evt=>{const end=div.querySelector(".endOfContent");if(!end)return;let adjustTop=evt.target!==div;adjustTop&&="none"!==getComputedStyle(end).getPropertyValue("-moz-user-select");if(adjustTop){const divBounds=div.getBoundingClientRect(),r=Math.max(0,(evt.pageY-divBounds.top)/divBounds.height);end.style.top=(100*r).toFixed(2)+"%"}end.classList.add("active")}));div.addEventListener("mouseup",(()=>{const end=div.querySelector(".endOfContent");if(end){end.style.top="";end.classList.remove("active")}}));div.addEventListener("copy",(event=>{if(!this.#enablePermissions){const selection=document.getSelection();event.clipboardData.setData("text/plain",(0,_ui_utils_js__WEBPACK_IMPORTED_MODULE_1__.removeNullCharacters)((0,pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.normalizeUnicode)(selection.toString())))}event.preventDefault();event.stopPropagation()}))}}__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))},256:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{DEFAULT_SCALE:()=>DEFAULT_SCALE,DEFAULT_SCALE_DELTA:()=>DEFAULT_SCALE_DELTA,DEFAULT_SCALE_VALUE:()=>DEFAULT_SCALE_VALUE,MAX_AUTO_SCALE:()=>MAX_AUTO_SCALE,MAX_SCALE:()=>MAX_SCALE,MIN_SCALE:()=>MIN_SCALE,OutputScale:()=>OutputScale,PresentationModeState:()=>PresentationModeState,ProgressBar:()=>ProgressBar,RenderingStates:()=>RenderingStates,SCROLLBAR_PADDING:()=>SCROLLBAR_PADDING,ScrollMode:()=>ScrollMode,SpreadMode:()=>SpreadMode,TextLayerMode:()=>TextLayerMode,UNKNOWN_SCALE:()=>UNKNOWN_SCALE,VERTICAL_PADDING:()=>VERTICAL_PADDING,apiPageLayoutToViewerModes:()=>apiPageLayoutToViewerModes,approximateFraction:()=>approximateFraction,binarySearchFirstItem:()=>binarySearchFirstItem,docStyle:()=>docStyle,getVisibleElements:()=>getVisibleElements,isPortraitOrientation:()=>isPortraitOrientation,isValidRotation:()=>isValidRotation,isValidScrollMode:()=>isValidScrollMode,isValidSpreadMode:()=>isValidSpreadMode,parseQueryString:()=>parseQueryString,removeNullCharacters:()=>removeNullCharacters,roundToDivide:()=>roundToDivide,scrollIntoView:()=>scrollIntoView,watchScroll:()=>watchScroll});const DEFAULT_SCALE_VALUE="auto",DEFAULT_SCALE=1,DEFAULT_SCALE_DELTA=1.1,MIN_SCALE=.1,MAX_SCALE=10,UNKNOWN_SCALE=0,MAX_AUTO_SCALE=1.25,SCROLLBAR_PADDING=40,VERTICAL_PADDING=5,RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2},ScrollMode={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},SpreadMode={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};class OutputScale{constructor(){const pixelRatio=window.devicePixelRatio||1;this.sx=pixelRatio;this.sy=pixelRatio}get scaled(){return 1!==this.sx||1!==this.sy}}function scrollIntoView(element,spot,scrollMatches=!1){let parent=element.offsetParent;if(!parent){console.error("offsetParent is not set -- cannot scroll");return}let offsetY=element.offsetTop+element.clientTop,offsetX=element.offsetLeft+element.clientLeft;for(;parent.clientHeight===parent.scrollHeight&&parent.clientWidth===parent.scrollWidth||scrollMatches&&(parent.classList.contains("markedContent")||"hidden"===getComputedStyle(parent).overflow);){offsetY+=parent.offsetTop;offsetX+=parent.offsetLeft;parent=parent.offsetParent;if(!parent)return}if(spot){void 0!==spot.top&&(offsetY+=spot.top);if(void 0!==spot.left){offsetX+=spot.left;parent.scrollLeft=offsetX}}parent.scrollTop=offsetY}function watchScroll(viewAreaElement,callback){const debounceScroll=function(evt){rAF||(rAF=window.requestAnimationFrame((function viewAreaElementScrolled(){rAF=null;const currentX=viewAreaElement.scrollLeft,lastX=state.lastX;currentX!==lastX&&(state.right=currentX>lastX);state.lastX=currentX;const currentY=viewAreaElement.scrollTop,lastY=state.lastY;currentY!==lastY&&(state.down=currentY>lastY);state.lastY=currentY;callback(state)})))},state={right:!0,down:!0,lastX:viewAreaElement.scrollLeft,lastY:viewAreaElement.scrollTop,_eventHandler:debounceScroll};let rAF=null;viewAreaElement.addEventListener("scroll",debounceScroll,!0);return state}function parseQueryString(query){const params=new Map;for(const[key,value]of new URLSearchParams(query))params.set(key.toLowerCase(),value);return params}const InvisibleCharsRegExp=/[\x00-\x1F]/g;function removeNullCharacters(str,replaceInvisible=!1){return InvisibleCharsRegExp.test(str)?replaceInvisible?str.replaceAll(InvisibleCharsRegExp,(m=>"\0"===m?"":" ")):str.replaceAll("\0",""):str}function binarySearchFirstItem(items,condition,start=0){let minIndex=start,maxIndex=items.length-1;if(maxIndex<0||!condition(items[maxIndex]))return items.length;if(condition(items[minIndex]))return minIndex;for(;minIndex<maxIndex;){const currentIndex=minIndex+maxIndex>>1;condition(items[currentIndex])?maxIndex=currentIndex:minIndex=currentIndex+1}return minIndex}function approximateFraction(x){if(Math.floor(x)===x)return[x,1];const xinv=1/x;if(xinv>8)return[1,8];if(Math.floor(xinv)===xinv)return[1,xinv];const x_=x>1?xinv:x;let result,a=0,b=1,c=1,d=1;for(;;){const p=a+c,q=b+d;if(q>8)break;if(x_<=p/q){c=p;d=q}else{a=p;b=q}}result=x_-a/b<c/d-x_?x_===x?[a,b]:[b,a]:x_===x?[c,d]:[d,c];return result}function roundToDivide(x,div){const r=x%div;return 0===r?x:Math.round(x-r+div)}function getVisibleElements({scrollEl:scrollEl,views:views,sortByVisibility:sortByVisibility=!1,horizontal:horizontal=!1,rtl:rtl=!1}){const top=scrollEl.scrollTop,bottom=top+scrollEl.clientHeight,left=scrollEl.scrollLeft,right=left+scrollEl.clientWidth;const visible=[],ids=new Set,numViews=views.length;let firstVisibleElementInd=binarySearchFirstItem(views,horizontal?function isElementNextAfterViewHorizontally(view){const element=view.div,elementLeft=element.offsetLeft+element.clientLeft,elementRight=elementLeft+element.clientWidth;return rtl?elementLeft<right:elementRight>left}:function isElementBottomAfterViewTop(view){const element=view.div;return element.offsetTop+element.clientTop+element.clientHeight>top});firstVisibleElementInd>0&&firstVisibleElementInd<numViews&&!horizontal&&(firstVisibleElementInd=function backtrackBeforeAllVisibleElements(index,views,top){if(index<2)return index;let elt=views[index].div,pageTop=elt.offsetTop+elt.clientTop;if(pageTop>=top){elt=views[index-1].div;pageTop=elt.offsetTop+elt.clientTop}for(let i=index-2;i>=0;--i){elt=views[i].div;if(elt.offsetTop+elt.clientTop+elt.clientHeight<=pageTop)break;index=i}return index}(firstVisibleElementInd,views,top));let lastEdge=horizontal?right:-1;for(let i=firstVisibleElementInd;i<numViews;i++){const view=views[i],element=view.div,currentWidth=element.offsetLeft+element.clientLeft,currentHeight=element.offsetTop+element.clientTop,viewWidth=element.clientWidth,viewHeight=element.clientHeight,viewRight=currentWidth+viewWidth,viewBottom=currentHeight+viewHeight;if(-1===lastEdge)viewBottom>=bottom&&(lastEdge=viewBottom);else if((horizontal?currentWidth:currentHeight)>lastEdge)break;if(viewBottom<=top||currentHeight>=bottom||viewRight<=left||currentWidth>=right)continue;const hiddenHeight=Math.max(0,top-currentHeight)+Math.max(0,viewBottom-bottom),fractionWidth=(viewWidth-(Math.max(0,left-currentWidth)+Math.max(0,viewRight-right)))/viewWidth,percent=(viewHeight-hiddenHeight)/viewHeight*fractionWidth*100|0;visible.push({id:view.id,x:currentWidth,y:currentHeight,view:view,percent:percent,widthPercent:100*fractionWidth|0});ids.add(view.id)}const first=visible[0],last=visible.at(-1);sortByVisibility&&visible.sort((function(a,b){const pc=a.percent-b.percent;return Math.abs(pc)>.001?-pc:a.id-b.id}));return{first:first,last:last,views:visible,ids:ids}}function isValidRotation(angle){return Number.isInteger(angle)&&angle%90==0}function isValidScrollMode(mode){return Number.isInteger(mode)&&Object.values(ScrollMode).includes(mode)&&mode!==ScrollMode.UNKNOWN}function isValidSpreadMode(mode){return Number.isInteger(mode)&&Object.values(SpreadMode).includes(mode)&&mode!==SpreadMode.UNKNOWN}function isPortraitOrientation(size){return size.width<=size.height}new Promise((function(resolve){window.requestAnimationFrame(resolve)}));const docStyle=document.documentElement.style;class ProgressBar{#classList=null;#disableAutoFetchTimeout=null;#percent=0;#style=null;#visible=!0;constructor(bar){this.#classList=bar.classList;this.#style=bar.style}get percent(){return this.#percent}set percent(val){this.#percent=function clamp(v,min,max){return Math.min(Math.max(v,min),max)}(val,0,100);if(isNaN(val))this.#classList.add("indeterminate");else{this.#classList.remove("indeterminate");this.#style.setProperty("--progressBar-percent",`${this.#percent}%`)}}setWidth(viewer){if(!viewer)return;const scrollbarWidth=viewer.parentNode.offsetWidth-viewer.offsetWidth;scrollbarWidth>0&&this.#style.setProperty("--progressBar-end-offset",`${scrollbarWidth}px`)}setDisableAutoFetch(delay=5e3){if(!isNaN(this.#percent)){this.#disableAutoFetchTimeout&&clearTimeout(this.#disableAutoFetchTimeout);this.show();this.#disableAutoFetchTimeout=setTimeout((()=>{this.#disableAutoFetchTimeout=null;this.hide()}),delay)}}hide(){if(this.#visible){this.#visible=!1;this.#classList.add("hidden")}}show(){if(!this.#visible){this.#visible=!0;this.#classList.remove("hidden")}}}function apiPageLayoutToViewerModes(layout){let scrollMode=ScrollMode.VERTICAL,spreadMode=SpreadMode.NONE;switch(layout){case"SinglePage":scrollMode=ScrollMode.PAGE;break;case"OneColumn":break;case"TwoPageLeft":scrollMode=ScrollMode.PAGE;case"TwoColumnLeft":spreadMode=SpreadMode.ODD;break;case"TwoPageRight":scrollMode=ScrollMode.PAGE;case"TwoColumnRight":spreadMode=SpreadMode.EVEN}return{scrollMode:scrollMode,spreadMode:spreadMode}}},973:(__webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(__webpack_module__,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.d(__webpack_exports__,{XfaLayerBuilder:()=>XfaLayerBuilder});var pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(603),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__]);pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__=(__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__)[0];class XfaLayerBuilder{constructor({pdfPage:pdfPage,annotationStorage:annotationStorage=null,linkService:linkService,xfaHtml:xfaHtml=null}){this.pdfPage=pdfPage;this.annotationStorage=annotationStorage;this.linkService=linkService;this.xfaHtml=xfaHtml;this.div=null;this._cancelled=!1}async render(viewport,intent="display"){if("print"===intent){const parameters={viewport:viewport.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:intent};this.div=document.createElement("div");parameters.div=this.div;return pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.XfaLayer.render(parameters)}const xfaHtml=await this.pdfPage.getXfa();if(this._cancelled||!xfaHtml)return{textDivs:[]};const parameters={viewport:viewport.clone({dontFlip:!0}),div:this.div,xfaHtml:xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:intent};if(this.div)return pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.XfaLayer.update(parameters);this.div=document.createElement("div");parameters.div=this.div;return pdfjs_lib__WEBPACK_IMPORTED_MODULE_0__.XfaLayer.render(parameters)}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};__webpack_modules__[moduleId](module,module.exports,__webpack_require__);return module.exports}webpackQueues="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",webpackExports="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",webpackError="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",resolveQueue=queue=>{if(queue&&queue.d<1){queue.d=1;queue.forEach((fn=>fn.r--));queue.forEach((fn=>fn.r--?fn.r++:fn()))}},__webpack_require__.a=(module,body,hasAwait)=>{var queue;hasAwait&&((queue=[]).d=-1);var currentDeps,outerResolve,reject,depQueues=new Set,exports=module.exports,promise=new Promise(((resolve,rej)=>{reject=rej;outerResolve=resolve}));promise[webpackExports]=exports;promise[webpackQueues]=fn=>(queue&&fn(queue),depQueues.forEach(fn),promise.catch((x=>{})));module.exports=promise;body((deps=>{currentDeps=(deps=>deps.map((dep=>{if(null!==dep&&"object"==typeof dep){if(dep[webpackQueues])return dep;if(dep.then){var queue=[];queue.d=0;dep.then((r=>{obj[webpackExports]=r;resolveQueue(queue)}),(e=>{obj[webpackError]=e;resolveQueue(queue)}));var obj={};obj[webpackQueues]=fn=>fn(queue);return obj}}var ret={};ret[webpackQueues]=x=>{};ret[webpackExports]=dep;return ret})))(deps);var fn,getResult=()=>currentDeps.map((d=>{if(d[webpackError])throw d[webpackError];return d[webpackExports]})),promise=new Promise((resolve=>{(fn=()=>resolve(getResult)).r=0;var fnQueue=q=>q!==queue&&!depQueues.has(q)&&(depQueues.add(q),q&&!q.d&&(fn.r++,q.push(fn)));currentDeps.map((dep=>dep[webpackQueues](fnQueue)))}));return fn.r?promise:getResult()}),(err=>(err?reject(promise[webpackError]=err):outerResolve(exports),resolveQueue(queue))));queue&&queue.d<0&&(queue.d=0)};__webpack_require__.d=(exports,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})};__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop);var __webpack_exports__=__webpack_require__(624),__webpack_exports__AnnotationLayerBuilder=(__webpack_exports__=globalThis.pdfjsViewer=await(globalThis.pdfjsViewerPromise=__webpack_exports__)).AnnotationLayerBuilder,__webpack_exports__DownloadManager=__webpack_exports__.DownloadManager,__webpack_exports__EventBus=__webpack_exports__.EventBus,__webpack_exports__FindState=__webpack_exports__.FindState,__webpack_exports__GenericL10n=__webpack_exports__.GenericL10n,__webpack_exports__LinkTarget=__webpack_exports__.LinkTarget,__webpack_exports__PDFFindController=__webpack_exports__.PDFFindController,__webpack_exports__PDFHistory=__webpack_exports__.PDFHistory,__webpack_exports__PDFLinkService=__webpack_exports__.PDFLinkService,__webpack_exports__PDFPageView=__webpack_exports__.PDFPageView,__webpack_exports__PDFScriptingManager=__webpack_exports__.PDFScriptingManager,__webpack_exports__PDFSinglePageViewer=__webpack_exports__.PDFSinglePageViewer,__webpack_exports__PDFViewer=__webpack_exports__.PDFViewer,__webpack_exports__ProgressBar=__webpack_exports__.ProgressBar,__webpack_exports__RenderingStates=__webpack_exports__.RenderingStates,__webpack_exports__ScrollMode=__webpack_exports__.ScrollMode,__webpack_exports__SimpleLinkService=__webpack_exports__.SimpleLinkService,__webpack_exports__SpreadMode=__webpack_exports__.SpreadMode,__webpack_exports__StructTreeLayerBuilder=__webpack_exports__.StructTreeLayerBuilder,__webpack_exports__TextLayerBuilder=__webpack_exports__.TextLayerBuilder,__webpack_exports__XfaLayerBuilder=__webpack_exports__.XfaLayerBuilder,__webpack_exports__parseQueryString=__webpack_exports__.parseQueryString;export{__webpack_exports__AnnotationLayerBuilder as AnnotationLayerBuilder,__webpack_exports__DownloadManager as DownloadManager,__webpack_exports__EventBus as EventBus,__webpack_exports__FindState as FindState,__webpack_exports__GenericL10n as GenericL10n,__webpack_exports__LinkTarget as LinkTarget,__webpack_exports__PDFFindController as PDFFindController,__webpack_exports__PDFHistory as PDFHistory,__webpack_exports__PDFLinkService as PDFLinkService,__webpack_exports__PDFPageView as PDFPageView,__webpack_exports__PDFScriptingManager as PDFScriptingManager,__webpack_exports__PDFSinglePageViewer as PDFSinglePageViewer,__webpack_exports__PDFViewer as PDFViewer,__webpack_exports__ProgressBar as ProgressBar,__webpack_exports__RenderingStates as RenderingStates,__webpack_exports__ScrollMode as ScrollMode,__webpack_exports__SimpleLinkService as SimpleLinkService,__webpack_exports__SpreadMode as SpreadMode,__webpack_exports__StructTreeLayerBuilder as StructTreeLayerBuilder,__webpack_exports__TextLayerBuilder as TextLayerBuilder,__webpack_exports__XfaLayerBuilder as XfaLayerBuilder,__webpack_exports__parseQueryString as parseQueryString};